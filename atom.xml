<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[三省吾身丶丶]]></title>
  <subtitle><![CDATA[兴趣遍地都是，专注和持之以恒才是真正稀缺的。]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://guowenfh.github.io/"/>
  <updated>2016-01-18T05:48:57.110Z</updated>
  <id>http://guowenfh.github.io/</id>
  
  <author>
    <name><![CDATA[guowenfh]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Bootstrap入门笔记之（一）排版]]></title>
    <link href="http://guowenfh.github.io/2016/01/18/Bootstrap-01-typesetting/"/>
    <id>http://guowenfh.github.io/2016/01/18/Bootstrap-01-typesetting/</id>
    <published>2016-01-18T05:40:46.000Z</published>
    <updated>2016-01-18T05:48:57.110Z</updated>
    <content type="html"><![CDATA[<h2 id="1-_标题">1. 标题</h2><p>在Bootstrap中使用标题的方式和常规html一样：从<code>&lt;h1&gt;</code>到<code>&lt;h6&gt;</code>分别从大到小安排标题元素，只不过在Bootstrap中重新设置了其默认样式，从源码中可以看到有如下共性：</p>
<p>字体颜色与字体样式继承自父元素，字体粗细为500，且行高全部设为1.1（也就是font-size的1.1倍）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">font-family</span>:<span class="value"> inherit</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> <span class="number">500</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">line-height</span>:<span class="value"> <span class="number">1.1</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> inherit</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>在不同大小的标题中有着如下区别：</p>
<ol>
<li>在Bootstrap中对于不同级别标题字体大小设置为：<strong>h1=36px，h2=30px，h3=24px，h4=18px，h5=14px和h6=12px。</strong></li>
<li>重新设置了<strong>margin-top</strong>和<strong>margin-bottom</strong>的值，<strong>h1~h3</strong>重置后的值都是<strong>20px</strong>；<strong>h4~h6</strong>重置后的值都是<strong>10px</strong>。</li>
</ol>
<p>除此之外在Bootstrap中为了<strong>让非标题元素和标题使用相同的样式</strong>，还特意定义了<strong>.h1~.h6</strong>六个类名。如下所示：</p>
<p>在Bootstrap中，下面的代码，显示效果相同。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Bootstrap中的标题--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h1</span>&gt;</span>Bootstrap标题一<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h2</span>&gt;</span>Bootstrap标题二<span class="tag">&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h3</span>&gt;</span>Bootstrap标题三<span class="tag">&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h4</span>&gt;</span>Bootstrap标题四<span class="tag">&lt;/<span class="title">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h5</span>&gt;</span>Bootstrap标题五<span class="tag">&lt;/<span class="title">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h6</span>&gt;</span>Bootstrap标题六<span class="tag">&lt;/<span class="title">h6</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Bootstrap中让非标题元素和标题使用相同的样式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h1"</span>&gt;</span>Bootstrap标题一<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h2"</span>&gt;</span>Bootstrap标题二<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h3"</span>&gt;</span>Bootstrap标题三<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h4"</span>&gt;</span>Bootstrap标题四<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h5"</span>&gt;</span>Bootstrap标题五<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"h6"</span>&gt;</span>Bootstrap标题六<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>因为在实际应用中，我们可能经常会遇到除了主标题外，之后紧跟着一个副标题的情况。Bootstrap人性化的为我们设置了这样一个效果。使用方式也特别简单，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">h1</span>&gt;</span>Bootstrap标题一<span class="tag">&lt;<span class="title">small</span>&gt;</span>我是副标题<span class="tag">&lt;/<span class="title">small</span>&gt;</span><span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当然毋庸置疑的是，从<code>&lt;h1&gt;</code>到<code>&lt;h6&gt;</code>都可以使用该设置。副标题<code>&lt;small&gt;</code>有着自己一些独特的样式：</p>
<ol>
<li>行高全部都设置为了1，而且字体粗细变成了常规效果（不加粗），同时颜色被设置为灰色（<code>#999</code>）。</li>
<li>在h1~h3内的<code>&lt;small&gt;</code>标签文本，其大小都设置为当前字号的65%；而在h4~h6内的字号都设置为当前字号的75%；</li>
</ol>
<h2 id="2-_正文文本">2. 正文文本</h2><p>Bootstrap中的文本全局样式如下：</p>
<ol>
<li>字体大小为14px</li>
<li>行高为1.42867143（约等于20px）</li>
<li>字体颜色为<code>#333</code></li>
<li>p标签外部有着10个像素的下外边距<code>margin-bottom:10px;</code></li>
</ol>
<p>当然，你是可以自行设置重置样式的。^_^</p>
<h2 id="3-_强调">3. 强调</h2><h3 id="字体风格相关">字体风格相关</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"lead"</span>&gt;</span>lead<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="comment">&lt;!-- 字体变大，行高变大，下外边距变大 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">i</span>&gt;</span>i<span class="tag">&lt;/<span class="title">i</span>&gt;</span><span class="comment">&lt;!--无特殊意义， 斜体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">small</span>&gt;</span>small<span class="tag">&lt;/<span class="title">small</span>&gt;</span><span class="comment">&lt;!-- 小号字体--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">strong</span>&gt;</span>strong<span class="tag">&lt;/<span class="title">strong</span>&gt;</span><span class="comment">&lt;!-- 语气强烈的强调，粗体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">em</span>&gt;</span>em<span class="tag">&lt;/<span class="title">em</span>&gt;</span><span class="comment">&lt;!-- 强调，斜体 --&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="强调相关的类">强调相关的类</h3><p>在Bootstrap中定义了一系列的这样的类，用于不同的情景，出去text外，还有bg（背景颜色）等等。使用方法类似，只是前面的文本进行了一些改变！所以。<strong>记住这6个单词吧</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-muted"</span>&gt;</span>提示，使用浅灰色（#999）<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-primary"</span>&gt;</span>主要，使用蓝色（#428bca）<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-success"</span>&gt;</span>成功，使用浅绿色(#3c763d)<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-info"</span>&gt;</span>通知信息，使用浅蓝色（#31708f）<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-warning"</span>&gt;</span>警告，使用黄色（#8a6d3b）<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-danger"</span>&gt;</span>危险，使用褐色（#a94442）<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-_文本对齐风格">4. 文本对齐风格</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-left"</span>&gt;</span>我居左<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-center"</span>&gt;</span>我居中<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-right"</span>&gt;</span>我居右<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text-justify"</span>&gt;</span>我两端对齐<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在Bootstrap中，为了简化操作，方便使用，使用了上面这四个类分别对应我们在CSS中常常使用<strong>text-align</strong>来实现文本的对齐风格的设置。</p>
<h2 id="5-_列表">5. 列表</h2><p>在Bootstrap中对于列表的设置与原生的html基本一致，需要注意的有：</p>
<ol>
<li>在列表之间有10px的下外边距</li>
<li>在嵌套列表中，不含有下边距</li>
</ol>
<p>Bootstrap当然不会就这么简单做一点点修改，它定义了一些关于列表的类给我们使用。</p>
<h3 id="去点列表-list-unstyled">去点列表<code>.list-unstyled</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.list-unstyled</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-left</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">list-style</span>:<span class="value"> none</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>从源码中，我们可以看到这样的信息，它除了将项目编号去除之外，还将默认的左边距也清除掉了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"list-unstyled"</span>&gt;</span></span><br><span class="line">    项目列表</span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"list-unstyled"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>带有项目编号<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>带有项目编号<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这样一段代码中，三个列表项会整齐的<strong>排列在一起</strong>，且都没有<strong>项目符号</strong></p>
<h3 id="内联列表-list-inline">内联列表<code>.list-inline</code></h3><p>除了去点列表之外，Bootstrap还可以通过添加类名“.list-inline”来实现内联列表，简单点说就是<strong>把垂直列表换成水平列表，而且去掉项目符号（编号），保持水平显示。</strong>也可以说内联列表就是为制作水平导航而生。</p>
<h3 id="水平定义列表-dl-horizontal">水平定义列表<code>.dl-horizontal</code></h3><p>现有代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dl</span> <span class="attribute">class</span>=<span class="value">"dl-horizontal"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dt</span>&gt;</span>标题一：<span class="tag">&lt;/<span class="title">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dd</span>&gt;</span>描述内容，我很喜欢前端，也很喜欢响应式布局，它能在个不同大小的屏幕下提供很好的体验，我现在是初学者，但是我会越来强的<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dt</span>&gt;</span>标题二：标题二：标题二：标题二：<span class="tag">&lt;/<span class="title">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">dd</span>&gt;</span>描述内容<span class="tag">&lt;/<span class="title">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器全屏显示中可以看到效果如下：</p>
<p><img src="/images/Bootstrap/horizontal1.jpg" alt="自定义水平列表大屏"></p>
<p>我们来把屏幕大小进行改变，在遇到一个临界值时（小屏），水平定义列表将回复到原始的状态，如下改变：</p>
<p><img src="/images/Bootstrap/horizontal2.jpg" alt="自定义水平列表小屏"></p>
<p>这是为什么呢？我们去看看源码吧！<br>原来在这里添加了一个媒体查询，只有<strong>屏幕大于768px</strong>的时候，添加类名<code>.dl-horizontal</code>才具有水平定义列表效果。其实现主要方式：</p>
<ol>
<li><strong>将dt设置了一个左浮动，并且设置了一个宽度为160px</strong></li>
<li><strong>将dd设置一个margin-left的值为180px，达到水平的效果</strong></li>
<li><strong>当标题宽度超过160px时，将会显示三个省略号</strong></li>
</ol>
<p>现在再看看上面的效果是不是和这里的描述都是一样的呢？答案当然是肯定的 ^ ^</p>
<h2 id="6-_代码">6. 代码</h2><p>在Bootstrap主要提供了三种代码风格：</p>
<ol>
<li>使用<code>&lt;code&gt;&lt;/code&gt;</code>来显示单行内联代码——针对于<strong>单个单词或单个句子</strong>的代码</li>
<li>使用<code>&lt;pre&gt;&lt;/pre&gt;</code>来显示多行块代码——针对于<strong>多行代码</strong>（也就是成块的代码）</li>
<li>使用<code>&lt;kbd&gt;&lt;/kbd&gt;</code>来显示用户输入代码——表示<strong>用户要通过键盘输入的内容</strong></li>
</ol>
<p>直接来看效果吧!</p>
<p><img src="/images/Bootstrap/code1.jpg" alt="code风格"></p>
<p>代码如下：（需要注意的是，**不管使用哪种代码风格，在代码中碰到小于号（<code>&lt;</code>）和大于号（<code>&gt;</code>）都需要使用转义字符来替代）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">code风格：</span><br><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span>Bootstrap的代码风格有三种：<span class="tag">&lt;<span class="title">code</span>&gt;</span>&amp;lt;code&amp;gt;<span class="tag">&lt;/<span class="title">code</span>&gt;</span>、<span class="tag">&lt;<span class="title">code</span>&gt;</span>&amp;lt;pre&amp;gt;<span class="tag">&lt;/<span class="title">code</span>&gt;</span>和<span class="tag">&lt;<span class="title">code</span>&gt;</span>&amp;lt;kbd&amp;gt;<span class="tag">&lt;/<span class="title">code</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">pre风格：</span><br><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">pre</span>&gt;</span></span><br><span class="line">&amp;lt;ul&amp;gt;</span><br><span class="line">    &amp;lt;li&amp;gt;...&amp;lt;/li&amp;gt;</span><br><span class="line">&amp;lt;/ul&amp;gt;</span><br><span class="line"><span class="tag">&lt;/<span class="title">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">kbd风格：</span><br><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span>请输入<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>ctrl+c<span class="tag">&lt;/<span class="title">kbd</span>&gt;</span>来复制代码，然后使用<span class="tag">&lt;<span class="title">kbd</span>&gt;</span>ctrl+v<span class="tag">&lt;/<span class="title">kbd</span>&gt;</span>来粘贴代码<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;pre&gt;</code>元素一般用于显示大块的代码，并保证原有格式不变。但有时候代码太多，而且不想让其占有太大的页面篇幅，就想控制代码块的大小。Bootstrap也考虑到这一点，你只需要在<strong>pre标签</strong>上添加类名<code>.pre-scrollable</code>，就可以控制代码块区域<strong>最大高度为340px</strong>，一旦超出这个高度，就会在<strong>Y轴（纵向）出现滚动条。</strong></p>
<p>当然，你也可以进行自定义配置，例如：只需要在自定义的css中，对于该类添加一个<code>word-wrap: normal;</code>，这样的话，在代码块边框横向宽度小于内部代码横向长度时，就会出现横向滚动条。</p>
<h2 id="7-_表格">7. 表格</h2><p>表格是Bootstrap的一个基础组件之一，Bootstrap为表格提供了<strong>1种基础样式</strong>和<strong>4种附加样式</strong>以及<strong>1个支持响应式的表格</strong>。</p>
<p>对应上面所说的，Bootstrap为表格不同的样式风格提供了不同的类名，主要包括：</p>
<table>
<thead>
<tr>
<th style="text-align:center"><code>.table</code></th>
<th style="text-align:center">基础表格</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>.table-striped</code></td>
<td style="text-align:center">斑马线表格</td>
</tr>
<tr>
<td style="text-align:center"><code>.table-bordered</code></td>
<td style="text-align:center">带边框的表格</td>
</tr>
<tr>
<td style="text-align:center"><code>.table-hover</code></td>
<td style="text-align:center">鼠标悬停高亮的表格</td>
</tr>
<tr>
<td style="text-align:center"><code>.table-condensed</code></td>
<td style="text-align:center">紧凑型表格</td>
</tr>
<tr>
<td style="text-align:center"><code>.table-responsive</code></td>
<td style="text-align:center">响应式表格</td>
</tr>
</tbody>
</table>
<p><code>.table</code>主要有三个作用：</p>
<ul>
<li>给表格设置了margin-bottom:20px以及设置单元内距</li>
<li>在thead底部设置了一个2px的浅灰实线</li>
<li>每个单元格顶部设置了一个1px的浅灰实线</li>
</ul>
<p>具体大家可以在源码中查看，后几种附加的样式在这里也不多说，但是下面说一些<strong>注意事项：</strong></p>
<ol>
<li>后几种表格附加样式，必须在基础样式<code>.table</code>之后，例如<code>&lt;table class=&quot;table table-bordered table-hover&quot;&gt;</code></li>
<li>响应式表格：其原理是在表格<strong>外部添加容器</strong>把普通表格<strong>包裹</strong>起来，下面进行详细说明：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"table-responsive"</span>&gt;</span><span class="comment">&lt;!-- 关键！容器包裹后实现响应式 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">table</span> <span class="attribute">class</span>=<span class="value">"table table-bordered"</span>&gt;</span><span class="comment">&lt;!-- 设置表格样式，带边框的表格 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">thead</span>&gt;</span><span class="comment">&lt;!-- 一个表格应该有表头，若直接写tr&gt;td这样的结构，浏览器会自动创建一个tbody包裹 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">thead</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">tbody</span>&gt;</span><span class="comment">&lt;!--与上同理，即使你不创建，浏览器也会自动添加tbody包裹你的代码  --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="title">tbody</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面是宽屏的效果（和普通的表格无区别）：</p>
<p><img src="/images/Bootstrap/table-broad.png" alt="表格行的类"></p>
<p>此处是窄屏的效果（可以看到滚动条的出现）：<br><img src="/images/Bootstrap/table-Narrow.png" alt="表格行的类"></p>
<h3 id="表格行的类，表格情景">表格行的类，表格情景</h3><p>在上面已经说到了在Bootstrap中，为不同的情景做了不一样的颜色，用于不同的信息展示。只是在类名上做了一些小小的改变。下面就可以看到：（图片来自<a href="http://www.imooc.com" target="_blank" rel="external">慕课网</a>）</p>
<p><img src="/images/Bootstrap/table.jpg" alt="表格行的类"></p>
<p>只需要在<strong><code>&lt;tr&gt;</code></strong>标签添加上这些类就可以使用了。<br>除此之外，通过源码可以看到，在这些颜色设置之外，Bootstrap还单独设置了<strong>hover效果（悬浮状态）</strong>的<strong>颜色加深</strong>效果（它对于不同的情况单独进行了颜色设置）。<br>实现也特别简单，只需要像<code>&lt;table class=&quot;table-hover&quot;&gt;</code>这样，在<code>&lt;table&gt;</code>标签加上一个<code>table-hover</code>的类。（在未对<code>&lt;tr&gt;</code>进行情景颜色设置时，该类依然有效果，只是效果不一样，上面已经说到了，因为它的单独设置，具体请到源码中查看）</p>
<p>也正因为这样，如果你想自定义颜色的话，<strong>除了修改<code>tr</code>元素的颜色样式外，在<code>.table-hover</code>表格中也要做相应的调整!</strong></p>
<p>排版的内容到这里就告一段落了，下面进行表单的学习！加油！</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="1-_标题">1. 标题</h2><p>在Bootstrap中使用标题的方式和常规html一样：从<code>&lt;h1&gt;</code>到<code>&lt;h6&gt;</code>分别从大到小安排标题元素，只不过在Bootstrap中重新设置了其默认样]]>
    </summary>
    
      <category term="Bootstrap" scheme="http://guowenfh.github.io/tags/Bootstrap/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Bootstrap入门笔记之（零）简介]]></title>
    <link href="http://guowenfh.github.io/2016/01/17/Bootstrap-00-summary/"/>
    <id>http://guowenfh.github.io/2016/01/17/Bootstrap-00-summary/</id>
    <published>2016-01-17T09:26:06.000Z</published>
    <updated>2016-01-17T10:49:17.791Z</updated>
    <content type="html"><![CDATA[<h3 id="什么是Bootstrap？">什么是Bootstrap？</h3><ol>
<li>Bootstrap 是由Twitter推出的一个用于快速开发 Web 应用程序和网站的前端框架。</li>
<li><p>基于html5、css3的bootstrap，具有下面这些诱人特性：<br>（1）移动设备优先；<br>（2）漂亮的设计；<br>（3）友好的学习曲线；<br>（4）卓越的兼容性；<br>（5）响应式设计；<br>（6）12列响应式栅格结构；<br>（7）样式向导文档。</p>
</li>
<li><p>自定义JQuery插件，完整的类库，基于Less、Sass等</p>
</li>
</ol>
<h3 id="Bootstrap下载">Bootstrap下载</h3><p>可以在其<a href="http://v3.bootcss.com/getting-started/#download" target="_blank" rel="external">中文官网</a>中下载，可以很明显的看到一个大大的下载按钮，此外还可以通过CDN，git命令，以及npm等等方式进行下载。</p>
<p>如果您恰好看了我写的<a href="http://guowenfh.github.io/2015/12/26/SublimeText/">sublime Text</a>的博客的话，肯定知道我们是可以直接通过插件进行安装的。只需要在<code>ctrl</code>+<code>shift</code>+<code>P</code>时,输入<code>fecth:manage</code>，进行如下设置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"packages"</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Bootstrap"</span>: <span class="string">"https://github.com/twbs/bootstrap/releases/download/v3.3.6/bootstrap-3.3.6-dist.zip"</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>之后就可以直接通过sublime Text进行下载了，还是刚刚的步骤，但是这一次输入的是<code>fetch:package</code>。找到<code>Bootstrap</code>，如果下载成功在您的文件夹中应该可以看到主要包括三个文件夹<code>css</code>，<code>fonts</code>和<code>js</code>，如下：</p>
<p><img src="/images/Bootstrap/downloadFolder.jpg" alt="下载文件夹"></p>
<p>可以看到除去字体文件夹外的其他文件夹中每一分文件都有两个不同的版本，一个完整版的文件，方便查看源码如：<code>bootstrap.js</code>和一个用于实际生产情况的压缩文件如<code>bottstrap.min.js</code>；</p>
<p>在字体文件中可以看到有很多文件，但是它的功能很简单，就是是用来制作<strong>icon图标</strong>的文件，使用了CSS3的@font-face技术。</p>
<p>在实际情况中，如果你还想使用更多的图标，还可以在<a href="http://www.iconfont.cn/" target="_blank" rel="external">Iconfont-阿里巴巴矢量图标库</a>，自行查找设置。</p>
<h3 id="Bootstrap标准模板">Bootstrap标准模板</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"zh-CN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在IE运行最新的渲染模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"X-UA-Compatible"</span> <span class="attribute">content</span>=<span class="value">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 初始化移动浏览显示 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Bootstrap 标准模板<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 1. 加载Bootstrap层叠样式表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap.min.css"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 你自己自定义的样式文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"css/your-style.css"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 以下两个插件用于在IE8以及以下版本浏览器支持HTML5元素和媒体查询，如果不需要用可以移除 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--[if lt IE 9]&gt;</span><br><span class="line">      &lt;script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"&gt;&lt;/script&gt;</span><br><span class="line">      &lt;script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;![endif]--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>hello,world<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. 如果要使用Bootstrap的js插件，必须加载jquery库，且必须在bootstrap库之前 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/jquery-min-1.11.3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3. 包括所有bootstrap的js插件或者可以根据需要使用的js插件调用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="全局样式">全局样式</h3><p>Bootstrap框架的核心是轻量的CSS基础代码库，他并没有一味的重置样式，而是注重各浏览器基础表现，降低开发难度。<br>为了增强跨浏览器表现的一致性，Bootstrap使用了 <a href="http://necolas.github.io/normalize.css/" target="_blank" rel="external">Normalize.css</a>。但没有一味全部使用该重置样式，而是在此基础之上进行了一些改良，让其更加符合Bootstrap的设计思想。<br>Bootstrap保留和坚持部分浏览器的基础样式，解决部分潜在的问题，提升一些细节的体验，在排版、链接样式设置了基本的全局样式。具体说明如下：</p>
<ul>
<li>移除body的margin声明</li>
<li>设置body的背景色为白色</li>
<li>为排版设置了基本的字体、字号和行高</li>
<li>设置全局链接颜色，且当链接处于悬浮<code>:hover</code>状态时才会显示下划线样式</li>
</ul>
<p>Bootstrap简介部分到此就结束了，在Bootstrap的<a href="http://v3.bootcss.com/" target="_blank" rel="external">中文官网</a>中，有着层次清晰且详细的说明文档，下面就和我一起走进Bootstrap的世界吧！</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="什么是Bootstrap？">什么是Bootstrap？</h3><ol>
<li>Bootstrap 是由Twitter推出的一个用于快速开发 Web 应用程序和网站的前端框架。</li>
<li><p>基于html5、css3的bootstrap，具有下面这些]]>
    </summary>
    
      <category term="Bootstrap" scheme="http://guowenfh.github.io/tags/Bootstrap/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（七）插件]]></title>
    <link href="http://guowenfh.github.io/2016/01/13/jQuery-07-Plugin/"/>
    <id>http://guowenfh.github.io/2016/01/13/jQuery-07-Plugin/</id>
    <published>2016-01-13T09:20:59.000Z</published>
    <updated>2016-01-13T09:23:24.941Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>插件(Plugin)也成为 jQuery 扩展(Extension)，是一种遵循一定规范的应用程序接口编写出来的程序。目前 jQuery 插件已超过几千种，由来自世界各地的开发者共同编写、验证和完善。而对于jQuery开发者而言，直接使用这些插件将快速稳定架构系统，节约项目成本。</p>
</blockquote>
<h2 id="一．_插件概述">一． 插件概述</h2><p>插件是以 jQuery 的核心代码为基础，编写出复合一定规范的应用程序。也就是说，插件也是 jQuery 代码，通过 js 文件引入的方式植入即可。<br>插件的种类很多，主要大致可以分为：UI 类、表单及验证类、输入类、特效类、Ajax类、滑动类、图形图像类、导航类、综合工具类、动画类等等。<br>引入插件是需要一定步骤的，基本如下：</p>
<ol>
<li>必须先引入 jquery.js 文件，而且在所有插件之前引入；</li>
<li>引入插件；</li>
<li>引入插件的周边，比如皮肤、中文包等。</li>
</ol>
<p>比如最常用到的表单验证插件：<code>validate</code>，除了最基本的插件文件<code>jquery.validate.min.js</code>之外，还有着<code>messages_zh.js</code>等等各国的语言包可以供你使用。</p>
<p>如何使用该插件在这里就不进行描述了，可以去看看慕课网上的视频<a href="http://www.imooc.com/learn/385" target="_blank" rel="external">jQuery插件——Validation Plugin</a>，里面详细的描述了这个插件的各种配置项，以及扩展。</p>
<p>触类旁通，一个优秀的插件，详细的说明文档必不可少，详细的看说明文档能，并且在本地进行测试能让你快速的入门各种插件的使用。</p>
<p>还有各种各样的别人编写好的插件可以供你使用：比如管理cookie的插件–cookie等等。</p>
<p>插件可以去jQuery官网的插件模块进行查找<a href="http://plugins.jquery.com/" target="_blank" rel="external">The jQuery Plugin Registry</a></p>
<h2 id="二-_自定义插件">二. 自定义插件</h2><p>前面我们使用了别人提供好的插件，使用起来非常的方便。如果市面上找不到自己满意的插件，并且想自己封装一个插件提供给别人使用。那么就需要自己编写一个 jQuery 插件了。</p>
<h3 id="插件种类">插件种类</h3><p>按照功能分类，插件的形式可以分为一下三类：</p>
<ol>
<li>封装对象方法的插件；（也就是基于某个 DOM 元素的 jQuery 对象，局部性，使用最多）</li>
<li>封装全局函数的插件；（全局性的封装）</li>
<li>选择器插件。(类似与.find()，例如：<code>color(red)</code>来选择所有的红色元素之类)</li>
</ol>
<h3 id="插件的基本要点">插件的基本要点</h3><p>主要用以以解决各种因为插件导致的冲突、错误等问题，包括如下：</p>
<ol>
<li>插件名推荐使用 jQuery.[插件名].js，以免和其他 js 文件或者其他库相冲突（可以使用alert(<code>$.[插件名]</code>)验证是否存在该全局方法）；</li>
<li>局部对象附加 jQuery.fn 对象上，全局函数附加在 jQuery对象本身上（可以使用alert(<code>$(selector).[插件名]</code>)验证是否存在该局部方法）；</li>
<li>插件内部，this 指向是当前的局部对象（通过选择器获取的jQuery对象）；</li>
<li>可以通过 this.each 来遍历所有元素；</li>
<li>所有的方法或插件，必须用分号结尾，避免出现问题（为了更稳妥，可在插件头部先加上一个分号）；</li>
<li>插件应该返回的是 jQuery 对象，以保证可链式操作；</li>
<li>避免插件内部使用$，如果要使用，使用闭包把传递 jQuery 进去，使插件内部继续使用$作为jQuery的别名。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;<span class="comment">//这里将$符作为匿名函数的形参</span></span><br><span class="line"><span class="comment">/*在此处编写代码，可使用$作为jQuery的缩写别名*/</span></span><br><span class="line">&#125;)(jQuery);<span class="comment">//这里将jQuery作为实参传递给匿名函数了</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="编写一个插件">编写一个插件</h3><p>假设我们的插件需求是：实现一个下拉菜单，在移入该元素时，把对应的下拉列表展现出来，移出时收回。并且可以设置其展开时的文字颜色。</p>
<p>根据惯例，我们在编写插件时，可以对于html结构有所约束。现在假设我们的页面上有如下HTML结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表1</span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"nav"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表5<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表6<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表2</span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"nav"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表5<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span>&gt;</span>导航列表6<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 默认已经引入jquery --&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这里，我们就对我们的插件实现效果有了第一个要求，必须在<code>对于需要hover展现的元素</code>内部下面建立<code>ul</code>列表，且<code>className</code>必须为<code>nav</code>。（插件内部都是根据该条件来做文章）</p>
<p>下面就可以开始编写我们的插件了。保存为<code>jQuery.nav.js</code>，（符合上面所说的要求，默认已经导入）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</span><br><span class="line">    $.extend(&#123; <span class="comment">//插件定义在全局方法上</span></span><br><span class="line">        <span class="string">"nav"</span> : <span class="function"><span class="keyword">function</span> (<span class="params">color</span>)</span>&#123;<span class="comment">//传参，这里只是抛砖引玉，在您编写的时候，参数选项可以更加丰富，例如传入json对象等等</span></span><br><span class="line">            $(<span class="string">'.nav'</span>).css(&#123;<span class="comment">//对展开的下拉列表设置样式，此处在下面进行详细说明</span></span><br><span class="line">                <span class="string">"list-style"</span> : <span class="string">"none"</span>,</span><br><span class="line">                <span class="string">"margin"</span> : <span class="number">0</span>,</span><br><span class="line">                <span class="string">"padding"</span> : <span class="number">0</span>,</span><br><span class="line">                <span class="string">"display"</span> : <span class="string">"none"</span>,</span><br><span class="line">                <span class="string">"color"</span>:color<span class="comment">//由用户控制hover时，展现出来列表的文字颜色</span></span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">'.nav'</span>).parent().hover(<span class="comment">//这里用到了.nav的父节点（就是hover到的元素）</span></span><br><span class="line">                <span class="comment">//因为我们只能在插件要求的范围内进行设定，若是使用了外部的选择器，就违背了这个原则</span></span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).find(<span class="string">".nav"</span>).stop().slideDown(<span class="string">"normal"</span>);<span class="comment">//注意我们在这里使用了jquery的动画方法</span></span><br><span class="line">                &#125;,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).find(<span class="string">".nav"</span>).stop().slideUp(<span class="string">"normal"</span>);<span class="comment">//注意stop()的使用，不然会有类似手风琴效果的出现，但那并不是我们需要的</span></span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)(jQuery);</span><br></pre></td></tr></table></figure>
<p>注意：这里使用css方法只是为了方便，在真实插件编写过程中，若存在如此大量的css样式编写时，推荐在外部定义css样式，例如可改写为：<br>插件依赖的css，需和插件一起导入html中<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.hover</span><span class="rules">&#123;<span class="comment">/*插件必须样式*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">list-style</span>:<span class="value"> none</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> none</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>在插件内部修改。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.nav'</span>).addClass(<span class="string">"hover"</span>);<span class="comment">//将CSS与jQuery分离开来</span></span><br><span class="line">$(<span class="string">'.nav'</span>).css(<span class="string">"color"</span>,color);<span class="comment">//存在用户设置时启用，不存在就不用了（进行判断）</span></span><br></pre></td></tr></table></figure></p>
<p>刚刚说的都是插件的js文件，最后要起到效果，别忘了页面的js中加上那么一句话（当前插件定义在全局方法上）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>  (<span class="params"></span>)</span>&#123;</span><br><span class="line">    $.nav(<span class="string">"#999"</span>);<span class="comment">//调用插件实现的全局方法，并且设置其展现背景颜色为#999。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>就这样，我们的全局插件就编写，而且调用完成了，在你的页面刷新看看，是不是已经有了效果呢？</p>
<p>但是，因为我们的方法定义在全局上，现在只要页面中出现了我们插件所规定的结构，就会存在hover展现效果，但是有时我们往往想要的不是这样，我们希望它在局部，在我指定的元素调用。所以我们需要对其进行一些改造，让其变成局部方法，其实也很简单：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</span><br><span class="line">    $.fn.extend(&#123;<span class="comment">//定义为局部方法</span></span><br><span class="line">        <span class="string">"nav"</span> : <span class="function"><span class="keyword">function</span> (<span class="params">color</span>)</span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).find(<span class="string">'.nav'</span>).addClass(<span class="string">'hover'</span>);<span class="comment">//上面已经说过了,此时this指向调用该方法的元素</span></span><br><span class="line">            $(<span class="keyword">this</span>).find(<span class="string">'.nav'</span>).css(<span class="string">"color"</span>,color);<span class="comment">//在当前元素下，增加了一次find筛选，实现在对应的元素中执行。</span></span><br><span class="line">            $(<span class="keyword">this</span>).find(<span class="string">'.nav'</span>).parent().hover(</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).find(<span class="string">".nav"</span>).stop().slideDown(<span class="string">"normal"</span>);</span><br><span class="line">                &#125;,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).find(<span class="string">".nav"</span>).stop().slideUp(<span class="string">"normal"</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;<span class="comment">//返回当前的对象</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)(jQuery);</span><br></pre></td></tr></table></figure>
<p>我们去刷新一下浏览器。<br>你会发现，咦，怎么没效果？ 当然因为原来的代码是直接在全局调用的，现在变成局部方法了，显然就不能这样做了，需要做一点改变：</p>
<p><strong>我这里就不贴html代码了，但是希望您在实践时能把上面的html代码在其下复制几份</strong>，以达到思考其实现的效果<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>  (<span class="params"></span>)</span>&#123;<span class="comment">//这里的eq(0)代表只对第一份起到效果，复制后的没有效果。</span></span><br><span class="line">    <span class="comment">//（你可以把上面的find筛选删除之后再试试，您会发现，他又对余下的几份起效果了）</span></span><br><span class="line">    $(<span class="string">".list"</span>).eq(<span class="number">0</span>).nav(<span class="string">"red"</span>);<span class="comment">//调用局部方法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>现在回过头再把我们写的插件代码对应上面写的<strong>插件编写的要点</strong>，思考一下，我们还有哪些没有做到？就会发现，基本已经能对应上了。现在我们就完成了一个下拉菜单的插件。</p>
<p>其实编写插件并不难，最主要的是在我们编写插件的时候，一定要时刻注意这样的要点，每一个细节都遵循在大家实践过程中总结出来的最佳实现，才能自定义实现一个良好的插件。</p>
<p>代码首先是写个人看的，再然后才是给机器看的。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>插件(Plugin)也成为 jQuery 扩展(Extension)，是一种遵循一定规范的应用程序接口编写出来的程序。目前 jQuery 插件已超过几千种，由来自世界各地的开发者共同编写、验证和完善。而对于jQuery开发者而言，直接使用这些插件将]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CSS多列布局]]></title>
    <link href="http://guowenfh.github.io/2016/01/10/css-MultiColumn-layout/"/>
    <id>http://guowenfh.github.io/2016/01/10/css-MultiColumn-layout/</id>
    <published>2016-01-10T07:30:52.000Z</published>
    <updated>2016-01-10T07:51:01.541Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>需要注意的是：本篇文章的布局，都未对父元素进行清除浮动的操作，所以在有<strong>一些</strong>使用了float的布局中，需要在parent容器清除浮动，才能在实际情况下使用。（清除浮动的方式在这里不做讨论）</p>
</blockquote>
<h2 id="一列定宽一列自适应">一列定宽一列自适应</h2><p>这部分的html结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>left<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>大家先来看看直接在左侧添加浮动是怎么样的吧：<br><img src="/images/css/layout/FixedWidthAndAdaptive-initial.jpg" alt="一列定宽，文字环绕效果"></p>
<p>不要觉得诧异！因为float最开始的出现就是为了实现这个文字环绕效果的，只不过被攻城师们玩坏了，用到了布局上；但这肯定不是我们想要的，来看看我们想要的是怎么样的吧！<br><img src="/images/css/layout/FixedWidthAndAdaptive-target.jpg" alt="一列定宽，一列自适应"></p>
<p>这样才对嘛！是我们想要的！下面就来看看css的实现吧：</p>
<h3 id="1-_float+margin">1. <code>float</code>+<code>margin</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span><span class="rules">&#123;   </span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> <span class="number">120px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>优点：兼容IE7+，便于理解；缺点：不兼容IE6，在right内部第一个元素存在清除浮动时，会发生right掉下去的情况。</p>
<p>一起来看看错误的例子：<br><img src="/images/css/layout/FixedWidthAndAdaptive-issue.jpg" alt="一列定宽，错误"><br>怎么解决呢？</p>
<h3 id="2-_改进版—float+margin+fix">2. 改进版—<code>float</code>+<code>margin</code>+<code>fix</code></h3><p>优点：兼容性好，兼容所有浏览器；缺点：结构增加，样式复杂。</p>
<p>布局改变如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>left<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- html部分在这个地方进行了添加，使用right-fix把原有结构包裹住了 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right-fix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">p</span> &gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>css部分：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>; <span class="comment">/*提升左边的层级*/</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right-fix</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> right</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">100px</span></span></span>;<span class="comment">/*处理右边掉下来的情况*/</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> <span class="number">120px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-_float+overflow">3. <code>float</code>+<code>overflow</code></h3><p>优点：设置简单；</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"><span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value">hidden</span></span>;<span class="comment">/*触发BFC*/</span></span><br><span class="line">    <span class="comment">/*_zoom:1;*/</span> <span class="comment">/*IE6使用zoom:1来触发BFC*/</span></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-_table">3. <code>table</code></h3><p>HTML结构还是和第一个一样。</p>
<p>优点：加速table渲染，实现布局优先；缺点：代码量大，复杂</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">table-layout</span>:<span class="value"> fixed</span></span>;<span class="comment">/*加速table渲染，实现布局优先*/</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span>,<span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table-cell</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-_flex">4. <code>flex</code></h3><p>优点：结构简单；缺点：兼容性差iE10+，性能不好，常用作小范围布局</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> <span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> <span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">flex</span>:<span class="value"><span class="number">1</span></span></span>;<span class="comment">/**/</span></span><br><span class="line"> &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="多列定宽一列自适应">多列定宽一列自适应</h2><p>大家来看看想要达到的效果：<br><img src="/images/css/layout/twoFixedWidthAndAdaptive-initial.jpg" alt="二列定宽，一列自适应"><br>其实只是在上面的布局上，中间再加入一个center。<br>html结构如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>left<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>center<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>css部分：把center设置和left一样<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span>,<span class="class">.center</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="一列不定宽,一列自适应">一列不定宽,一列自适应</h2><blockquote>
<p>HTML结构同一列定宽一列自适应。<br>其实就是对一列定宽,一列自适应的后三个进行一下改造</p>
</blockquote>
<p>实现效果和上面一样，但是宽度不在固定了！</p>
<h3 id="1-_float+overflow">1. <code>float</code>+<code>overflow</code></h3><p>优点：兼容性好，使用最多，结构简单；（其实和上面的改变就是左侧使用内容去撑开高度，因为原来的实现已经达到了这个效果）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"><span class="number">20px</span></span></span>;</span><br><span class="line">    <span class="comment">/*width:200px;*/</span><span class="comment">/*可设置宽度，也可使用内容撑开*/</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value">hidden</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span> <span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200px</span></span></span>;&#125;</span><span class="comment">/*使用内容去撑开宽度*/</span></span><br></pre></td></tr></table></figure>
<h3 id="2-_table">2. <code>table</code></h3><p>缺点：支持IE8+，设置复杂。</p>
<p>对css进行如下更改：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span>,<span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table-cell</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">0.1%</span></span></span>;<span class="comment">/*只要足够小就行*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">padding-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span> <span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200px</span></span></span>;&#125;</span><span class="comment">/*使用内容去撑开宽度*/</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-_flex">3. <code>flex</code></h3><p>缺点：还是上面的问题<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> <span class="class">.left</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> <span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">flex</span>:<span class="value"><span class="number">1</span></span></span>;<span class="comment">/**/</span></span><br><span class="line"> &#125;</span></span><br><span class="line"> <span class="class">.left</span> <span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200px</span></span></span>;&#125;</span><span class="comment">/*使用内容去撑开宽度*/</span></span><br></pre></td></tr></table></figure></p>
<h2 id="两列不定宽，一列自适应。">两列不定宽，一列自适应。</h2><p>HTML结构同两列定宽一列自适应。<br>以<code>float+overflow</code>为例，只需要把<code>center</code>设置和<code>left</code>一样就可以了。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.left</span>,<span class="class">.center</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>除了这个方法之外，上面的不定宽中的三个方法都能使用</p>
<h2 id="等分布局">等分布局</h2><p>html结构如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>1<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>2<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>3<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"column"</span>&gt;</span><span class="tag">&lt;<span class="title">p</span>&gt;</span>4<span class="tag">&lt;/<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>按照惯例，先来分析一下实现过程。可以看到下图：<br><img src="/images/css/layout/EqualWidthLayoutThink.jpg" alt="等分布局分析"></p>
<p>其实我们只需要给父容器增加一个G，也就是一个负的margin就可以实现了，下面就来看看吧：</p>
<h3 id="1-_float+margin-1">1. <code>float</code>+<code>margin</code></h3><p>优点：设置简单；缺点：支持IE8+，在布局变更时，需改变css样式（width：XX%）结构和样式耦合在了一起</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#666</span></span></span>;&#125;</span><span class="comment">/*对div中的p标签设置才有间隔效果，所以在设置内容时，也是在p中设置*/</span></span><br><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.column</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-left</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> border-box</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>实现效果如下：<br><img src="/images/css/layout/EqualWidthLayoutPadding.jpg" alt="等分布局存在左侧padding"></p>
<p>效果不是就达到了呢？其实还不尽然，可以看到最左边还有一个宽度，我们不想要怎么办？</p>
<p>这并不是一个bug，而是我们的设置导致的，现在来删除上面的<code>padding-left: 20px;</code>吧，可以看到成了这样子：<br><img src="/images/css/layout/EqualWidthLayoutDefault.jpg" alt="等分布局未设置padding"></p>
<p>如果你需要有填充的话，自行设置吧</p>
<h3 id="2-_table+(fix)">2. <code>table</code>+<code>(fix)</code></h3><p><strong>html部分在上面的基础上，在最外层增加<code>&lt;div class=&quot;parent-fix&quot;&gt;</code>包裹住<code>&lt;div class=&quot;parent&quot;&gt;</code></strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent-fix</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">table-layout</span>:<span class="value"> fixed</span></span>;<span class="comment">/*布局优先，且在单元格未设宽度时，将被内容平分*/</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.column</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table-cell</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-left</span>:<span class="value"> <span class="number">20px</span></span></span>;<span class="comment">/*间隔，自行考虑是否取消*/</span></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-_flex-1">3. <code>flex</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.column</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">flex</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.column</span>+<span class="class">.column</span><span class="rules">&#123;<span class="comment">/*给后三列设置间隔*/</span></span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"><span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>实现效果如下：<br><img src="/images/css/layout/EqualWidthLayoutFlex.jpg" alt="等分布局FLex"><br><strong>这里使用的是margin，因为flex自动分配剩余空间</strong></p>
<h2 id="等高布局">等高布局</h2><p>大家先来看看想要的效果：<br><img src="/images/css/layout/EqualHeightLayout.jpg" alt="等高布局"></p>
<p>是不是很熟悉？html和第一部分一样：<br>但是两侧高度等同于高度最高的部分。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>left<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span>&gt;</span>right<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在<strong>使用<code>table</code>和<code>flex</code>布局时就自然实现了等高布局</strong></p>
<p>这里就不贴了，代码实现参考上面。主要是下面这个方案：</p>
<h3 id="float实现"><code>float</code>实现</h3><p>实际上没有完全相同，只是达到了效果</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span>,<span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-bottom</span>:<span class="value"> <span class="number">9999px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"> -<span class="number">9999px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.left</span><span class="rules">&#123;  </span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.right</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>再一次提醒：实际情况中使用，需要在外层容器清除浮动。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>需要注意的是：本篇文章的布局，都未对父元素进行清除浮动的操作，所以在有<strong>一些</strong>使用了float的布局中，需要在parent容器清除浮动，才能在实际情况下使用。（清除浮动的方式在这里不做讨论）</p>
</blockqu]]>
    </summary>
    
      <category term="css" scheme="http://guowenfh.github.io/tags/css/"/>
    
      <category term="布局" scheme="http://guowenfh.github.io/tags/%E5%B8%83%E5%B1%80/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CSS3选择器详解]]></title>
    <link href="http://guowenfh.github.io/2016/01/08/css-selector/"/>
    <id>http://guowenfh.github.io/2016/01/08/css-selector/</id>
    <published>2016-01-08T14:38:19.000Z</published>
    <updated>2016-01-08T14:39:51.829Z</updated>
    <content type="html"><![CDATA[<h2 id="1-常用选择器">1.常用选择器</h2><p>1.1标签选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">p</span><span class="rules">&#123; &#125;</span><span class="comment">/*选择标签名为p的元素*/</span></span><br></pre></td></tr></table></figure></p>
<p>1.2类选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.box</span><span class="rules">&#123; &#125;</span><span class="comment">/*选择class名为box的元素*/</span></span><br></pre></td></tr></table></figure></p>
<p>1.3ID选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#pid</span><span class="rules">&#123; &#125;</span><span class="comment">/*选择id名为pid的元素*/</span></span><br></pre></td></tr></table></figure></p>
<p>1.4通配符选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*<span class="rules">&#123; &#125;</span><span class="comment">/*选择页面中所有的元素*/</span></span><br></pre></td></tr></table></figure></p>
<p>1.5选择器前缀<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span><span class="class">.bd</span><span class="rules">&#123;&#125;</span><span class="comment">/*选中class名为bd且标签为div的元素*/</span></span><br></pre></td></tr></table></figure></p>
<p>1.6属性选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr_selector">[disabled]</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择带有属性disabled的所有元素*/</span></span><br><span class="line"><span class="attr_selector">[type=button]</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择type属性为button的所有元素*/</span></span><br><span class="line"><span class="attr_selector">[class~=sports]</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择class属性包含sports所有元素*/</span></span><br><span class="line"><span class="attr_selector">[lang|=en]</span><span class="rules">&#123;  &#125;</span><span class="comment">/*选择以lang属性以"en"开头以及以"-"分隔的所有元素*/</span></span><br><span class="line"><span class="tag">a</span><span class="attr_selector">[href^="#"]</span><span class="rules">&#123; &#125;</span><span class="comment">/*选择href属性以"#"开头的a元素*/</span></span><br><span class="line"><span class="attr_selector">[href$="pdf"]</span><span class="rules">&#123;  &#125;</span><span class="comment">/*选择href属性以"pdf"结尾的元素*/</span></span><br><span class="line"><span class="attr_selector">[href*="lady.163.com"]</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择href属性中包含"lady.163.com"的元素*/</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2-伪类选择器">2.伪类选择器</h2><p>2.1链接伪类<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*前两个只可用于描元素（链接）*/</span></span><br><span class="line"><span class="tag">a</span><span class="pseudo">:link</span> <span class="rules">&#123;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#FF0000</span></span></span>;&#125;</span>     <span class="comment">/* 未被访问的链接 */</span></span><br><span class="line"><span class="tag">a</span><span class="pseudo">:visited</span> <span class="rules">&#123;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#00FF00</span></span></span>;&#125;</span>  <span class="comment">/* 已被访问的链接 */</span></span><br><span class="line"><span class="comment">/*后两个可以用于其它元素*/</span></span><br><span class="line"><span class="tag">a</span><span class="pseudo">:hover</span> <span class="rules">&#123;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#FF00FF</span></span></span>;&#125;</span>    <span class="comment">/* 鼠标指针移动到链接上 */</span></span><br><span class="line"><span class="tag">a</span><span class="pseudo">:active</span> <span class="rules">&#123;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#0000FF</span></span></span>;&#125;</span>   <span class="comment">/* 正在被点击的链接 */</span></span><br></pre></td></tr></table></figure></p>
<p>链接在进行设置时：<code>a:hover</code> 必须位于 <code>a:link</code> 和 <code>a:visited</code> 之后, <code>a:active</code> 必须位于 <code>a:hover</code> 之后。</p>
<p>2.2动态伪类<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">input</span><span class="pseudo">:focus</span><span class="rules">&#123;&#125;</span><span class="comment">/*设置input元素获得焦点后的样式*/</span></span><br><span class="line"><span class="tag">input</span><span class="pseudo">:enabled</span><span class="rules">&#123;&#125;</span><span class="comment">/*元素可用的状态*/</span></span><br><span class="line"><span class="tag">input</span><span class="pseudo">:disabled</span><span class="rules">&#123;&#125;</span><span class="comment">/*元素不可用的状态，属性选择器[disabled]的简写*/</span></span><br><span class="line"><span class="tag">input</span><span class="pseudo">:checked</span><span class="rules">&#123;&#125;</span><span class="comment">/*单选框或者复选框选择的样式*/</span></span><br></pre></td></tr></table></figure></p>
<p>2.3树形图上的伪类<br>html结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">p</span>&gt;</span>5<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>选择符：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">ul</span><span class="pseudo">:first-child</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择第一个ul下第一个标签（css2定义，支持ie7）在处理margin时很有用*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*以下全是CSS3新增的伪类*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:last-child</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择最后一个li标签*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:nth-child(n)</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择()内的表达式如：[2n+1]，或者数字所代表的li标签*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:nth-last-child(n)</span><span class="comment">/*同上，反向选择*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:only-child</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择ul只有一个子元素的项，这里会选中第三个li下的a标签*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:first-of-type</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择第一个该类型的标签，会选择第一个li和p*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:last-of-type</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择最后一个该类型的标签，会选择第四个li和p*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:nth-last-of-type(2n)</span><span class="rules">&#123;  &#125;</span><span class="comment">/*倒数的选择(.)内的表达式[2n]，或数字所代表的该类型标签。选择第一个和第三个li标签*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:only-of-type</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择ul下中只有一个该类型的项，会选中a标签和p标签*/</span></span><br><span class="line"><span class="pseudo">:root</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择文档的根元素*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:not(li)</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择不含有li标签的元素，这里会选中a标签和p元素*/</span></span><br><span class="line"><span class="tag">ul</span><span class="pseudo">:empty</span><span class="rules">&#123;&#125;</span><span class="comment">/*匹配ul下没有任何子元素（包括text节点）的元素，这里匹配不到，把p标签中的5删除，可匹配成功*/</span></span><br><span class="line"><span class="tag">E</span><span class="pseudo">:target</span><span class="rules">&#123;&#125;</span><span class="comment">/*匹配相关URL（锚点）指向的元素。*/</span></span><br></pre></td></tr></table></figure></p>
<h2 id="3-伪元素选择器">3.伪元素选择器</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="pseudo">::first-letter</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择第一个字母*/</span></span><br><span class="line"><span class="pseudo">::first-line</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择第一行*/</span></span><br><span class="line"><span class="pseudo">::before</span><span class="rules">&#123;<span class="rule"><span class="attribute">content</span>:<span class="value"><span class="string">"before"</span></span></span>;&#125;</span><span class="comment">/*在某个元素之前插入一些内容*/</span></span><br><span class="line"><span class="pseudo">::after</span><span class="rules">&#123;<span class="rule"><span class="attribute">content</span>:<span class="value"><span class="string">"after"</span></span></span>;&#125;</span><span class="comment">/*在某个元素后插入一些内容*/</span></span><br><span class="line"><span class="pseudo">::selection</span><span class="rules">&#123;&#125;</span><span class="comment">/*设置于被用户选中时的样式*/</span></span><br><span class="line"><span class="pseudo">::placeholder</span><span class="rules">&#123;&#125;</span><span class="comment">/*设置对象文字占位符的样式*/</span></span><br></pre></td></tr></table></figure>
<h2 id="4-组合选择器">4.组合选择器</h2><p>4.1后代选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main</span> <span class="tag">h2</span><span class="rules">&#123;  &#125;</span><span class="comment">/*选择class名为mian元素内的所有h2标签*/</span></span><br></pre></td></tr></table></figure></p>
<p>4.2子选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main</span>&gt;<span class="tag">h2</span><span class="rules">&#123;  &#125;</span><span class="comment">/*选择class名为mian元素内的直接关联与父元素的h2标签*/</span></span><br></pre></td></tr></table></figure></p>
<p>4.3相连选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h2</span>~<span class="tag">p</span><span class="rules">&#123;&#125;</span><span class="comment">/*只要P标签前有h2标签便选择*/</span></span><br></pre></td></tr></table></figure></p>
<p>4.4兄弟选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h2</span>~<span class="tag">p</span><span class="rules">&#123;&#125;</span><span class="comment">/*选择h2标签后出现的所有p标签*/</span></span><br></pre></td></tr></table></figure></p>
<p>4.4选择器分组<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">h1</span>,<span class="tag">h2</span>,<span class="tag">h3</span><span class="rules">&#123;<span class="rule"><span class="attribute">backgound-color</span>:<span class="value"><span class="hexcolor">#ddd</span></span></span>;&#125;</span><span class="comment">/*同时设置h1,h2,h3标签,使用","分隔*/</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-继承">5.继承</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">body</span><span class="rules">&#123;<span class="rule"><span class="attribute">font-family</span>:<span class="value"><span class="string">"Microsoft Yahei"</span></span></span>;&#125;</span><span class="comment">/*设置页面中所有的字体为微软雅黑*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>继承属性<ul>
<li>color</li>
<li>font</li>
<li>text-align</li>
<li>list-style</li>
<li>…</li>
</ul>
</li>
<li>非继承属性<ul>
<li>background</li>
<li>border</li>
<li>position</li>
<li>…</li>
</ul>
</li>
</ul>
<h2 id="6-CSS优先级">6.CSS优先级</h2><ul>
<li>计算方法<ul>
<li>a = 行内样式</li>
<li>b = ID选择器的数量</li>
<li>c = 类/伪类和属性选择器的数量</li>
<li>d = 标签选择器和伪元素选择器数量</li>
</ul>
</li>
</ul>
<blockquote>
<p>value = a<em>1000 + b</em>100 + c*10 +d</p>
</blockquote>
<p><code>!important</code>强行提升优先级</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="1-常用选择器">1.常用选择器</h2><p>1.1标签选择器<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br>]]>
    </summary>
    
      <category term="css" scheme="http://guowenfh.github.io/tags/css/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[CSS之各种居中]]></title>
    <link href="http://guowenfh.github.io/2016/01/06/css-position-middle/"/>
    <id>http://guowenfh.github.io/2016/01/06/css-position-middle/</id>
    <published>2016-01-06T08:16:08.000Z</published>
    <updated>2016-01-06T09:33:09.478Z</updated>
    <content type="html"><![CDATA[<p>本博客讨论居中情况设定为<strong>总宽度不定,内容宽度不定</strong>的情况。（改变大小时，仍然居中）。</p>
<p>特别说明：在元素设置<code>position:absolute;</code>来设置居中效果时，除去博客下介绍的css3方法外，还可以使用负的<code>margin</code>来居中，这样解决了兼容性的问题，但是只适用于宽高已知的情况（因为负的偏移量为元素宽高的一半）。宽高改变时，不再是居中效果。</p>
<p>在这些布局中的子元素，因为其属性设置，都默认为内容宽度。</p>
<p>本博客所有居中的例子，只讨论css的实现，html代码统一如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span>demo<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="1-_水平居中">1. 水平居中</h2><p><img src="/images/css/position/HorizontalCenter.jpg" alt="水平居中"></p>
<h3 id="1-1_inline-block配合text-align">1.1 <code>inline-block</code>配合<code>text-align</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">text-align</span>:<span class="value"> center</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：兼容性非常好，只需要添加只需要在子元素的css中添加<code>*display:inline</code>和<code>*zoom:1</code>就可兼容到IE6、7；缺点：内部文字也会水平居中，需消除影响。</p>
</blockquote>
<h3 id="1-2_table配合margin">1.2  <code>table</code>配合<code>margin</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value">table</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：设置特别简单，只需对子元素进行设置，支持IE8+，需支持IE6，7时，可更换子元素为表格结构。</p>
</blockquote>
<h3 id="1-3_abasolute配合transform">1.3  <code>abasolute</code>配合<code>transform</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(-<span class="number">50%</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> 优点：居中元素不对其他元素产生影响。缺点：CSS3新属性支持IE9+，低版本浏览器不支持。</p>
</blockquote>
<h2 id="2-_垂直居中">2. 垂直居中</h2><p><img src="/images/css/position/VerticalCenter.jpg" alt="垂直居中"></p>
<h3 id="2-1_table-cell配合vertical-align">2.1  <code>table-cell</code>配合<code>vertical-align</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table-cell</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">vertical-align</span>:<span class="value">middle</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：设置简单，只需对父元素进行设置，兼容到IE8+，需兼容地版本浏览器时，可更换<code>div</code>为表格结构。</p>
</blockquote>
<h3 id="2-2_absolute配合tranform">2.2  <code>absolute</code>配合<code>tranform</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">50%</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：居中元素不对其他元素产生影响。缺点：CSS3新属性支持IE9+，低版本浏览器不支持。</p>
</blockquote>
<h2 id="3-_水平+垂直居中">3.  水平+垂直居中</h2><p><img src="/images/css/position/middle.jpg" alt="水平垂直居中"></p>
<h3 id="3-1_inline-block配合text-align加上table-cell配合vertical-align">3.1  <code>inline-block</code>配合<code>text-align</code>加上<code>table-cell</code>配合<code>vertical-align</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> table-cell</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">vertical-align</span>:<span class="value">middle</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">text-align</span>:<span class="value">center</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：综合前两中方法，兼容性好！支持IE8+，低版本浏览器也好兼容。缺点：设置较为复杂。</p>
</blockquote>
<h3 id="3-2_absolute配合transform">3.2  <code>absolute</code>配合<code>transform</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>,-<span class="number">50%</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>优点：居中元素不对其他元素产生影响。缺点：CSS3新属性支持IE9+，低版本浏览器不支持。</p>
</blockquote>
<h2 id="4-_全能的flex">4. 全能的<code>flex</code></h2><p>css3新增布局属性，布局简单，强大，性能略差，只支持IE10+，在移动端使用较多。</p>
<h3 id="4-1_水平居中">4.1 水平居中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*当父元素设置display: flex;时，子元素为flex-item，默认为内容宽度。*/</span></span><br><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">justify-content</span>:<span class="value"> center</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="comment">/* 在设置子元素为margin: 0 auto;时，可删除父元素的justify-content: center;同样可以达到居中效果*/</span></span><br><span class="line"><span class="comment">/*  .child&#123;</span><br><span class="line">        margin: 0 auto; </span><br><span class="line">    &#125;*/</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2_垂直居中">4.2  垂直居中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">align-items</span>:<span class="value"> center</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3_水平垂直居中">4.3  水平垂直居中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.parent</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">justify-content</span>:<span class="value"> center</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">align-items</span>:<span class="value"> center</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="comment">/*如同flex布局的第一部分一样这里也可以对子元素进行下面的设置：同时删除上面的除去display外的其他属性*/</span></span><br><span class="line"><span class="comment">/*  .child&#123;</span><br><span class="line">        margin:auto;</span><br><span class="line">    &#125; */</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>本博客讨论居中情况设定为<strong>总宽度不定,内容宽度不定</strong>的情况。（改变大小时，仍然居中）。</p>
<p>特别说明：在元素设置<code>position:absolute;</code>来设置居中效果时，除去博客下介绍的css3方法外，还可以使用]]>
    </summary>
    
      <category term="css" scheme="http://guowenfh.github.io/tags/css/"/>
    
      <category term="布局" scheme="http://guowenfh.github.io/tags/%E5%B8%83%E5%B1%80/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（六）工具函数]]></title>
    <link href="http://guowenfh.github.io/2016/01/03/jQuery-06-toolFunction/"/>
    <id>http://guowenfh.github.io/2016/01/03/jQuery-06-toolFunction/</id>
    <published>2016-01-03T14:20:57.000Z</published>
    <updated>2016-01-03T14:28:45.749Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>工具函数直接依附于 jQuery 对象，针对 jQuery 对象本身定义的方法，它是全局性<br>的函数。主要提供比如字符串、数组、对象等操作方面的遍历。</p>
</blockquote>
<p><strong>字符串操作</strong><br>去除字符串左右空格的工具函数：<code>$.trim()</code>。这个函数我在task0002的部分已经用正则实现了。<br>如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">""</span>;</span><br><span class="line">    result = str.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>); <span class="comment">//使用正则进行字符串替换</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//下面是jQuery中的使用方法</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"         guowen      "</span>;</span><br><span class="line">alert($.trim(str));<span class="comment">//可以看到空格被去除了</span></span><br></pre></td></tr></table></figure>
<h2 id="数组及对象操作">数组及对象操作</h2><p>jQuery 为处理数组和对象提供了一些工具函数，这些函数可以便利的给数组或对象进行<br>遍历、筛选、搜索等操作。</p>
<p><strong>遍历</strong></p>
<p>这个我也实现了，其实特别简单，只不过jQuery与和我实现的方法略微有一点不同，且更强大一点。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"二狗"</span>, <span class="string">"甲地"</span>, <span class="string">"道德"</span>, <span class="string">"鲤鱼"</span>];</span><br><span class="line"><span class="comment">//原生JS实现，只能用来遍历数组，不能遍历对象。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = arr.length; i &lt; l; i++) &#123;<span class="comment">//遍历传参</span></span><br><span class="line">        fn(arr[i], i);<span class="comment">//第一项为值，第二项为索引</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">each(arr,<span class="function"><span class="keyword">function</span>(<span class="params">value,index</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(index+<span class="string">":"</span>+value);<span class="comment">//0:二狗1:甲地2:道德3:鲤鱼</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//jQuery中的方法</span></span><br><span class="line">$.each(arr, <span class="function"><span class="keyword">function</span> (<span class="params">index,value</span>) </span>&#123;<span class="comment">//注意此处更改了参数的位置。index为数组下标，从0开始</span></span><br><span class="line">    <span class="built_in">console</span>.log(index+<span class="string">":"</span>+value);<span class="comment">//0:二狗1:甲地2:道德3:鲤鱼</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//$.each()还可以用来遍历对象</span></span><br><span class="line"><span class="comment">//&lt;div id="box"&gt;&lt;/div&gt;</span></span><br><span class="line">$.each($.ajax(), <span class="function"><span class="keyword">function</span> (<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#box"</span>).html($(<span class="string">"#box"</span>).html() + name + <span class="string">"."</span> + <span class="string">"&lt;br /&gt;"</span>);<span class="comment">//一堆,就不贴了</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong><code>$.grep()</code>数据筛选</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">12</span>, <span class="number">33</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">77</span>, <span class="number">55</span>, <span class="number">32</span>];</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 数据筛选函数。</span><br><span class="line"> * @param  &#123;String or Number&#125; element  这里表示数组项，字符串数字都有可能（自行在函数内部进行筛选）</span><br><span class="line"> * @param  &#123;Number&#125; index   表示数组下标，如下面的index&lt;4，就只在前四项进行筛选</span><br><span class="line"> * @return &#123;String or Number&#125;         返回筛选出来的项</span><br><span class="line"> */</span></span><br><span class="line"><span class="built_in">console</span>.log($.grep(arr,<span class="function"><span class="keyword">function</span>  (<span class="params">element,index</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> element&lt;<span class="number">6</span>&amp;&amp;index&lt;<span class="number">4</span>;<span class="comment">//会打印出[4, 5]。</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p><strong> $.map()修改数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//还是上面的数组</span></span><br><span class="line"><span class="keyword">var</span> arrMap = $.map(arr,<span class="function"><span class="keyword">function</span>(<span class="params">element, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(element&lt;<span class="number">6</span> &amp;&amp; index&lt;<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> element+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arrMap);<span class="comment">//打印出[5,6]</span></span><br></pre></td></tr></table></figure>
<p><strong> $.inArray()获取查找到元素的下标</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 获取查找到元素的下标</span><br><span class="line">* @param  &#123;String or Number&#125; element  需要查找的字符串或数字</span><br><span class="line">* @param  &#123;Array&#125; arr   待查找的数组</span><br><span class="line">* @return &#123;Number&#125;   返回查找到的元素的数组下标0开始，(查找到多个时，返回第一个)，未查找到时返回-1</span><br><span class="line">*/</span></span><br><span class="line"><span class="keyword">var</span> arrInArray = $.inArray(<span class="number">1</span>, arr);</span><br><span class="line"><span class="built_in">console</span>.log(arrInArray);<span class="comment">//返回4</span></span><br></pre></td></tr></table></figure>
<p><strong> $.merge()合并两个数组</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将arr2拼接到arr后，返回合并的数组</span></span><br><span class="line">$.merge(arr, arr2);</span><br></pre></td></tr></table></figure>
<p> <strong>$.unique()删除重复的 DOM 元素</strong>（不能处理数字和字符串）<br>没太明白，只能删除拼接过来的重复元素，对自身的元素不受影响？<a href="http://www.css88.com/jqapi-1.9/jQuery.unique/" target="_blank" rel="external">文档地址</a><br>希望有看明白的教育我一下。。</p>
<p>发一个我实现的普通数组去重吧。(处理数字和字符串)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniqArray</span>(<span class="params">arr</span>) </span>&#123;<span class="comment">//数组去重</span></span><br><span class="line">    <span class="keyword">var</span> result = []; <span class="comment">//创建一个新数组。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = arr.length; i &lt; l; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result.indexOf(arr[i]) === -<span class="number">1</span>) &#123; <span class="comment">//查找是否已经含有该元素</span></span><br><span class="line">            result.push(arr[i]); <span class="comment">//添加到新数组</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result; <span class="comment">//返回去重后的新数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong> toArray()合并多个dom元素组成数组。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;li&gt;4&lt;/li&gt;&lt;/ul&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">'li'</span>).toArray());<span class="comment">//[[li, li, li, li]]。注意数组项是原生的DOM元素。</span></span><br><span class="line"><span class="built_in">console</span>.log($(<span class="string">'li'</span>).toArray().length);<span class="comment">//4</span></span><br></pre></td></tr></table></figure>
<h2 id="测试操作（类型判断）">测试操作（类型判断）</h2><blockquote>
<p>在jQuery数据有着各种类型和状态。可以通过判断数据的类型和状态做相应的操作。</p>
</blockquote>
<p>测试工具函数</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$.isArray(obj)</td>
<td>判断是否为数组对象，是返回 true</td>
</tr>
<tr>
<td>$.isFunction(obj)</td>
<td>判断是否为函数，是返回 true</td>
</tr>
<tr>
<td>$.isEmptyObject(obj)</td>
<td>判断是否为空对象，是返回 true</td>
</tr>
<tr>
<td>$.isPlainObjet(obj)</td>
<td>判断是否为纯粹对象，是返回 true</td>
</tr>
<tr>
<td>$.contains(obj)</td>
<td>判断 DOM 节点是否含另一个 DOM 节点，是返回 true</td>
</tr>
<tr>
<td>$.type(data)</td>
<td>判断数据类型</td>
</tr>
<tr>
<td>$.isNumeric(data)</td>
<td>判断数据是否为数值</td>
</tr>
<tr>
<td>$.isWindow(data)</td>
<td>判断数据是否为 window 对象</td>
</tr>
</tbody>
</table>
<p>挑几个出来说明一下</p>
<p>判断是否为空对象<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;a:<span class="string">"1"</span>&#125;;</span><br><span class="line">alert($.isEmptyObject(obj));<span class="comment">//false。</span></span><br></pre></td></tr></table></figure></p>
<p>判断是由{}或 new Object()创造出的对象<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert($.isPlainObject(&#123;a:<span class="string">"1"</span>&#125;));<span class="comment">//true</span></span><br><span class="line">alert($.isPlainObject(<span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">"a"</span>)));<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p><strong>URL解析</strong><br>其实在Ajax的博客中已经讲到了：$.param()将对象键值对转换为 URL 字符串键值对</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name : <span class="string">'Lee'</span>,</span><br><span class="line">    email : <span class="string">"guowen921@163.com"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( $.param(obj));<span class="comment">//name=Lee&amp;email=guowen921%40163.com</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">decodeURIComponent</span>( $.param(obj)));<span class="comment">//name=Lee&amp;email=guowen921@163.com</span></span><br><span class="line"><span class="comment">//请注意上面的邮箱部分，$.param()会对于特殊字符进行编码传输，下面的代码，可以将其解析成字符</span></span><br></pre></td></tr></table></figure>
<p><strong>改变this指向</strong><br>$.proxy方法类似于ECMAScript 5的bind方法，可以绑定函数的上下文（也就是this对象）和参数，返回一个新函数。<br>主要用处是为回调函数绑定上下文对象。如如外部事件触发调用对象方法时 this 的指向问题。</p>
<blockquote>
<p>来自javaScript标准参考教程。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&lt;button&gt;点击&lt;/button&gt;</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    name: <span class="string">"Lee"</span>,</span><br><span class="line">    test: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">$(<span class="string">"button"</span>)</span><br><span class="line">  .on(<span class="string">"click"</span>, o.test) <span class="comment">// 无输出（默认this指向触发该事件的元素也就是button）</span></span><br><span class="line">  .on(<span class="string">"click"</span>, $.proxy(o.test, o)); <span class="comment">// Lee，现在指向o</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>工具函数直接依附于 jQuery 对象，针对 jQuery 对象本身定义的方法，它是全局性<br>的函数。主要提供比如字符串、数组、对象等操作方面的遍历。</p>
</blockquote>
<p><strong>字符串操作</strong><br]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（五）jQuery中的Ajax]]></title>
    <link href="http://guowenfh.github.io/2016/01/03/jQuery-05-Ajax/"/>
    <id>http://guowenfh.github.io/2016/01/03/jQuery-05-Ajax/</id>
    <published>2016-01-03T04:22:45.000Z</published>
    <updated>2016-01-06T09:45:18.663Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>关于Ajax的概述就不说了，有兴趣自己去找一下吧，并且建议去我博客看关于原生js实现Ajax函数的实现，希望有所帮助。服务器的配置，那篇文章也给出了地址。<br><a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/">Ajax入门（一）从0开始到一次成功的GET请求</a><br><a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/">Ajax入门（二）Ajax函数封装</a></p>
</blockquote>
<h2 id="jQuery中的Ajax">jQuery中的Ajax</h2><blockquote>
<p>jQuery 对 Ajax 做了大量的封装，我们使用起来也较为方便，不需要去考虑浏览器兼容性。对于封装的方式，jQuery采用了三层封装：最底层的封装方法为：$.ajax()，而通过这层封装了第二层有三种方法：.load()、$.get()和$.post()，最高层是$.getScript()和$.getJSON()方法。</p>
</blockquote>
<h3 id="Ajax中的load()方法">Ajax中的<code>load()</code>方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Ajax中的load方法（局部方法，可以直接绑定在需要获取的元素上）</span><br><span class="line"> * @param &#123;String&#125;        url  必须，获取文件地址</span><br><span class="line"> * @param &#123;JSON or String&#125;          可选，键值对方式的请求参数或者（使用键值对形式，请求将转化成post）</span><br><span class="line"> * @param &#123;Function&#125;      可选，请求成功的回调函数</span><br><span class="line"> *   @config   &#123;String&#125;   responseText         获得字符串形式的响应数据</span><br><span class="line"> *   @config   &#123;String&#125;   textStatus            文本方式返回HTTP状态码</span><br><span class="line"> *   @config   &#123;Object&#125;   XMLHttpRequest        xhr对象，有多种属性</span><br><span class="line"> */</span></span><br><span class="line">.load(url, data, complete(responseText, textStatus, XMLHttpRequest));</span><br></pre></td></tr></table></figure>
<p>例如下面这段代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#box'</span>).load(<span class="string">'test.php'</span>, &#123;url : <span class="string">'guowen'</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在控制台可以看到请求为POST，（注意：这里第二个参数若是字符串的情况，例如”url=guowen”，请求仍然为GET。）<br>所以服务器端php文件应该如此设置：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">"url"</span>] == <span class="string">"guowen"</span>) &#123;<span class="comment">//get请求把POST更改一下就好了</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;a href='http://guowenfh.github.io/'&gt;三省吾身丶丶&lt;/a&gt;"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"其他网站"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>关于XHR对象上的属性，和HTTP状态码，参考我原来的博客。</p>
<h3 id="$-get()和$-post()">$.get()和$.post()</h3><blockquote>
<p>.load()方法是局部方法，因为他需要一个包含元素的 jQuery 对象作为前缀。而$.get()和$.post()是全局方法，无须指定某个元素。对于用途而言，.load()适合做静态文件的异步获取，而对于需要传递参数到服务器页面的，$.get()和$.post()更加合适。</p>
</blockquote>
<p>$.get()方法有四个参数，前面三个参数和.load()一样，多了一个第四参数type，即服务器返回的内容格式：包括xml、html、script、json、jsonp和text。第一个参数为必选参数，后面三个为可选参数</p>
<p>GET方式请求会直接在html后以<code>?Key=value</code>跟随，所以，有三种形式请求数据，</p>
<ol>
<li>直接跟在url后</li>
<li>字符串形式的<code>&quot;url=guowen&quot;</code></li>
<li>键值对形式的<code>{url:&quot;guowen&quot;}</code></li>
</ol>
<p>POST请求方式除去不能直接跟在url后之外，剩余两个，使用方法一样</p>
<p><strong>注意:</strong> 与<code>.load()</code>方法不同的是：<code>.load()</code>方法根据第二个参数的不同类型，请求方式会改变，但这里已经是两个独立的方法了，所以请求类型不会进行转换。</p>
<p>第四个参数一般都不进行设置，jQuery会自动转换其类型。强制设置时，有可能会连标签一起返回。</p>
<p>至于POST与GET方式请求的差别，在我原来的博客中也有写到，这里就不赘述了。</p>
<h3 id="$-getScript()和$-getJSON()"><code>$.getScript()</code>和<code>$.getJSON()</code></h3><p>jQuery提供了一组用于特定异步加载的方法：<code>$.getScript()</code>，用于加载特定的JS文件；<code>$.getJSON()</code>，用于专门加载JSON文件。</p>
<p><code>$.getJSON()</code>方法与之前的使用方法类似，就是把第四个参数，类型强制设置成了JSON。</p>
<p>有时我们希望能够特定的情况再加载JS文件，而不是一开始把所有JS文件都加载了，这时就可以使用<code>$.getScript()</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击按钮后再加载 JS 文件</span></span><br><span class="line">$(<span class="string">'input'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.getScript(<span class="string">'test.js'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="$-ajax()"><code>$.ajax()</code></h3><blockquote>
<p>$.ajax()是所有 ajax 方法中最底层的方法，所有其他方法都是基于$.ajax()方法的封装。这个方法只有一个参数，传递一个各个功能键值对的对象。</p>
</blockquote>
<p>参数很多有兴趣的自己去看<a href="http://www.css88.com/jqapi-1.9/jQuery.ajax/" target="_blank" rel="external">jQuery.ajax()</a>，本来准备写几个常用的。强迫症犯了，去网上找资料做成了表格。。如下：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>String</td>
<td>发送请求的地址</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>请求方式：POST 或 GET，默认 GET</td>
</tr>
<tr>
<td>timeout</td>
<td>Number</td>
<td>设置请求超时的时间（毫秒）</td>
</tr>
<tr>
<td>data</td>
<td>Object 或String</td>
<td>发送到服务器的数据，键值对字符串或对象</td>
</tr>
<tr>
<td>dataType</td>
<td>String</td>
<td>返回的数据类型，比如 html、xml、json 等</td>
</tr>
<tr>
<td>beforeSend</td>
<td>Function</td>
<td>发送请求前可修改 XMLHttpRequest 对象的函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>请求完成后调用的回调函数</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>请求成功后调用的回调函数</td>
</tr>
<tr>
<td>error</td>
<td>Function</td>
<td>请求失败时调用的回调函数</td>
</tr>
<tr>
<td>global</td>
<td>Boolean</td>
<td>默认为 true，表示是否触发全局 Ajax</td>
</tr>
<tr>
<td>cache</td>
<td>Boolean</td>
<td>设置浏览器缓存响应，默认为 true。如果 dataType类型为 script 或 jsonp 则为 false。</td>
</tr>
<tr>
<td>content</td>
<td>DOM</td>
<td>指定某个元素为与这个请求相关的所有回调函数的上下文。</td>
</tr>
<tr>
<td>contentType</td>
<td>String</td>
<td>指 定 请 求 内 容 的 类 型 。 默 认 为application/x-www-form-urlencoded。</td>
</tr>
<tr>
<td>async</td>
<td>Boolean</td>
<td>是否异步处理。默认为 true，false 为同步处理</td>
</tr>
<tr>
<td>processData</td>
<td>Boolean</td>
<td>默认为 true，数据被处理为 URL 编码格式。如果为 false，则阻止将传入的数据处理为 URL 编码的格式。</td>
</tr>
<tr>
<td>dataFilter</td>
<td>Function</td>
<td>用来筛选响应数据的回调函数。</td>
</tr>
<tr>
<td>ifModified</td>
<td>Boolean</td>
<td>默认为 false，不进行头检测。如果为true，进行头检测，当相应内容与上次请求改变时，请求被认为是成功的。</td>
</tr>
<tr>
<td>jsonp</td>
<td>String</td>
<td>指定一个查询参数名称来覆盖默认的 jsonp 回调参数名 callback。</td>
</tr>
<tr>
<td>username</td>
<td>String</td>
<td>在 HTTP 认证请求中使用的用户名</td>
</tr>
<tr>
<td>password</td>
<td>String</td>
<td>在 HTTP 认证请求中使用的密码</td>
</tr>
<tr>
<td>scriptCharset</td>
<td>String</td>
<td>当远程和本地内容使用不同的字符集时，用来设置 script 和 jsonp 请求所使用的字符集。</td>
</tr>
<tr>
<td>xhr</td>
<td>Function</td>
<td>用来提供 XHR 实例自定义实现的回调函数</td>
</tr>
<tr>
<td>traditional</td>
<td>Boolean</td>
<td>默认为 false，不使用传统风格的参数序列化。如为 true，则使用</td>
</tr>
</tbody>
</table>
<p>最常用的如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type : <span class="string">'POST'</span>, <span class="comment">//这里可以换成 GET</span></span><br><span class="line">        url : <span class="string">'test.php'</span>,</span><br><span class="line">        data : &#123;</span><br><span class="line">            url : <span class="string">'guowen'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">response, stutas, xhr</span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'#box'</span>).html(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意：对于data属性，如果是GET、模式，可以使用三种之前说所的三种形式。如果是POST模式可以使用之前所说的两种形式。（这里不需要考虑之前的data类型的问题了，因为指定了请求类型，不会转化）</p>
<h3 id="表单序列化">表单序列化</h3><p>使用表单序列化方法<code>.serialize()</code>，会智能的获取指定表单内的所有元素。这样，在面对大量表单元素时，会把表单元素内容序列化为字符串，然后再使用Ajax请求。<br>序列化表单内的元素：<code>data : $(&#39;form&#39;).serialize()</code>，其余部分相同。</p>
<p>除此之外还可以直接获取单选框、复选框和下拉列表框等内容</p>
<p>除了<code>.serialize()</code>方法，还有一个可以返回 JSON 数据的方法：<code>.serializeArray()</code>。这个方法可以直接把数据整合成键值对的 JSON 对象。<br>使用方法相同<code>$(&#39;form&#39;).serializeArray()</code>.</p>
<p>有时，我们可能会在同一个程序中多次调用$.ajax()方法。而它们很多参数都相同，这<br>个时候我们课时使用 jQuery 提供的<code>$.ajaxSetup()</code>请求默认值来初始化参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'form input[type=button]'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajaxSetup(&#123;<span class="comment">//初始化多个ajax方法相同部分参数，后面再写ajax的时候，就不用在写了。</span></span><br><span class="line">        type : <span class="string">'POST'</span>,</span><br><span class="line">        url : <span class="string">'test.php'</span>,</span><br><span class="line">        data : $(<span class="string">'form'</span>).serialize()<span class="comment">//表单序列化</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        success : <span class="function"><span class="keyword">function</span> (<span class="params">response, status, xhr</span>) </span>&#123;</span><br><span class="line">                    alert(response);</span><br><span class="line">                &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>在使用 data 属性传递的时候，如果是以对象形式传递键值对，可以使用<code>$.param()</code>方法将对象转换为字符串键值对格式。</p>
<p>主要是针对无法直接使用表单序列化方法<code>.serialize()</code>的情况，且传递参数为对象，建议使用该方法进行解析后再进行传递。</p>
<h2 id="Ajax进阶">Ajax进阶</h2><h3 id="加载请求，及错误处理。">加载请求，及错误处理。</h3><p>主要是处理网速较慢的情况，出现请求时间较长的问题。而此时若没有一点提示，用户可能会认为你的网页出现了问题。若是能在请求过程中给用户一些提示，比如：正在努力加载中…… 。 可能会对用户更加友好一些。<br>jQuery提供了两个全局事件，jQuery 提供了两个全局事件，<code>.ajaxStart()</code>和<code>.ajaxStop()</code>。<br>这两个全局事件，只要用户触发了 Ajax，请求开始时（<strong>未完成其他请求</strong>）激活<code>.ajaxStart()</code>，请求结束时（<strong>所有请求都结束了</strong>）激活<code>.ajaxStop()</code>。<br>值得注意的是，因为是全局事件，所以这两个方法是直接需要直接绑定到document上的。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxStart(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">".loading"</span>).show();</span><br><span class="line">&#125;).ajaxStop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">".loading"</span>).hide();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当然你也可以自行在ajax内部进行一些设置,如请求超时时间，该ajax函数是否触发全局事件等等。以键值对的方式写明就可以了。</p>
<p>错误处理也特别简单</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    <span class="comment">//…………</span></span><br><span class="line">    timeout : <span class="number">500</span>,<span class="comment">//如果请求时间太长，可以设置超时</span></span><br><span class="line">    global : <span class="literal">false</span>,<span class="comment">//如果某个 ajax 不想触发全局事件，可以设置取消</span></span><br><span class="line">    error : <span class="function"><span class="keyword">function</span>(<span class="params">xhr,errorText,errorType</span>)</span>&#123;<span class="comment">//一般都直接用xhr对象</span></span><br><span class="line">                alert(<span class="string">"发生错误："</span>+xhr.status);<span class="comment">//返回错误状态码</span></span><br><span class="line">            &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>除此之外<code>$.get()</code>、<code>$.post()</code>和<code>.load()</code>,可以通过连缀处理使用局部<code>.error()</code>方法来处理错误，当然还有一个全局的方法：通过全局<code>.ajaxError()</code>事件方法来返回错误信息。即可</p>
<h3 id="请求全局事件">请求全局事件</h3><p>jQuery 对于 Ajax 操作提供了很多全局事件方法，除去上面已经提到的.ajaxStart()、.ajaxStop()、.ajaxError()等事件方法。他们都属于请求时触发的全局事件，除了这些，还有一些其他全局事件：</p>
<ol>
<li>.ajaxSuccess()，对应一个局部方法：.success()，请求成功完成时执行。</li>
<li>.ajaxComplete()，对应一个局部方法：.complete()，请求完成后注册一个回调函数。</li>
<li>.ajaxSend()，没有对应的局部方法，只有属性 beforeSend，请求发送之前要绑定的函数。</li>
</ol>
<p><strong>注意：</strong>全局事件方法是所有 Ajax 请求都会触发到，并且只能绑定在 document 上。而局部方法，则针对某个 Ajax。<br>对于一些全局事件方法的参数，大部分为对象，而这些对象有哪些属性或方法能调用，<br>可以通过遍历方法得到。如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//遍历 settings 对象的属性</span></span><br><span class="line">$(<span class="built_in">document</span>).ajaxSuccess(<span class="function"><span class="keyword">function</span> (<span class="params">event, xhr, settings</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> settings) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这些全局方法，在$.ajax()方法中都可以直接以参数中的键值对的形式来完成</p>
<h3 id="JSON和JSONP">JSON和JSONP</h3><p>其实在同一个域中时，只要url的后缀是json的文件的，默认就是json。当然你还可以使用<code>$.ajax()</code>方法设置 dataType属性加载 JSON 文件。</p>
<p>先来试试本地JSON:<br>php如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line">    <span class="variable">$_arr</span>= <span class="keyword">array</span>(<span class="string">'a'</span>=&gt;<span class="number">1</span>,<span class="string">'b'</span>=&gt;<span class="number">2</span>,<span class="string">'c'</span>=&gt;<span class="number">3</span>);</span><br><span class="line">    <span class="variable">$_result</span> = json_encode(<span class="variable">$_arr</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$_result</span>;</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>js:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type:<span class="string">"post"</span>,</span><br><span class="line">    url:<span class="string">"test.php"</span>,</span><br><span class="line">    dataType:<span class="string">"json"</span>,<span class="comment">//因为文件类型是php。但是返回的数据是json，所以必须设置类型，否则返回字符串</span></span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">response,staus,xhr</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response.a);<span class="comment">//打印出来1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>实现跨域：这部分需要服务器端配合。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line">    <span class="variable">$_arr</span>= <span class="keyword">array</span>(<span class="string">'a'</span>=&gt;<span class="number">1</span>,<span class="string">'b'</span>=&gt;<span class="number">2</span>,<span class="string">'c'</span>=&gt;<span class="number">3</span>);</span><br><span class="line">    <span class="variable">$_result</span> = json_encode(<span class="variable">$_arr</span>);</span><br><span class="line">    <span class="variable">$_callback</span> = <span class="variable">$_GET</span>[<span class="string">'callback'</span>];<span class="comment">//关键在这。配合客户端JS使用</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$_callback</span>.<span class="string">"($_result)"</span>;<span class="comment">//php用点号实现字符串拼接</span></span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>客户端实现：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;<span class="comment">//我本地地址为http://127.0.0.1:8020/ajax.html</span></span><br><span class="line">    type:<span class="string">"GET"</span>,</span><br><span class="line">    url:<span class="string">"http://localhost/test.php?callback=?"</span>,<span class="comment">//这样就可以实现跨域资源的访问了，最后的？号，jQuery会自动转化成字符串</span></span><br><span class="line">    dataType:<span class="string">"json"</span>,<span class="comment">//若这里使用JSONP的话，可以删除上面url的“?callback=?”，jQuery会自动处理。</span></span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">response,staus,xhr</span>)</span>&#123;</span><br><span class="line">        alert(response.a);</span><br><span class="line">        <span class="built_in">console</span>.log(response)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>当然我们还可以进行使用<code>$.getJSON()</code>。使用方式同上。</p>
<h3 id="jqXHR对象">jqXHR对象</h3><p>在之前，我们使用了局部方法：.success()、.complete()和.error()。这三个局部方法并不是 XMLHttpRequest 对象调用的，而是$.ajax()之类的全局方法返回的对象调用的。这个对象，就是 jqXHR 对象，它是原生对象 XHR 的一个超集。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取 jqXHR 对象，查看属性和方法</span></span><br><span class="line"><span class="keyword">var</span> jqXHR = $.ajax(&#123;</span><br><span class="line">    type : <span class="string">'POST'</span>,</span><br><span class="line">    url : <span class="string">'test.php'</span>,</span><br><span class="line">    data : $(<span class="string">'form'</span>).serialize()</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> jqXHR) &#123;</span><br><span class="line">    <span class="built_in">document</span>.write(i + <span class="string">'&lt;br /&gt;'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：如果使用 jqXHR 对象的话，那么建议用.done()、.always()和.fail()代<br>替.success()、.complete()和.error()。以为在未来版本中，很可能将这三种方法废弃取消。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//成功后回调函数</span></span><br><span class="line">jqXHR.done(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#box'</span>).html(response);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>使用 jqXHR 的连缀方式比$.ajax()的属性方式有三大好处：</p>
<ol>
<li>可连缀操作，可读性大大提高；</li>
<li>可以多次执行同一个回调函数；</li>
<li>为多个操作指定回调函数；</li>
</ol>
<p>PS：很多都只做了一下测试，并不能熟练应用，先过一遍吧，以后再来熟练掌握。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>关于Ajax的概述就不说了，有兴趣自己去找一下吧，并且建议去我博客看关于原生js实现Ajax函数的实现，希望有所帮助。服务器的配置，那篇文章也给出了地址。<br><a href="http://guowenfh.github.io/2015/12/]]>
    </summary>
    
      <category term="Ajax" scheme="http://guowenfh.github.io/tags/Ajax/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（四）动画效果]]></title>
    <link href="http://guowenfh.github.io/2016/01/01/jQuery-04-animation/"/>
    <id>http://guowenfh.github.io/2016/01/01/jQuery-04-animation/</id>
    <published>2016-01-01T08:29:11.000Z</published>
    <updated>2016-01-01T08:33:01.846Z</updated>
    <content type="html"><![CDATA[<h2 id="jQuery自带动画效果">jQuery自带动画效果</h2><h3 id="一-_显示、隐藏">一. 显示、隐藏</h3><p>jQuery中<code>.show()</code>为显示方法，<code>.hide()</code>为隐藏方法。<br>在无参数的时候，只是硬性的显示内容和隐藏内容。就不用代码来演示了，<code>.hide()</code>方法其实就是把对象的css设为<code>display：none</code>；而<code>.show()</code>方法会保留原来的display值，并进行设置。但是在一些场景中会有所改变，在后面进行说明）。<br>这两个方法都可以带参数。</p>
<p>先来说明第一个参数：</p>
<ol>
<li>第一种用法是传入数字，为毫秒数，表示动画过渡效果的时间。里面同时富含了匀速变大变小，以及透明度变换。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"show"</span>&gt;</span>显示<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"hide"</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"box"</span>&gt;</span>块<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">".show"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#box"</span>).show(<span class="number">1000</span>);<span class="comment">//显示用了一秒</span></span><br><span class="line">    &#125;);<span class="comment">//可以看到很明显的动画过渡效果。</span></span><br><span class="line">    $(<span class="string">".hide"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#box"</span>).hide(<span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>第二种用法是传入一个字符串。”slow”、”normal”和”fast”，分别对应600毫秒、400毫秒和200毫秒。在传入空字符串或其他字符串参数时，默认为400毫秒。</li>
<li>传入一个对象，后面的参数就不能填了，都在对象中。这个比较强大，整合了<code>show()</code>方法的多种参数实现效果外，还有一些其他的方法，比如可以动画执行中的状态，来执行函数。比较复杂，而且日常使用的话，现在这个就已经够了，在这里并不做讲述，有兴趣的可以自己参考手册。</li>
</ol>
<p><strong>特别注意</strong>：在传入了速度之后，内联元素inline，隐藏显示过后会变成内联块，inline-block。假设你给一个内联元素的css中设置了宽高，本来不生效，但是在执行隐藏显示后宽高生效</p>
<p>第二个参数：为可选参数，easing运动方式，这个参数，大部分参数值需要通过插件来使用，以后再来讲解。自带的参数有两个：”swing”(缓动)、”linear”(匀速)，不填时，默认为”swing”。（注意这里传入一个错误参数，会报错）</p>
<p>第三个参数：可选，回调函数，第一个动画执行完毕后执行，实现链式动画。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"show"</span>&gt;</span>显示<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"hide"</span>&gt;</span>隐藏<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"test"</span>&gt;</span>一<span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"test"</span>&gt;</span>二<span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"test"</span>&gt;</span>三<span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"test"</span>&gt;</span>四<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'.show'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//链式动画，递归自调用</span></span><br><span class="line">     $(<span class="string">'.test'</span>).first().show(<span class="string">'fast'</span>, <span class="function"><span class="keyword">function</span> <span class="title">testShow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         $(<span class="keyword">this</span>).next(<span class="string">".test"</span>).show(<span class="string">'fast'</span>, testShow);</span><br><span class="line">       &#125;);<span class="comment">//注意next中的限制条件，不然会干扰其他的元素，执行该函数。</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">'.hide'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">     $(<span class="string">'.test'</span>).last().hide(<span class="string">'fast'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         $(<span class="keyword">this</span>).prev(<span class="string">".test"</span>).hide(<span class="string">'fast'</span>, <span class="built_in">arguments</span>.callee);</span><br><span class="line">       &#125;);<span class="comment">//这里只是展现有arguments.callee这种方式，并不推荐使用，建议使用函数递归自调用</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们在使用<code>.show()</code>和<code>.hide()</code>的时候，如果需要一个按钮切换操作，需要进行一些条件判<br>断。而 jQuery 提供给我们一个类似功能的独立方法：<code>.toggle()</code>。使用方法一样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".toggle"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"div"</span>).toggle(<span class="string">"fast"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="二-_滑动、卷动">二. 滑动、卷动</h3><p>jQuery 提供了一组改变元素高度的方法：<code>.slideUp()</code>、<code>.slideDown()</code>和<code>.slideToggle()</code>。顾名思义，向上收缩(卷动)和向下展开(滑动)。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.toggle'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'div'</span>).slideToggle();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>注意：滑动、卷动效果和显示、隐藏效果一样，具有相同的参数。不展开讲</p>
<h3 id="三-_淡入、淡出">三. 淡入、淡出</h3><p>jQuery 提供了一组专门用于透明度变化的方法：<code>.fadeIn()</code>和<code>.fadeOut()</code>，分别表示淡入、<br>淡出，当然还有一个自动切换的方法：<code>.fadeToggle()</code>。</p>
<p>但是上面三个透明度方法只能是从 0 到 100，或者从 100 到 0，如果我们想设置指定值就没<br>有办法了。而 jQuery 为了解决这个问题提供了<code>.fadeTo()</code>方法，使透明度到达指定值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".toggle"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#box"</span>).fadeToggle(<span class="string">'slow'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">".to"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#box"</span>).fadeTo(<span class="string">'slow'</span>, <span class="number">0.3</span>);<span class="comment">//表示30，jQuery中使用的是百分比的形式来设置</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意：最先点击<code>to</code>透明度变成0.3，再点击<code>toggle</code>，第一次点击隐藏，第二次点击显示透明度为0.3！（回到原有设置）</p>
<p>淡入、淡出和上面的显示、隐藏效果一样，具有相同参数</p>
<h2 id="自定义动画">自定义动画</h2><blockquote>
<p>jQuery提供了上面几种简单常用的固定动画方面我们使用。但有些时候，这些简单动画无法满足我们更加复杂的需求。这个时候，jQuery 提供了一个<code>.animate()</code>方法来创建我们的自定义动画，满足更多复杂多变的要求。<br>强烈建议先看我的<a href="http://guowenfh.github.io/2015/12/21/JS-Animated-Frames/">《JavaScript完美运动框架的进阶之旅》</a>，使用JS基本实现了自定义动画，只不过jQuery的更加全面完善，当然也更加复杂。</p>
</blockquote>
<p>必传参数只有一个，对象，实现动画：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#box"</span>).animate(&#123;</span><br><span class="line">        width: <span class="string">"200px"</span>,</span><br><span class="line">        height: <span class="string">"500px"</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>这段代码已经实现了多重动画同步运动的效果，使用键值对的方式，来表明运动动画终点的位置。在实现上下左右移动时，需要结合CSS，把物体属性设置绝对定位！</p>
<p>第二个参数，可选，使用字符串时如同上面一样的3个值表示不同的时间（默认400ms），数字类型时，使用毫秒方式。直接跟在第一个参数之后就好<br>第三个参数，可选，也和上面一样，easing运动方式，自带的参数有两个：”swing”(缓动)、”linear”(匀速)，不填时，默认为”swing”。（注意这里传入一个错误参数，会报错）<br>第四个参数，可选，回调函数，在动画执行完毕后执行，可实现链式动画。</p>
<p>下面进行一些特殊的说明：</p>
<p>自定义动画中，每次开始运动都必须是初始位置或初始状态，而有时我们想通过当前位置或状态下再进行动画。jQuery 提供了自定义动画的累加、累减功能。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#box"</span>).animate(&#123;<span class="comment">//必须先设置CSS的绝对定位。</span></span><br><span class="line">        left:<span class="string">"+=100px"</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>主要是说一下自定义动画中的链式动画，有两种形式：</p>
<ol>
<li>在回调函数中再执行一个动画，这个没什么好说的。</li>
<li>通过连缀或顺序来实现链式动画。</li>
</ol>
<p>通过依次顺序实现链式动画</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#box'</span>).animate(&#123;<span class="string">'left'</span> : <span class="string">'100px'</span>&#125;);</span><br><span class="line">    $(<span class="string">'#box'</span>).animate(&#123;<span class="string">'top'</span> : <span class="string">'100px'</span>&#125;);</span><br><span class="line">    $(<span class="string">'#box'</span>).animate(&#123;<span class="string">'width'</span> : <span class="string">'300px'</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>注意：如果不是同一个元素，就会实现同步动画</strong></p>
<p>通过连缀实现链式动画</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#box'</span>).animate(&#123;<span class="string">'left'</span> : <span class="string">'100px'</span>&#125;)</span><br><span class="line">    .animate(&#123;<span class="string">'top'</span> : <span class="string">'100px'</span>&#125;)</span><br><span class="line">    .animate(&#123;<span class="string">'width'</span> : <span class="string">'300px'</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="链式动画进阶">链式动画进阶</h2><p>之前我们已经可以实现链式动画了，如果是同一个元素，可以依次顺序或连缀调用。如果是不同元素，可以使用回调函数。但有时链式动画太多，回调函数的可读性大大降低。为此，jQuery 提供了一组专门用于链式动画的方法。</p>
<p><code>$(&#39;#box&#39;).slideUp(&#39;slow&#39;).slideDown(&#39;slow&#39;).css(&#39;background&#39;, &#39;orange&#39;);</code>这段代码中，css方法会在一开始就执行。因为动画方法可以用连缀来实现依次排列，但是css方法不是，会在一开始传入队列之前。如何解决呢？回调函数当然可以实现。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#box'</span>).slideUp(<span class="string">'slow'</span>).slideDown(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'orange'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>这当然没问题，但是那并不是我们应该做的，因为这样可读性太差了，链式动画一多呢？原本的动画都不清晰了吧？jQuery为我们实现了一个类似回调函数的方法：<code>.queue()</code>。jQuery 的<code>.queue()</code>的回调函数可以传递一个参数，这个参数是 next 函数，在结尾处调用这个 next()方法即可再连缀执行列队动画。（不这样使用的话，后续动画效果无法实现）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//在同一个元素直接这样写就可以了。</span></span><br><span class="line">    $(<span class="string">'#box'</span>).slideUp(<span class="string">'slow'</span>)</span><br><span class="line">                .slideDown(<span class="string">'slow'</span>)</span><br><span class="line">                .queue(<span class="function"><span class="keyword">function</span> (<span class="params">next</span>) </span>&#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'orange'</span>);</span><br><span class="line">                    <span class="comment">//next();//animate的动画效果不会生效，因为把next()注释掉了。</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .animate(&#123;<span class="comment">//记得设置绝对定位</span></span><br><span class="line">                    height: <span class="string">"200px"</span>,</span><br><span class="line">                    left: <span class="string">"100px"</span></span><br><span class="line">                &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>.queue()</code>方法还有一个功能，就是可以得到当前链式动画剩余的长度（包括当前的动画）。fx 是默认链条的参数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把上面的代码的第一个动画改装成如下模样时，会弹出4。</span></span><br><span class="line">$(<span class="string">'#box'</span>).slideUp(<span class="string">'slow'</span>,<span class="function"><span class="keyword">function</span>  (<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert($(<span class="keyword">this</span>).queue(<span class="string">'fx'</span>).length);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>jQuery 还提供了一个清理链式动画的功能方法：<code>.clearQueue()</code>。把它放入一个链式的回调函数或<code>.queue()</code>方法里，就可以把剩下未执行的链条给截断。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//清理后续链式调用</span></span><br><span class="line">$(<span class="string">'#box'</span>).slideDown(<span class="string">'slow'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;$(<span class="keyword">this</span>).clearQueue()&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="动画相关方法与全局属性">动画相关方法与全局属性</h2><p><strong>停止动画</strong><br>有很多时候，我们需要停止正在运行中的动画，jQuery中为此提供了一个<code>.stop()</code>方法。<br>它有三个<strong>可选参数</strong>：</p>
<ol>
<li>queue        类型: String   停止链式动画的名称。（比较少用到，若存在，后两个参数都是指向该链式动画）</li>
<li>clearQueue类型: Boolean一个布尔值，指示是否取消后续的链式动画。默认 false.</li>
<li>jumpToEnd 类型: Boolean一个布尔值指示是否当前动画立即完成。默认false.</li>
</ol>
<p>说明：</p>
<ol>
<li>在无参数，且为链式动画时，调用<code>.stop()</code>方法，只是立即停止当前正在进行的动画，后续动画继续执行。</li>
<li>传入一个true时，立即停止动画，并且清空后续所有动画。</li>
<li>传入2个true时，立即停止，并且跳转到当前动画的结束位置，后续动画也不再执行。</li>
</ol>
<p>代码如下：有兴趣的自行测试<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"start"</span>&gt;</span>动画<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"stop"</span>&gt;</span>停止<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"position: absolute;height: 50px;width: 50px;background-color: #0B71E6;top:30px"</span>&gt;</span>12<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'.start'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'div'</span>).animate(&#123;<span class="string">'left'</span> : <span class="string">'300px'</span>&#125;, <span class="number">1000</span>)</span><br><span class="line">                 .animate(&#123;<span class="string">'top'</span> : <span class="string">'300px'</span>&#125;, <span class="number">1000</span>)</span><br><span class="line">                 .animate(&#123; <span class="string">'width'</span> : <span class="string">'300px'</span>&#125;, <span class="number">1000</span>)</span><br><span class="line">                 .animate(&#123;<span class="string">'height'</span> : <span class="string">'300px'</span>&#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">".stop"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"div"</span>).stop(<span class="literal">true</span>,<span class="literal">true</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>延迟动画</strong><br>有时在执行动画或链式动画时，需要在运动之前有延迟执行，jQuery 为此提供了<code>.delay()</code>方法。参数为延迟时间，单位为毫秒数。这个方法可以在动画之前设置延迟，也可 、以在列队动画中间加上。直接在上面代码任意地方加都可以，比较简单，自行测试吧。</p>
<p><strong>获取正在进行的动画</strong><br>在选择器的那篇文章中中，我们提到过一个过滤器<code>:animated</code>，这个过滤器可以判断出当前运动的动画是哪个元素。通过这个特点，我们可以避免由于用户快速在某个元素执行动画时，由于动画积累而导致的动画和用户的行为不一致。</p>
<p>对上面代码进行一些改造,将原div进行复制，添加到其后，给原div添加一个id并且在动画效果中改为该元素运动<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.stop'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'div:animated'</span>).stop().css(<span class="string">'background'</span>, <span class="string">'red'</span>);</span><br><span class="line">        <span class="comment">//可以看到只有运动的div背景变色，而未移动的div不改变背景色。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>动画全局属性</strong><br>jQuery 提供了两种全局设置的属性，分别为：<code>$.fx.interval</code>，设置每秒运行的帧数；<code>$.fx.off</code>，关闭页面上所有的动画。</p>
<p><code>$.fx.interval</code> 属性可以调整动画每秒的运行帧数，默认为 13 毫秒。数字越小越流畅，但可能影响浏览器性能。<br>设置运行帧数为 1000 毫秒：<code>$.fx.interval = 1000;</code></p>
<p>设置动画为关闭 true：<code>$.fx.off = true;</code>默认为false</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="jQuery自带动画效果">jQuery自带动画效果</h2><h3 id="一-_显示、隐藏">一. 显示、隐藏</h3><p>jQuery中<code>.show()</code>为显示方法，<code>.hide()</code>为隐藏方法。<br>在无参数]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（三）事件详解]]></title>
    <link href="http://guowenfh.github.io/2015/12/31/jQuery-03-DetailedEvent/"/>
    <id>http://guowenfh.github.io/2015/12/31/jQuery-03-DetailedEvent/</id>
    <published>2015-12-31T03:42:43.000Z</published>
    <updated>2015-12-31T04:31:54.837Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>在JavaScript 有一个非常重要的功能，就是事件驱动。如果你的网页需要与用户进行交互的话，就不可能不用到事件。它在页面完全加载后，用户通过鼠标或键盘触发页面中绑定事件的元素即可触发。jQuery为开发者更有效率的编写事件行为，封装了大量事件方法供我们使用。</p>
</blockquote>
<h2 id="基础事件">基础事件</h2><h3 id="一-_绑定事件">一. 绑定事件</h3><p>如果你学习过原生的javascript事件，比如常用的事件：click、dblclick、mousedown、mouseup、mousemove、mouseover、mouseout等等。如果恰好你使用的是事件绑定的方式进行触发的话，一定会知道它有多么难处理，各种浏览器的兼容性，this的指向等等，但是在jQuery中，一切都不再是问题了。</p>
<p>jQuery 通过.bind()方法来为元素绑定这些事件。可以传递三个参数：<code>.bind(eventType [,eventData ],handler(event))</code></p>
<ol>
<li><code>eventType</code>：表示一个或多个DOM事件类型，比如<code>click mouseover</code>。</li>
<li><code>eventData</code>：可选参数，表示一个对象，它包含的数据键值对映射将被传递给事件处理程序。</li>
<li><code>handler(event)</code>：表示绑定到指定元素的处理函数。event表示事件对象。</li>
</ol>
<p><strong>下面就是绑定的几种方式：</strong></p>
<ol>
<li><p>点击按钮后执行匿名函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'点击！'</span>);<span class="comment">//使用点击事件</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行普通函数式无须圆括号</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).bind(<span class="string">'click'</span>, fn); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;<span class="comment">//普通处理函数</span></span><br><span class="line">    alert(<span class="string">'点击！'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以同时绑定多个事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).bind(<span class="string">'mouseout mouseover'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    $(<span class="string">'div'</span>).html(<span class="function"><span class="keyword">function</span>(<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="string">'1'</span>;<span class="comment">//移入和移出分别执行一次</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>另一种方式：传递一个对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).bind(&#123; </span><br><span class="line">    <span class="string">'mouseout'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//事件名的引号可以省略</span></span><br><span class="line">        alert(<span class="string">'移出'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'mouseover'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'移入'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>删除绑定函数：</strong></p>
<p>删除绑定函数<code>.unbind( eventType [, handler ] )</code>有三种不同的用法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).unbind(); <span class="comment">//删除当前元素的所有事件,包括匿名执行的，在js中匿名执行的事件函数无法删除。</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'button'</span>).unbind(<span class="string">'click'</span>); <span class="comment">//删除当前元素的click事件，使unbind参数删除指定类型事件</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'button'</span>).unbind(<span class="string">'click'</span>, fn1); <span class="comment">//只删除click事件的fn1处理函数。</span></span><br></pre></td></tr></table></figure></p>
<h3 id="二-_简写事件">二. 简写事件</h3><p>当然jQuery为开发者不简简单单提供了事件绑定的方法就不管其它了，为了使开发者更加方便的绑定事件，jQuery 封装了常用的事件以便节约更多的代码。我们称它为简写事件。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>触发条件</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>click(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 click(单击)事件</td>
</tr>
<tr>
<td><code>dblclick(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 dblclick(双击)事件</td>
</tr>
<tr>
<td><code>mousedown(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mousedown(点击后)事件</td>
</tr>
<tr>
<td><code>mouseup(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mouseup(点击弹起)事件</td>
</tr>
<tr>
<td><code>mouseover(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mouseover(鼠标移入)事件</td>
</tr>
<tr>
<td><code>mouseout(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mouseout(鼠标移出)事件</td>
</tr>
<tr>
<td><code>mousemove(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的mousemove(鼠标移动)事件</td>
</tr>
<tr>
<td><code>mouseenter(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mouseenter(鼠标穿过)事件</td>
</tr>
<tr>
<td><code>mouseleave(fn)</code></td>
<td>鼠标</td>
<td>触发每一个匹配元素的 mouseleave(鼠标穿出)事件</td>
</tr>
<tr>
<td><code>keydown(fn)</code></td>
<td>键盘</td>
<td>触发每一个匹配元素的 keydown(键盘按下)事件</td>
</tr>
<tr>
<td><code>keyup(fn)</code></td>
<td>键盘</td>
<td>触发每一个匹配元素的 keyup(键盘按下弹起)事件</td>
</tr>
<tr>
<td><code>keypress(fn)</code></td>
<td>键盘</td>
<td>触发每一个匹配元素的 keypress(键盘按下)事件</td>
</tr>
<tr>
<td><code>unload(fn)</code></td>
<td>文档</td>
<td>当卸载本页面时绑定一个要执行的函数</td>
</tr>
<tr>
<td><code>resize(fn)</code></td>
<td>文档</td>
<td>触发每一个匹配元素的 resize(文档改变大小)事件</td>
</tr>
<tr>
<td><code>scroll(fn)</code></td>
<td>文档</td>
<td>触发每一个匹配元素的 scroll(滚动条拖动)事件</td>
</tr>
<tr>
<td><code>focus(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 focus(焦点激活)事件</td>
</tr>
<tr>
<td><code>blur(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 blur(焦点丢失)事件</td>
</tr>
<tr>
<td><code>focusin(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 focusin(焦点激活)事件</td>
</tr>
<tr>
<td><code>focusout(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 focusout(焦点丢失)事件</td>
</tr>
<tr>
<td><code>select(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 select(文本选定)事件</td>
</tr>
<tr>
<td><code>change(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 change(值改变)事件</td>
</tr>
<tr>
<td><code>submit(fn)</code></td>
<td>表单</td>
<td>触发每一个匹配元素的 submit(表单提交)事件</td>
</tr>
</tbody>
</table>
<p>大部分事件都如同上面表格中的描述一般比较简单，也比较好理解。</p>
<p><strong>下面着重讲几个需要注意的地方：</strong></p>
<ol>
<li><p><code>unload(fn)</code>、<code>resize(fn)</code>、<code>scroll(fn)</code>，使用<code>$(window)</code>对象触发。</p>
</li>
<li><p><code>change(fn)</code>：触发的条件是，输入框的值有改变，且失去焦点。</p>
</li>
<li><p><code>submit(fn)</code>：必须在form中，并且使用<code>$(&quot;form&quot;)</code>作为事件触发元素，不然无效。</p>
</li>
<li><p><code>.mouseover()</code>和<code>.mouseout()</code>表示鼠标移入和移出的时候触发。那么 jQuery 还封装了另外一组：<code>.mouseenter()</code>和<code>.mouseleave()</code>表示鼠标穿过和穿出的时候触发。那么这两组本质上有什么区别呢？<br>手册上的说明是：<code>.mouseenter()</code>和<code>.mouseleave()</code>这组穿过子元素不会触发，而<code>.mouseover()</code>和<code>.mouseout()</code>则会触发。<br>经过实验，代码如下：</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"width:100px;height:100px;background:blue;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"width:100px;height:50px;background:red;"</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">strong</span>&gt;</span><span class="tag">&lt;/<span class="title">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'div'</span>).mouseover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//移入 div 会触发，移入 p 再触发</span></span><br><span class="line">        $(<span class="string">'strong'</span>).html(<span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> value+<span class="string">'1'</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看到，鼠标在div内移动时，会不停触发事件函数，输出值。而<code>mouseenter</code>则不会有这个问题。</p>
<ol>
<li><code>.keydown()</code>、<code>.keyup()</code>返回的是键码，而<code>.keypress()</code>返回的是字符编码。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).keydown(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.keyCode); <span class="comment">//按下 a 返回 229</span></span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'input'</span>).keypress(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.charCode); <span class="comment">//按下 a 返回 97</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li><code>.focus()</code>和<code>.blur()</code>分别表示光标激活和丢失，事件触发时机是当前元素。而<code>.focusin()</code><br>和<code>.focusout()</code>也表示光标激活和丢失，但是当子元素聚焦或丢失时也触发事件。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">style="width:100px;height:50px;background:blue;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'div'</span>).focusin(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"激活"</span>); <span class="comment">//绑定的是 div 元素，子类input触发</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">'div'</span>).focusout(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"丢失"</span>); </span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="三-_复合事件">三. 复合事件</h3><p>jQuery 提供了许多最常用的事件效果，组合一些功能实现了一些复合事件，比如切换功<br>能、智能加载等。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ready(fn)</code></td>
<td>当 DOM 加载完毕触发事件,已经在笔记1中介绍过</td>
</tr>
<tr>
<td><code>hover([fn1,]fn2)</code></td>
<td>当鼠标移入触发第一个 fn1，移出触发 fn2</td>
</tr>
<tr>
<td><code>toggle(fn1,fn2[,fn3..])</code></td>
<td>已废弃，当鼠标点击触发 fn1,再点击触发 fn2…</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//背景移入移出切换效果</span></span><br><span class="line">    $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'black'</span>); <span class="comment">//mouseenter 效果</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'red'</span>); <span class="comment">//mouseleave 效果，可省略</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>注意：<code>.hover()</code>方法是结合了<code>.mouseenter()</code>方法和<code>.mouseleva()</code>方法，并非<code>.mouseover()</code><br>和<code>.mouseout()</code>方法。</p>
<p><code>.toggle()</code>有两层含义，一层就如表格中所说（1.9版移除），一层在动画中会用到，在这里不进行讲述，若想实现表格中的效果也特别简单，可以进行如下判断：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="number">1</span>; <span class="comment">//计数器,标记</span></span><br><span class="line">$(<span class="string">'div'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123; <span class="comment">//第一次点击</span></span><br><span class="line">        $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'black'</span>);</span><br><span class="line">        flag = <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag == <span class="number">2</span>) &#123; <span class="comment">//第二次点击</span></span><br><span class="line">        $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'blue'</span>);</span><br><span class="line">        flag = <span class="number">3</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag == <span class="number">3</span>) &#123; <span class="comment">//第三次点击</span></span><br><span class="line">        $(<span class="keyword">this</span>).css(<span class="string">'background'</span>, <span class="string">'red'</span>);</span><br><span class="line">        flag = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="event对象">event对象</h2><blockquote>
<p>JavaScript 在事件处理函数中默认传递了 event 对象，也就是事件对象。但由于浏览器<br>的兼容性，开发者总是会做兼容方面的处理。jQuery 在封装的时候，解决了这些问题，并且<br>还创建了一些非常好用的属性和方法。</p>
</blockquote>
<h3 id="一-_事件对象">一. 事件对象</h3><p>处理函数的e就是event事件对象（JS中需做兼容处理），event 对象有很多可用的属性和方法，这里先演示一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过处理函数传递事件对象</span></span><br><span class="line">$(<span class="string">'input'</span>).bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123; <span class="comment">//接受事件对象参数</span></span><br><span class="line">    alert(e.type);<span class="comment">//打印出click</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>下面是一些常用的属性：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>获取这个事件的事件类型的字符串，例如：click</td>
</tr>
<tr>
<td><code>target</code></td>
<td>获取绑定事件的 DOM 元素</td>
</tr>
<tr>
<td><code>dat</code></td>
<td>获取事件调用时的额外数据</td>
</tr>
<tr>
<td><code>relatedTarget</code></td>
<td>获取移入移出目标点离开或进入（最相邻）的那个 DOM 元素</td>
</tr>
<tr>
<td><code>currentTarget</code></td>
<td>获取冒泡前触发的 DOM 元素，等同与 this</td>
</tr>
<tr>
<td><code>pageX/pageY</code></td>
<td>获取相对于页面原点（最左上角）的水平/垂直坐标</td>
</tr>
<tr>
<td><code>screenX/screenY</code></td>
<td>获取显示器屏幕位置的水平/垂直坐标(非 jQuery 封装)</td>
</tr>
<tr>
<td><code>clientX/clientY</code></td>
<td>获取相对于页面视口的水平/垂直坐标(非 jQuery 封装)</td>
</tr>
<tr>
<td><code>result</code></td>
<td>获取上一个相同事件的返回值</td>
</tr>
<tr>
<td><code>timeStamp</code></td>
<td>获取事件触发的时间戳</td>
</tr>
<tr>
<td><code>whic</code></td>
<td>获取鼠标的左中右键(1,2,3)，或获取键盘按键</td>
</tr>
<tr>
<td><code>altKey/shiftKey/ctrlKey</code></td>
<td>获取是否按下了 alt、shift、ctrl(非jQuery 封装)</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong></p>
<p><code>target</code>：是获取触发元素的DOM，就是你点了哪个就是哪个。<br><code>currentTarget</code>：是获取监听元素的DOM，你把事件绑定在谁身上就是谁。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"width:100px;height:100px;background:#999"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"width:50px;height:50px;background:#333"</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'div'</span>).bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123; </span><br><span class="line">    alert(e.target);<span class="comment">//点击p时返回p</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">'div'</span>).bind(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123; </span><br><span class="line">        alert(e.currentTarget);<span class="comment">//无论何时都返回div，等同this</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过 event.data 获取额外数据，可以是数字、字符串、数组、对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).bind(<span class="string">'click'</span>, <span class="number">123</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//传递 data 数据</span></span><br><span class="line">    alert(e.data); <span class="comment">//获取数字数据123</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>获取鼠标的左中右键<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).mousedown(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.which);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>获取键盘的按键<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).keyup(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.which);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>//获取触发元素鼠标当前的位置<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.screenY+ <span class="string">','</span> + e.pageY + <span class="string">','</span> + e.clientY);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="二-_冒泡和默认行为">二. 冒泡和默认行为</h3><p>如果看我的百度前端技术学院task0002的笔记的话，应该都知道事件冒泡是怎么样的，事件代理就是根据它来实现的。这里我稍微说一下事件冒泡是什么样的，事件冒泡其实就是在点击一个元素时，会一层一层的向父元素递进当点击一个div时其实是这样的<code>div -&gt; body -&gt; html -&gt; document</code>。</p>
<p>下面来看一下冒泡和默认行为的一些方法：</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>preventDefault()</code></td>
<td>阻止某个元素的默认行为</td>
</tr>
<tr>
<td><code>isDefaultPrevented()</code></td>
<td>判断是否调用了 preventDefault()方法</td>
</tr>
<tr>
<td><code>stopPropagation()</code></td>
<td>阻止事件冒泡</td>
</tr>
<tr>
<td><code>isPropagationStopped()</code></td>
<td>判断是否调用了 stopPropagation()方法</td>
</tr>
<tr>
<td><code>stopImmediatePropagation()</code></td>
<td>阻止事件冒泡，并取消该事件的后续事件处理函数</td>
</tr>
<tr>
<td><code>isImmediatePropagationStopped()</code></td>
<td>判断是否调用了 stopImmediatePropagation()方法</td>
</tr>
</tbody>
</table>
<p>这些方法都是event对象的一些方法，需要注意的是：<br>先来看到最后两个，名字都长到让人记不住的方法，，如代码中所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"div"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.stopImmediatePropagation() ;</span><br><span class="line">    alert(<span class="string">"div1"</span>);<span class="comment">//只弹出div1</span></span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"div"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"div2"</span>);<span class="comment">//因第一个点击事件取消了该事件的后续处理函数，这里将不被执行</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>同时取消默认行为以及事件冒泡：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://guowenfh.github.io"</span>&gt;</span>三省吾身丶丶<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> &gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">"a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// e.preventDefault();//阻止默认行为</span></span><br><span class="line">        <span class="comment">// e.stopPropagation();//阻止事件冒泡</span></span><br><span class="line">        alert(<span class="string">"a"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"document"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>注意这段代码中，我们可以看到a被弹出来了，但是链接并没有跳转，而且document也没有被弹出，因为<code>return false</code>相当于同时了这两件事情，只不过，在使用表格中的检测方法时，返回的false。<br>而使用event对象的方法实现阻止时，检测返回true。</p>
<h2 id="高级事件">高级事件</h2><blockquote>
<p>jQuery 不但封装了大量常用的事件处理，还提供了不少高级事件方便开发者使用。比<br>如模拟用户触发事件、事件委托事件、和统一整合的 on 和 off，以及仅执行一次的 one 方<br>法。这些方法大大降低了开发者难度，提升了开发者的开发体验。</p>
</blockquote>
<h3 id="一-_模拟操作">一. 模拟操作</h3><p>在事件触发的时候，有时我们需要一些模拟用户行为的操作。例如：当网页加载完毕后自行点击一个按钮触发一个事件，而不是用户去点击。</p>
<h4 id="1-_-trigger()">1. <code>.trigger()</code></h4><p>先来一个最机械的<code>.trigger()</code>：<br><code>&lt;button&gt;点击&lt;/button&gt;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"这里是第一次点击来自模拟！"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"button"</span>).trigger(<span class="string">'click'</span>);</span><br></pre></td></tr></table></figure>
<p>打开网页，可以看到内容并不需要被点击，就直接被弹了出来。<br>当然不会那么复杂，来进阶一下吧，只需要把<code>.trigger(&#39;click&#39;)</code>连在<code>click</code>事件之后就可以了，效果当然一样。<br>但是，这样好像还是有点麻烦，jQuery怎么可能让我们那么麻烦，把添加的字符串删除，添加<code>.click()</code>，现在就是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'我的第一次点击来自模拟！'</span>);<span class="comment">//效果和上面一样</span></span><br><span class="line">&#125;).click();</span><br></pre></td></tr></table></figure>
<p>这种简单的方法jQuery几乎所有的常用事件都提供了：</p>
<table>
<thead>
<tr>
<th>blur</th>
<th>focusin</th>
<th>mousedown</th>
<th>resize</th>
</tr>
</thead>
<tbody>
<tr>
<td>change</td>
<td>focusout</td>
<td>mousenter</td>
<td>scroll</td>
</tr>
<tr>
<td>click</td>
<td>keydown</td>
<td>mouseleave</td>
<td>select</td>
</tr>
<tr>
<td>dblclick</td>
<td>keypress</td>
<td>mousemove</td>
<td>submit</td>
</tr>
<tr>
<td>error</td>
<td>keyup</td>
<td>mouseout</td>
<td>unload</td>
</tr>
<tr>
<td>focus</td>
<td>load</td>
<td>mouseover</td>
</tr>
</tbody>
</table>
<p>下面来介绍一下<code>.trigger()</code>的一些进阶用法，当然如果要进行这样的参数传递的话，就不能使用上面的简单方法了：<br>有时在模拟用户行为的时候，我们需要给事件执行传递参数，这个参数类似与在事件绑定中的<code>event.data</code>的额外数据，可以是数字、字符串、数组、对象。需要注意的是当传递一个值的时候，直接传递即可。当两个值以上，需要在前后用中括号包含起来。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e, data1, data2</span>) </span>&#123;</span><br><span class="line">    alert(data1.a + <span class="string">","</span> + data2[<span class="number">1</span>]);<span class="comment">//加载后直接弹出1,456</span></span><br><span class="line">&#125;).trigger(<span class="string">"click"</span>, [&#123;<span class="string">"a"</span> : <span class="string">"1"</span>, <span class="string">"b"</span> : <span class="string">"2"</span>&#125;, [<span class="string">"123"</span>,<span class="string">"456"</span>]]);</span><br></pre></td></tr></table></figure>
<p>在使用<code>bind</code>时，<code>bind</code>传入的额外数据通过<code>event.data</code>获取，该数据传输模式不变。</p>
<p>模拟用户行为时，除了通过 JavaScript 事件名触发，也可以通过自定义的事件触发，所谓自定义事件其实就是一个被.bind()绑定的任意函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).bind(<span class="string">'myEvent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">alert(<span class="string">'自定义事件！'</span>);</span><br><span class="line">&#125;).trigger(<span class="string">'myEvent'</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="2-_-triggerHandler()">2. <code>.triggerHandler()</code></h4><p>这是另一个模拟用户行为的方法，用法和<code>trigger()</code>方法一样。但是在某些情况下有如下区别：</p>
<ol>
<li><p><code>.triggerHandler()</code>方法并不会触发事件的默认行为，而<code>.trigger()</code>会，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'form'</span>).trigger(<span class="string">'submit'</span>); <span class="comment">//模拟用户执行提交，并跳转到执行页面</span></span><br><span class="line">$(<span class="string">'form'</span>).triggerHandler(<span class="string">'submit'</span>); <span class="comment">//模拟用户执行提交，并阻止的默认行为</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>.triggerHandler()</code>方法只会影响第一个匹配到的元素，而<code>.trigger()</code>会影响所有。</p>
</li>
<li><code>.triggerHandler()</code>方法会返回当前事件执行的返回值，如果没有返回值，则返回<br>undefined；而<code>.trigger()</code>则返回当前包含事件触发元素的 jQuery 对象(方便链式连缀调用)。</li>
<li><code>.trigger()</code>在创建事件的时候，会冒泡。但这种冒泡是自定义事件才能体现出来，是<br>jQuery 扩展于 DOM 的机制，并非 DOM 特性。而<code>.triggerHandler()</code>不会冒泡。</li>
</ol>
<h3 id="二-_命名空间">二. 命名空间</h3><blockquote>
<p>有时，我们想对事件进行移除。但对于同名同元素绑定的事件移除往往比较麻烦，这个<br>时候，可以使用事件的命名空间解决。（主要是处理绑定匿名函数的情况）</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).bind(<span class="string">'click.abc'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"abc"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"button"</span>).bind(<span class="string">'click.xyz'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"xyz"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"button"</span>).unbind(<span class="string">'click.abc'</span> );<span class="comment">//处理过后只弹出xyz。</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>也可以直接使用<code>(&#39;.abc&#39;)</code>，这样的话，可以移除<strong>相同命名空间的不同事件</strong>。对于模拟操作<code>.trigger()</code>和.<code>triggerHandler()</code>，用法也是一样的。<code>$(&#39;input&#39;).trigger(&#39;click.abc&#39;)</code></p>
<h3 id="三-事件委托">三.事件委托</h3><blockquote>
<p>事件委托也就是事件代理。我在<a href="http://guowenfh.github.io/2015/12/16/task0002-DOM&amp;&amp;event/">task0002（二）- DOM + 事件</a>已经谈过了。而且也自己实现了一下事件代理，这里稍微再介绍一下:</p>
</blockquote>
<ol>
<li>“事件代理” 的本质是利用了事件冒泡的特性。当一个元素上的事件被触发的时候，比如说鼠标点击了一个按钮，同样的事件将会在那个元素的所有祖先元素中被触发。这一过程被称为事件冒泡；</li>
<li>这个事件从原始元素开始一直冒泡到DOM树的最上层。任何一个事件的目标元素都是最开始的那个元素，在我们的这个例子中也就是按钮，并且它在我们的元素对象中以属性的形式出现。</li>
<li>使用事件代理，我们可以把事件处理器添加到一个元素上，等待一个事件从它的子级元素里冒泡上来，并且可以得知这个事件是从哪个元素开始的。</li>
<li>对于动态生成的节点同样有效。</li>
</ol>
<p>实现如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">button</span>&gt;</span>点击<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">"div"</span>).delegate(<span class="string">'button'</span>,<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"点击了"</span>);<span class="comment">//无论点击哪个都可以弹出</span></span><br><span class="line">        $(<span class="string">"&lt;button&gt;生成&lt;/button&gt;"</span>).appendTo(<span class="string">'div'</span>);<span class="comment">//点击同时生成节点，同样可以点击弹出</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//$("div").undelegate('button', 'click');//取消事件代理</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：<code>.delegate()</code>需要指定父元素，然后第一个参数是当前元素，第二个参数是事件方式，第三个参数是执行函数。和<code>.bind()</code>方法一样，可以传递额外参数。<code>.undelegate()</code>和<code>.unbind()</code>方法一样可以直接删除所有事件，比如：<code>.undelegate(&#39;click&#39;)</code>。也可以删除命名空间的事件，比如：<code>.undelegate(&#39;click.abc&#39;)</code>。</p>
<p>开胃菜完了，下面才是重点！</p>
<h2 id="强大的on_、off_和one">强大的<code>on</code> 、<code>off</code> 和<code>one</code></h2><blockquote>
<p>目前绑定事件和解绑的方法有三组共六个。由于这三组的共存可能会造成一定的混乱，为此 jQuery1.7 以后推出了.on()和.off()方法彻底摒弃前面三组。（暂时未移除）</p>
</blockquote>
<h3 id="一-_on">一. <code>on</code></h3><ol>
<li><p>替代<code>.bind()</code>方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'替代.bind()'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>替代<code>.bind()</code>方式，并使用额外数据和事件对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.button'</span>).on(<span class="string">'click'</span>, &#123;user : <span class="string">'Lee'</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'替代.bind()'</span> + e.data.user);<span class="comment">//lee</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>替代.bind()方式，并绑定多个事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.button'</span>).on(<span class="string">'mouseover mouseout'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'替代.bind()移入移出！'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'.button'</span>).on(&#123;<span class="comment">//以对象模式绑定多个事件</span></span><br><span class="line">    mouseover : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'替代.bind()移入！'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    mouseout : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'替代.bind()移出！'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>替代.bind()方式，阻止默认行为并取消冒泡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'form'</span>).on(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">'form'</span>).on(<span class="string">'submit'</span>, <span class="literal">false</span>);<span class="comment">//在function中只有阻止事件存在时，这样写可以简化代码，效果相同</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'form'</span>).on(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;<span class="comment">//当然使用事件对象也是可以的</span></span><br><span class="line">    e.preventDefault();<span class="comment">//阻止默认行为</span></span><br><span class="line">    e.stopPropagation();<span class="comment">//取消冒泡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>替代<code>.delegate()</code>，事件委托</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).on(<span class="string">'click'</span>, <span class="string">'button'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).clone().appendTo(<span class="string">'div'</span>);<span class="comment">//每次点击都复制一个button</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>特别注意：</strong><code>.on()</code>和<code>.delegate()</code>之间的选择器和事件名称的位置！因为便于多种事件处理方式，将<strong>选择器与事件名称调换了位置</strong></p>
<h3 id="二-off">二.<code>off</code></h3><ol>
<li><p>替代<code>.unbind()</code>方式，移除事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.button'</span>).off(<span class="string">'click'</span>);</span><br><span class="line">$(<span class="string">'.button'</span>).off(<span class="string">'click'</span>, fn);</span><br><span class="line">$(<span class="string">'.button'</span>).off(<span class="string">'click.abc'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>代替<code>.undelegate()</code>，取消事件委托<br><code>$(&#39;#box&#39;).off(&#39;click&#39;, &#39;.button&#39;);</code></p>
</li>
</ol>
<p><strong>注意：</strong>和之前方式一样，事件委托和取消事件委托也有各种搭配方式，比如额外数据、命名空间等等。</p>
<h3 id="三-_one">三. <code>one</code></h3><blockquote>
<p>不管是.bind()还是.on()，绑定事件后都不是自动移除事件的，需要通过.unbind()和.off()来手工移除。jQuery 提供了.one()方法，绑定元素执行完毕后自动移除事件，可以方法仅触发一次的事件。</p>
</blockquote>
<ol>
<li><p>类似于.bind()只触发一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'button'</span>).one(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'one 仅触发一次！'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>类似于.delegate()只触发一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).one(<span class="string">'click'</span>, <span class="string">'button'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).clone().appendTo(<span class="string">'div'</span>);<span class="comment">//只复制一次</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>所以前面的一系列讲述，都是为了抛砖引玉，现在在jQuery中对于事件的处理直接用<code>on</code> 、<code>off</code> 和<code>one</code>这三个就好了！</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>在JavaScript 有一个非常重要的功能，就是事件驱动。如果你的网页需要与用户进行交互的话，就不可能不用到事件。它在页面完全加载后，用户通过鼠标或键盘触发页面中绑定事件的元素即可触发。jQuery为开发者更有效率的编写事件行为，封装了大量事件方]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（二）文档对象模型]]></title>
    <link href="http://guowenfh.github.io/2015/12/31/jQuery-02-DocumentObjectModel/"/>
    <id>http://guowenfh.github.io/2015/12/31/jQuery-02-DocumentObjectModel/</id>
    <published>2015-12-31T03:39:11.000Z</published>
    <updated>2016-01-04T08:44:15.668Z</updated>
    <content type="html"><![CDATA[<h2 id="基础_DOM_和_和_CSS">基础 DOM 和 和 CSS</h2><h3 id="一-_设置元素及内容">一. 设置元素及内容</h3><p>我们通过前面所学习的各种选择器、过滤器来得到我们想要操作的元素。这个时候，我们就可以对这些元素进行 DOM 的操作。<br>那么，最常用的操作就是对元素内容的获取和修改。<code>html()</code>和 <code>text()</code>方法:</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
<th>区分</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>html()</code></td>
<td>获取元素中 HTML 内容</td>
<td>连同标签一起提取</td>
</tr>
<tr>
<td><code>html(value)</code></td>
<td>设置元素中 HTML 内容</td>
<td>清空原数据，设置html内容</td>
</tr>
<tr>
<td><code>text()</code></td>
<td>获取元素中文本内容</td>
<td>自动清理html标签</td>
</tr>
<tr>
<td><code>text(value)</code></td>
<td>设置元素中文本内容</td>
<td>自动转义html标签以文本形式呈现</td>
</tr>
<tr>
<td><code>val()</code></td>
<td>获取表单中的文本内容</td>
<td>value属性的值</td>
</tr>
<tr>
<td><code>val(value)</code></td>
<td>设置表单中的文本内容</td>
<td>设置value的值(有特殊用法)</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong>当我们使用<code>html()</code>或 <code>text()</code>设置元素里的内容时，会清空原来的数据。而我们期望能够追加数据的话，需要先获取原本的数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box'</span>).html($(<span class="string">'#box'</span>).html() + <span class="string">'&lt;em&gt;guowenfh.github.io&lt;/em&gt;'</span>); <span class="comment">//追加数据</span></span><br><span class="line"><span class="comment">//当然它还支持使用函数来进行更复杂的追加</span></span><br></pre></td></tr></table></figure>
<p><strong><code>val()</code>的特殊用法：</strong><br>如果想设置多个选项的选定状态，比如下拉列表、单选复选框等等，可以通过数组传递操作。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"input"</span>).val([<span class="string">"check1"</span>,<span class="string">"check2"</span>, <span class="string">"radio1"</span>]); <span class="comment">//value 值是这些的将被选定</span></span><br></pre></td></tr></table></figure></p>
<h3 id="二-_元素属性操作">二. 元素属性操作</h3><p>除了对元素内容进行设置和获取，通过jQuery也可以对元素本身的属性进行操作，包括获取属性的属性值、设置属性的属性值，并且可以删除掉属性。<br><code>attr()</code>和<code>removeAttr()</code>：</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>attr(key)</code></td>
<td>获取某个元素 key 属性的属性值</td>
</tr>
<tr>
<td><code>attr(key, value)</code></td>
<td>设置某个元素 key 属性的属性值</td>
</tr>
<tr>
<td><code>attr({key1:value2, key2:value2...})</code></td>
<td>设置某个元素多个 key 属性的属性值</td>
</tr>
<tr>
<td><code>attr(key, function (index, value){})</code></td>
<td>通过 fn 来设置设置某个元素 key属性</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong></p>
<ol>
<li>jQuery中很多方法都可以使用 <code>function() {}</code>来返回出字符串，比如 <code>html()</code>、<code>text()</code>、<code>val()</code>和上一章刚学过的 <code>is()</code>、<code>filter()</code>方法。<br>这些方法里的<code>function() {}</code>，可以不传参数。可以只传一个参数 <code>index</code>，表示当前元素的索引(从0开始)。也可以传递两个参数 <code>index</code>、<code>value</code>，第二个参数表示属性原本的值。<br>(当然并不是所有方法都适合，有兴趣可以自己逐个尝试)。</li>
<li>删除指定的属性，这个方法就不可以使用匿名函数，传递<code>index</code>和<code>value</code>均无效。<code>$(&#39;div&#39;).removeAttr(&#39;title&#39;); //删除指定的属性</code></li>
<li>当然因为<code>id</code>和<code>class</code>也是元素的属性，自然也可以使用attr进行设置，但是建议不这样使用，因为会导致整个页面结构的混乱，有专门的属性对它们进行设置。</li>
</ol>
<h3 id="三-_元素样式操作">三. 元素样式操作</h3><p>元素样式操作包括了直接设置 CSS 样式、增加 CSS 类别、类别切换、删除类别这几种操作方法。使用频率极高！</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>css(name)</code></td>
<td>获取某个元素行内的 CSS 样式</td>
</tr>
<tr>
<td><code>css([name1, name2, name3])</code></td>
<td>获取某个元素行内多个 CSS 样式</td>
</tr>
<tr>
<td><code>css(name, value)</code></td>
<td>设置某个元素行内的 CSS 样式</td>
</tr>
<tr>
<td><code>css(name, function (index, value) )</code></td>
<td>设置某个元素行内的 CSS 样式</td>
</tr>
<tr>
<td><code>css({name1 : value1, name2 : value2})</code></td>
<td>设置某个元素行内多个 CSS 样式，键值对</td>
</tr>
<tr>
<td><code>addClass(class)</code></td>
<td>给某个元素添加一个 CSS 类</td>
</tr>
<tr>
<td><code>addClass(class1 class2 class3...)</code></td>
<td>给某个元素添加多个 CSS 类</td>
</tr>
<tr>
<td><code>removeClass(class)</code></td>
<td>删除某个元素的一个 CSS 类</td>
</tr>
<tr>
<td><code>removeClass(class1 class2 class3...)</code></td>
<td>删除某个元素的多个 CSS 类</td>
</tr>
<tr>
<td><code>toggleClass(class)</code></td>
<td>来回切换默认样式和指定样式</td>
</tr>
<tr>
<td><code>toggleClass(class1 class2 class3...)</code></td>
<td>同上</td>
</tr>
<tr>
<td><code>toggleClass(class, switch)</code></td>
<td>来回切换样式的时候设置切换频率</td>
</tr>
<tr>
<td><code>toggleClass(function () {})</code></td>
<td>通过匿名函数设置切换的规则</td>
</tr>
<tr>
<td><code>toggleClass(function () {}, switch)</code></td>
<td>在匿名函数设置时也可以设置频率</td>
</tr>
<tr>
<td><code>toggleClass(function (i, c, s) {}, switch)</code></td>
<td>在匿名函数设置时传递三个参数</td>
</tr>
</tbody>
</table>
<p><strong>理解：</strong></p>
<p>在获取多个 CSS 样式时，获取到的是一个对象数组，如果用原生JS进行解析需要使用<code>for in</code>遍历。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = $(<span class="string">'div'</span>).css([<span class="string">'color'</span>, <span class="string">'height'</span>, <span class="string">'width'</span>]); <span class="comment">//得到多个 CSS 样式的数组对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> box) &#123; <span class="comment">//逐个遍历出来</span></span><br><span class="line">    alert(i + <span class="string">':'</span> + box[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在jQuery显然不需要那么麻烦，因为它提供了一个遍历工具专门来处理这种对象数组，<code>$.each()</code>方法，这个方法可以轻松的遍历对象数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 遍历对象数组</span><br><span class="line"> * @param  &#123;String&#125; index 索引，鍵，属性名</span><br><span class="line"> * @param  &#123;String&#125; value  属性值，值（相当于arr[i]）</span><br><span class="line"> */</span></span><br><span class="line"><span class="comment">//遍历原生JS对象数组时，value为元素DOM。</span></span><br><span class="line">$.each(box, <span class="function"><span class="keyword">function</span>(<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">    alert(index+<span class="string">":"</span>+value);<span class="comment">//效果和上面的一样</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果想设置某个元素的 CSS 样式的值，但这个值需要计算我们可以传递一个匿名函数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).css(<span class="string">'width'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="built_in">parseInt</span>(value) - <span class="number">50</span>) + <span class="string">'px'</span>;<span class="comment">//局部操作，不影响全局，避免冲突。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在使用<code>.toggleClass()</code>使用时，可以使用传入匿名函数的方法，实现由默认到几个class之间的切换。例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意这里必须要先删除原有的样式，不然只是被覆盖了，而不是替换。</span></span><br><span class="line">$(<span class="string">'div'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).toggleClass(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">'red'</span>)) &#123;</span><br><span class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'red'</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'blue'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="keyword">this</span>).removeClass(<span class="string">'blue'</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'red'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>对于<code>.toggleClass()</code>传入匿名函数的方法，还可以可以传递 <code>index</code>索引、<code>class</code>类两个参数以及频率布尔值，可以得到当前的索引、class类名和频率布尔值。</p>
<h3 id="四-_CSS方法">四. CSS方法</h3><h4 id="（一）width()方法">（一）width()方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>width()</code></td>
<td>获取某个元素的宽度(number)</td>
</tr>
<tr>
<td><code>width(value)</code></td>
<td>设置某个元素的宽度(无单位时，默认px)</td>
</tr>
<tr>
<td><code>width(function (index, width) {})</code></td>
<td>通过匿名函数设置某个元素的宽度</td>
</tr>
</tbody>
</table>
<p>虽然可以不加单位，但是建议加上，使代码更加清晰。<br>index 是索引，value 是原本值。</p>
<h4 id="（二）height()方法">（二）height()方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>height()</code></td>
<td>获取某个元素的高度</td>
</tr>
<tr>
<td><code>height(value)</code></td>
<td>设置某个元素的高度</td>
</tr>
<tr>
<td><code>height(function (index, height) {})</code></td>
<td>通过匿名函数设置某个元素的高度</td>
</tr>
</tbody>
</table>
<p>上述两个方法不包括内外边距和边框</p>
<h4 id="（三）内外边距和边框尺寸方法">（三）内外边距和边框尺寸方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>innerWidth()</code></td>
<td>获取元素宽度，包含内边距 padding</td>
</tr>
<tr>
<td><code>innerHeight()</code></td>
<td>获取元素高度，包含内边距 padding</td>
</tr>
<tr>
<td><code>outerWidth()</code></td>
<td>获取元素宽度，包含边框 border 和内边距 padding</td>
</tr>
<tr>
<td><code>outerHeight()</code></td>
<td>获取元素高度，包含边框 border 和内边距 padding</td>
</tr>
<tr>
<td><code>outerWidth(ture)</code></td>
<td>同上，且包含外边距(注意里面的true)</td>
</tr>
<tr>
<td><code>outerHeight(true)</code></td>
<td>同上，且包含外边距</td>
</tr>
</tbody>
</table>
<h4 id="（四）元素偏移方法">（四）元素偏移方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>offset()</code></td>
<td>获取某个元素相对于视口的偏移位置(无论定位与否)</td>
</tr>
<tr>
<td><code>position()</code></td>
<td>获取某个元素相对于父元素的偏移位置</td>
</tr>
<tr>
<td><code>scrollTop()</code></td>
<td>获取垂直滚动条的位置</td>
</tr>
<tr>
<td><code>scrollTop(value)</code></td>
<td>设置垂直滚动条的位置</td>
</tr>
<tr>
<td><code>scrollLeft()</code></td>
<td>获取水平滚动条的值</td>
</tr>
<tr>
<td><code>scrollLeft(value)</code></td>
<td>设置水平滚动条的值</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong><br>前两个方法，获取得到的是一个对象，如：<code>{left:12,top:32}</code>，所以需要获取其中的一个值的时候，还需要进行选取，例如：<code>$(div).offset.left</code>。获取相对与视口的偏移。</p>
<p>在获取滚动条的值时需要注意的是，对象为window且需要用$包装转化成jQ对象<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).scrollTop(); <span class="comment">//获取当前滚动条的位置</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollTop(<span class="number">300</span>); <span class="comment">//设置当前滚动条的位置</span></span><br></pre></td></tr></table></figure></p>
<h2 id="DOM_节点操作">DOM 节点操作</h2><p>DOM中有一个非常重要的功能，就是节点模型，也就是DOM中的“M”。页面中的元素结构就是通过这种节点模型来互相对应着的，我们只需要通过这些节点关系，可以创建、插入、替换、克隆、删除等等一些列的元素操作。</p>
<h3 id="一-_创建节点">一. 创建节点</h3><p>为了使页面更加智能化，有时我们想动态的在 html 结构页面添加一个元素标签，那么在插入之前首先要做的动作就是：创建节点。<br>在jQuery中创建节点异常简单。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = $(<span class="string">'&lt;div id="box"&gt;节点&lt;/div&gt;'</span>); <span class="comment">//创建一个节点</span></span><br><span class="line">$(<span class="string">'body'</span>).append(box); <span class="comment">//将节点插入到&lt;body&gt;元素内部</span></span><br></pre></td></tr></table></figure></p>
<h3 id="二．_插入节点">二． 插入节点</h3><p>在创建节点的过程中，其实我们已经演示怎么通过.append()方法来插入一个节点。但仅仅这个功能远远不能满足我们的需求，除了这个方法，jQuery提供了其他几个方法来插入节点。</p>
<h4 id="内部插入节点方法">内部插入节点方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>append(content)</code></td>
<td>向指定元素内部后面插入节点content</td>
</tr>
<tr>
<td><code>append(function (index, html) {})</code></td>
<td>使用匿名函数向指定元素内部后面插入节点</td>
</tr>
<tr>
<td><code>appendTo(content)</code></td>
<td>将指定元素移入到指定元素content 内部后面</td>
</tr>
<tr>
<td><code>prepend(content)</code></td>
<td>向指定元素content 内部的前面插入节点</td>
</tr>
<tr>
<td><code>prepend(function (index, html) {})</code></td>
<td>使用匿名函数向指定元素内部的前面插入节点</td>
</tr>
<tr>
<td><code>prependTo(content)</code></td>
<td>将指定元素移入到指定元素 content 内部前面</td>
</tr>
</tbody>
</table>
<p>需要注意的是<code>appendTo(content)</code>与<code>prependTo(content)</code>在使用方法上与其他两个略微有些不同，<code>$(&quot;&lt;em&gt;new&lt;/em&gt;&quot;).appendTo(&quot;div&quot;);</code>，它代表的是创建的节点传入div内部。</p>
<p>匿名函数方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).append(<span class="function"><span class="keyword">function</span> (<span class="params">index, html</span>) </span>&#123;</span><br><span class="line"> <span class="comment">//使用匿名函数插入节点index是获取到的div的索引，html 是原节点</span></span><br><span class="line">    <span class="keyword">if</span>(index==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;strong&gt;节点&lt;/strong&gt;'</span>;<span class="comment">//在获取到的第二个div内部添加节点</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="外部插入节点方法">外部插入节点方法</h4><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>after(content)</code></td>
<td>向指定元素的外部后面插入节点 content</td>
</tr>
<tr>
<td><code>after(function (index, html) {})</code></td>
<td>使用匿名函数向指定元素的外部后面插入节点</td>
</tr>
<tr>
<td><code>before(content)</code></td>
<td>向指定元素的外部前面插入节点 content</td>
</tr>
<tr>
<td><code>before(function (index, html) {})</code></td>
<td>使用匿名函数向指定元素的外部前面插入节点</td>
</tr>
<tr>
<td><code>insertAfter(content)</code></td>
<td>将指定节点移到指定元素 content 外部的后面</td>
</tr>
<tr>
<td><code>insertBefore(content)</code></td>
<td>将指定节点移到指定元素 content 外部的前面</td>
</tr>
</tbody>
</table>
<p>与上面相同<code>insertAfter(content)</code> 与<code>insertBefore(content)</code>也与其它两个是相反的。</p>
<h3 id="三．包裹节点">三．包裹节点</h3><p>jQuery 提供了一系列方法用于包裹节点，那包裹节点是什么意思呢？其实就是使用字符串代码将指定元素的代码包含着的意思。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wrap(html)</code></td>
<td>向指定元素包裹一层 html 代码</td>
</tr>
<tr>
<td><code>wrap(element)</code></td>
<td>向指定元素包裹一层 DOM 对象节点</td>
</tr>
<tr>
<td><code>wrap(function (index) {})</code></td>
<td>使用匿名函数向指定元素包裹一层自定义内容</td>
</tr>
<tr>
<td><code>unwrap()</code></td>
<td>移除一层指定元素包裹的内容（多层需移除多次）</td>
</tr>
<tr>
<td><code>wrapAll(html)</code></td>
<td>用 html 将所有元素包裹到一起</td>
</tr>
<tr>
<td><code>wrapAll(element)</code></td>
<td>用 DOM 对象将所有元素包裹在一起</td>
</tr>
<tr>
<td><code>wrapInner(html)</code></td>
<td>向指定元素的子内容包裹一层 html</td>
</tr>
<tr>
<td><code>wrapInner(element)</code></td>
<td>向指定元素的子内容包裹一层 DOM 对象节点</td>
</tr>
<tr>
<td><code>wrapInner(function (index) {})</code></td>
<td>用匿名函数向指定元素的子内容包裹一层</td>
</tr>
</tbody>
</table>
<p>wrap的多种用法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div'</span>).wrap(<span class="string">'&lt;strong class="ing"&gt;&lt;/strong&gt;'</span>); <span class="comment">//在 div 外层包裹一层 strong</span></span><br><span class="line">$(<span class="string">'div'</span>).wrap(<span class="string">'&lt;strong&gt;123&lt;/strong&gt;'</span>); <span class="comment">//包裹的元素可以带内容</span></span><br><span class="line">$(<span class="string">'div'</span>).wrap(<span class="string">'&lt;strong&gt;&lt;em&gt;&lt;/em&gt;&lt;/strong&gt;'</span>); <span class="comment">//包裹多个元素</span></span><br><span class="line">$(<span class="string">'div'</span>).wrap($(<span class="string">'strong'</span>).get(<span class="number">0</span>)); <span class="comment">//也可以包裹一个原生 DOM</span></span><br><span class="line">$(<span class="string">'div'</span>).wrap(<span class="built_in">document</span>.createElement(<span class="string">'strong'</span>)); <span class="comment">//临时的原生 DOM</span></span><br><span class="line">$(<span class="string">'div'</span>).wrap(<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123; <span class="comment">//匿名函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;strong&gt;&lt;/strong&gt;'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>注意：</strong> <code>.wrap()</code>和<code>.wrapAll()</code>的区别在前者把每个元素当成一个独立体，分别包含一层外层；后者将所有元素作为一个整体作为一个独立体，只包含一层外层。这两种都是在外层包含，而<code>.wrapInner()</code>在内层包含。</p>
<h3 id="四-_节点操作">四. 节点操作</h3><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
<th>参数解析</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$(&#39;div&#39;).clone(true);</code></td>
<td>复制一个节点</td>
<td>true时表示同时复制事件行为，空或false都表示只复制元素及内容</td>
</tr>
<tr>
<td><code>$(&#39;div&#39;).remove(&quot;#box&quot;);</code></td>
<td>删除一个id=box的div元素</td>
<td>无参数时，表示直接删除元素</td>
</tr>
<tr>
<td><code>$(&#39;div&#39;).detach();</code></td>
<td>保留事件行为的删除</td>
<td>同上</td>
</tr>
<tr>
<td><code>$(&#39;div&#39;).empty();</code></td>
<td>清空节点里的内容</td>
<td>无参数</td>
</tr>
<tr>
<td><code>$(selector).replaceWith(content);</code></td>
<td>将 $(selector) 替换成 content 元素</td>
<td>HTML字符串，DOM元素，或者jQuery对象</td>
</tr>
<tr>
<td><code>$(content).replaceAll(selector);</code></td>
<td>同上</td>
<td>参数selector为被替换的元素，content为替换的内容。</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong></p>
<ol>
<li><code>.remove()</code>和<code>.detach()</code>都是删除节点，而删除后本身方法可以返回当前被删除的节点对象，但区别在于前者在恢复时不保留事件行为，后者则保留。</li>
<li>节点被替换后，所包含的事件行为就全部消失了。</li>
<li>注意<code>replaceWith()</code>和<code>replaceAll()</code>方法替换的操作的<strong>内容和被替换元素所在的位置不同</strong></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="基础_DOM_和_和_CSS">基础 DOM 和 和 CSS</h2><h3 id="一-_设置元素及内容">一. 设置元素及内容</h3><p>我们通过前面所学习的各种选择器、过滤器来得到我们想要操作的元素。这个时候，我们就可以对这些元素进行 DOM 的操作。<]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（一）选择器引擎]]></title>
    <link href="http://guowenfh.github.io/2015/12/31/jQuery-01-Sizzle/"/>
    <id>http://guowenfh.github.io/2015/12/31/jQuery-01-Sizzle/</id>
    <published>2015-12-31T03:26:15.000Z</published>
    <updated>2015-12-31T04:56:18.949Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>本来是单独整理了一个CSS选择器的，但是在jQuery中基本都有对应的，所以就不发了。</p>
<p>jQuery选择器，若未作特别说明，获取的都是元素集合。</p>
</blockquote>
<h2 id="一-_常规选择器">一. 常规选择器</h2><h3 id="（一）简单选择器">（一）简单选择器</h3><p>模仿的是CSS选择器，只不过在使用jQuery选择器时，我们首先必须使用“$()”函数来包装我们的 CSS 规则。<br>而CSS 规则作为参数传递到jQuery对象内部后，再返回包含页面中对应元素的 jQuery 对象。随后可以进行节点操作，例如：<code>$(&#39;#box&#39;).css(&#39;color&#39;, &#39;red&#39;);</code>。</p>
<p>那么除了 ID 选择器之外，还有两种基本的选择器，分别为：元素标签名和类(class)：</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>CSS 模式</th>
<th>jQuery 模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>元素名</td>
<td><code>div{}</code></td>
<td><code>$(&#39;div&#39;)</code></td>
<td>获取所有div元素的 DOM 对象</td>
</tr>
<tr>
<td>ID</td>
<td><code>#box {}</code></td>
<td><code>$(&#39;#box&#39;)</code></td>
<td>获取一个 ID 为 box 元素的 DOM 对象</td>
</tr>
<tr>
<td>类(class)</td>
<td><code>.box{}</code></td>
<td><code>$(&#39;.box&#39;)</code></td>
<td>获取所有class为box的所有DOM对象</td>
</tr>
</tbody>
</table>
<p>我们可以采用jQuery核心自带的一个属性length来查看返回的元素个数。(<code>size()</code>方法已经弃用)</p>
<p>在实践过程中发现使用多个id时，css居然都会高亮，jQuery没有这个问题。（标准写明一个页面只能有一个id）</p>
<p>jQuery选择器的写法与CSS选择器十分类似，只不过他们的功能不同。CSS 找到元素后添加的是单一的样式，而jQuery则添加的是动作行为。重要的是<strong>jQuery兼容性更好</strong>，例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#box &gt; p &#123; //CSS 子选择器，IE6 不支持</span><br><span class="line">color:red;</span><br><span class="line">&#125;</span><br><span class="line">$('#box &gt; p').css('color','red'); //jQuery 子选择器，兼容了 IE6</span><br></pre></td></tr></table></figure>
<p>jQuery选择器支持CSS1、CSS2的全部规则，支持CSS3部分实用的规则，同时它还有少量独有的规则而jQuery选择器在获取节点对象的时候不但简单，还<strong>内置了容错功能</strong>区别如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#pox'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>); <span class="comment">//不存在ID为pox的元素，也不报错</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'pox'</span>).style.color = <span class="string">'red'</span>; <span class="comment">//报错了</span></span><br></pre></td></tr></table></figure>
<p>如何判断jQuery是否调取不存在的元素：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ($(<span class="string">'#pox'</span>).length &gt; <span class="number">0</span>) &#123; <span class="comment">//jQuery对象，判断元素包含数量即可</span></span><br><span class="line">    $(<span class="string">'#pox'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者转化成DOM对象方式判断</span></span><br><span class="line"><span class="keyword">if</span> ($(<span class="string">'#pox'</span>)[<span class="number">0</span>]) &#123;&#125;; <span class="comment">//通过数组下标也可以获取 DOM 对象</span></span><br><span class="line"><span class="keyword">if</span> ($(<span class="string">'#pox'</span>).get(<span class="number">0</span>)) &#123;&#125; ;</span><br></pre></td></tr></table></figure>
<h3 id="（二）进阶选择器">（二）进阶选择器</h3><p>在简单选择器中，我们了解了最基本的三种选择器：元素标签名、ID 和类(class)。那么在基础选择器外，还有一些进阶和高级的选择器方便我们更精准的选择元素</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>CSS 模式</th>
<th>jQuery 模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>群组选择器</td>
<td><code>span,.con,.box{}</code></td>
<td><code>$(&#39;span,em,.box&#39;)</code></td>
<td>获取多个选择器的 DOM 对象</td>
</tr>
<tr>
<td>后代选择器</td>
<td><code>ul li a{}</code></td>
<td><code>$(&#39;ul li a&#39;)</code></td>
<td>获取追溯到的多个 DOM 对象</td>
</tr>
<tr>
<td>通配选择器</td>
<td><code>*{}</code></td>
<td><code>$(&#39;*&#39;)</code></td>
<td>获取所有元素标签的 DOM 对象</td>
</tr>
</tbody>
</table>
<p>目前介绍的六种选择器，在实际应用中，我们可以灵活的搭配，使得选择器更加的精准和快速：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box p, ul li *'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>);<span class="comment">//组合了多种选择器</span></span><br></pre></td></tr></table></figure></p>
<p><strong>警告：</strong>在实际使用上，通配选择器一般用的并不多，一般只用在局部的环境内。因为在大通配上，比如：<code>$(&#39;*&#39;)</code>，这种使用方法效率很低，影响性能，建议尽可能的少用。(CSS上也很少用)</p>
<p>还有一种选择器，可以在ID和类(class)中指明元素前缀，比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'div.box'</span>); <span class="comment">//限定.box获取到的元素标签名必须是div</span></span><br><span class="line">$(<span class="string">'p#box div.side'</span>); <span class="comment">//同上</span></span><br></pre></td></tr></table></figure>
<p>如同CSS一样，类(class)有一个特殊的模式，就是同一个DOM节点可以声明多个类(class)。那么对于这种格式，我们有多class选择器可以使用，但要<strong>注意和class群组选择器的区别</strong>。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.box.pox &#123; <span class="comment">//双 class 选择器获取页面中class同时有.box.pox的元素</span></span><br><span class="line">    color:red;</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">'.box.pox'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>); <span class="comment">//用多个class进行精准确定</span></span><br></pre></td></tr></table></figure></p>
<p><strong>注意要点：</strong></p>
<blockquote>
<p>只追求必要的确定性。当选择器筛选越复杂，jQuery内部的选择器引擎处理字符串的时间就越长。</p>
</blockquote>
<h3 id="（三）高级选择器">（三）高级选择器</h3><p>在前面学习了六种最常规的选择器，一般来说通过这六种选择器基本上可以解决所有DOM节点对象选择的问题。但在很多特殊的元素上，比如父子关系的元素，兄弟关系的元素，特殊属性的元素等等并不好获取，下面就来说说这些高级选择器：</p>
<table>
<thead>
<tr>
<th>选择器</th>
<th>CSS 模式</th>
<th>jQuery 模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>后代选择器</td>
<td><code>ul li a {}</code></td>
<td><code>$(&#39;ul li a&#39;)</code></td>
<td>获取追溯到的多个 DOM 对象</td>
</tr>
<tr>
<td>子选择器</td>
<td><code>div &gt; p {}</code></td>
<td><code>$(&#39;div p&#39;)</code></td>
<td>只获取子类节点的多个 DOM 对象</td>
</tr>
<tr>
<td>next 选择器（相连）</td>
<td><code>div + p {}</code></td>
<td><code>$(&#39;div + p&#39;)</code></td>
<td>只获取某节点后一个同级DOM对象</td>
</tr>
<tr>
<td>nextAll 选择器(之后所有)</td>
<td><code>div ~ p {}</code></td>
<td><code>$(&#39;div ~ p&#39;)</code></td>
<td>获取某节点后面所有同级DOM对象</td>
</tr>
</tbody>
</table>
<p>其实后代选择器我们在进阶选择器里面已经有过使用，这里为什么要再提起呢?</p>
<p>因为它属于层次选择器，在高级选择器中，jQuery为这样的选择器都提供了一个相对应的方法。</p>
<ol>
<li><p>jQuery为后代选择器提供了一个等价的find(）方法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box p'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>); <span class="comment">//后代选择器</span></span><br><span class="line">$(<span class="string">'#box'</span>).find(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//和后代选择器等价</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>jQuery为子选择器提供了一个等价的children()方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box &gt; p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//子选择器，孙子失明</span></span><br><span class="line">$(<span class="string">'#box'</span>).children(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//和子选择器等价</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>jQuery为next选择器提供了一个等价的next()方法：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(</span><span class="string">'#box+p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="regexp">//</span>下一个同级节点</span><br><span class="line"><span class="variable">$(</span><span class="string">'#box'</span>).<span class="keyword">next</span>(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="regexp">//</span>和<span class="keyword">next</span>选择器等价</span><br></pre></td></tr></table></figure>
</li>
<li><p>jQuery为nextAll选择器提供了一个等价的方法nextAll()：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$(</span><span class="string">'#box ~ p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="regexp">//</span>后面所有同级节点</span><br><span class="line"><span class="variable">$(</span><span class="string">'#box'</span>).nextAll(<span class="string">'p'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>); <span class="regexp">//</span>和 nextAll 选择器等价</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>需要注意的是：</strong></p>
<ol>
<li>层次选择器对节点的层次都是有要求的，比如子选择器，有子节点才可以被选择到，孙子节点和重孙子节点都无法选择到。next和nextAll选择器，必须是同一个层次的后一个和后N个，不在同一个层次就无法选取到了。</li>
<li>在 <code>find()</code>、<code>children()</code>、<code>next()</code>和<code>nextAll()</code>和这四个方法中，如果不传递参数，就相当于传递了“<em>”，选择所有符合条件的元素，<em>*建议尽量保持参数的传递</em></em></li>
</ol>
<p><strong>jQuery独有补充方法。CSS未含有</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box'</span>).prev(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//同级上一个元素</span></span><br><span class="line">$(<span class="string">'#box'</span>).prevAll(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//同级上面所有的元素</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'#box'</span>).prevUntil(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//同级上非指定元素选定，遇到则停止</span></span><br><span class="line">$(<span class="string">'#box'</span>).nextUntil(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//同级下非指定元素选定，遇到则停止</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'#box'</span>).siblings(<span class="string">'p'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);<span class="comment">//siblings()方法正好集成了prevAll()和nextAll()两个功能的效果，及上下相邻的所有元素进行选定：</span></span><br></pre></td></tr></table></figure>
<p><strong>扩展：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'p'</span>, <span class="string">'#box'</span>);<span class="comment">//jQuery会自动把这条语句转成$('#box').find('p')，这会导致一定的性能损失。</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'p'</span>, $(<span class="string">'#parent'</span>));<span class="comment">//jQuery内部会也将这条语句转成$('#box').find('p')</span></span><br></pre></td></tr></table></figure>
<p>这里，<strong>推荐使用jQuery提供的方法。</strong>使用“+”或“~”从字面上没有next和nextAll更加语义化，更加清晰，jQuery的方法更加丰富，提供了相对的prev和prevAll。<br>并且有时需要能够灵活的拆分和组合选择器。所以，如果jQuery提供了独立的方法来代替某些选择器的功能，推荐优先使用独立的方法。</p>
<h3 id="（四）属性选择器">（四）属性选择器</h3><blockquote>
<p>注意<code>¦</code>应该是<code>|</code>，因为markdown表格解析的问题，所以用来替代</p>
</blockquote>
<table>
<thead>
<tr>
<th>CSS 模式</th>
<th>jQuery模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a[title]</code></td>
<td><code>$(&#39;a[title]&#39;)</code></td>
<td>获取具有这个属性的 DOM 对象</td>
</tr>
<tr>
<td><code>a[title=num1]</code></td>
<td><code>$(&#39;a[title=num1]&#39;)</code></td>
<td>获取具有这个属性=这个属性值的DOM对象</td>
</tr>
<tr>
<td><code>a[title^=num]</code></td>
<td><code>$(&#39;a[title^=num]&#39;)</code></td>
<td>获取具有这个属性且开头属性值匹配的DOM对象</td>
</tr>
<tr>
<td><code>a[title¦=num]</code></td>
<td><code>$(&#39;a[title¦=num]&#39;)</code></td>
<td>获取具有这个属性且等于属性值或开头属性值匹配后面跟一个<code>-</code>号的DOM对象</td>
</tr>
<tr>
<td><code>a[title$=num]</code></td>
<td><code>$(&#39;a[title$=num]&#39;)</code></td>
<td>获取具有这个属性且结尾属性值匹配的DOM对象</td>
</tr>
<tr>
<td><code>a[title!=num]</code></td>
<td><code>$(&#39;a[title!=num]&#39;)</code></td>
<td>获取不具有这个属性或不等于该属性值的DOM对象</td>
</tr>
<tr>
<td><code>a[title~=num]</code></td>
<td><code>$(&#39;a[title~=num]&#39;)</code></td>
<td>获取具有这个属性且属性值是以一个空格分割的列表，其中包含属性值的DOM对象</td>
</tr>
<tr>
<td><code>a[title*=num]</code></td>
<td><code>$(&#39;a[title*=num]&#39;)</code></td>
<td>获取具有这个属性且属性值含有一个指定字串的DOM对象</td>
</tr>
<tr>
<td><code>a[bbb][title=num1]</code></td>
<td><code>$(&#39;a[bbb][title=num1]&#39;)</code></td>
<td>获取具有这个属性且属性值匹配的DOM对象</td>
</tr>
</tbody>
</table>
<h2 id="二-_过滤选择器">二. 过滤选择器</h2><h3 id="（一）基本过滤器">（一）基本过滤器</h3><table>
<thead>
<tr>
<th>过滤器名</th>
<th>jQuery 语法</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:first</code></td>
<td><code>$(&#39;li:first&#39;)</code></td>
<td>选取第一个元素</td>
<td>单个</td>
</tr>
<tr>
<td><code>:last</code></td>
<td><code>$(&#39;li:last&#39;)</code></td>
<td>选取最后一个元素</td>
<td>单个</td>
</tr>
<tr>
<td><code>:not(selector)</code></td>
<td><code>$(&#39;li:not(.red)&#39;)</code></td>
<td>选取class不是red的li元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:even</code></td>
<td><code>$(&#39;li:even&#39;)</code></td>
<td>选择索引(以下几个都是从0开始)是偶数的所有元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:odd</code></td>
<td><code>$(&#39;li:odd&#39;)</code></td>
<td>选择索引是奇数的所有元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:eq(index)</code></td>
<td><code>$(&#39;li:eq(2)&#39;)</code></td>
<td>选择索引等于index的元素(负数从后开始)</td>
<td>单个</td>
</tr>
<tr>
<td><code>:gt(index)</code></td>
<td><code>$(&#39;li:gt(2)&#39;)</code></td>
<td>选择索引大于index的元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:lt(index)</code></td>
<td><code>$(&#39;li.lt(2)&#39;)</code></td>
<td>选择索引小于index的元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:header</code></td>
<td><code>$(&#39;:header&#39;)</code></td>
<td>选择标题元素，h1~h6</td>
<td>集合</td>
</tr>
<tr>
<td><code>:animated</code></td>
<td><code>$(&#39;:animated&#39;)</code></td>
<td>选择正在执行动画的元素</td>
<td>集合</td>
</tr>
<tr>
<td><code>:focus</code></td>
<td><code>$(&#39;:focus&#39;)</code></td>
<td>选择当前被焦点的元素</td>
<td>集合</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong><code>:focus</code>过滤器，必须是网页初始状态的已经被激活焦点的元素才能实现元素获取。而不是鼠标点击或者Tab键盘敲击激活的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'input'</span>).get(<span class="number">0</span>).focus(); <span class="comment">//先初始化激活一个元素焦点</span></span><br><span class="line">$(<span class="string">':focus'</span>).css(<span class="string">'background'</span>, <span class="string">'red'</span>); <span class="comment">//被焦点的元素</span></span><br></pre></td></tr></table></figure></p>
<p>jQuery为最常用的过滤器提供了专用的方法，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).eq(<span class="number">2</span>).css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//元素li的第三个元素，负数从后开始</span></span><br><span class="line">$(<span class="string">'li'</span>).first().css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//元素li的第一个元素</span></span><br><span class="line">$(<span class="string">'li'</span>).last().css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//元素li的最后一个元素</span></span><br><span class="line">$(<span class="string">'li'</span>).not(<span class="string">'.red'</span>).css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//元素li不含class为red的元素</span></span><br></pre></td></tr></table></figure>
<h3 id="（二）内容过滤器">（二）内容过滤器</h3><p>内容过滤器的过滤规则主要是包含的子元素或文本内容上。</p>
<table>
<thead>
<tr>
<th>过滤器名</th>
<th>jQuery语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:contains(text)</code></td>
<td><code>$(&#39;:contains(&quot;ycku.com&quot;)&#39;)</code></td>
<td>选取含”ycku.com”文本的元素</td>
</tr>
<tr>
<td><code>:empty</code></td>
<td><code>$(&#39;:empty&#39;)</code></td>
<td>选取不包含子元素或空文本的元素</td>
</tr>
<tr>
<td><code>:has(selector)</code></td>
<td><code>$(&#39;:has(.red)&#39;)</code></td>
<td>选取含有class是red的元素(在父元素调用)</td>
</tr>
<tr>
<td><code>:parent</code></td>
<td><code>$(&#39;:parent&#39;)</code></td>
<td>选取含有子元素或文本的元素</td>
</tr>
</tbody>
</table>
<p>jQuery 提供了一个 has()方法来提高:has 过滤器的性能：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'ul'</span>).has(<span class="string">'.red'</span>).css(<span class="string">'background'</span>, <span class="string">'#ccc'</span>); <span class="comment">//选择子元素含有 class 是 red 的元素</span></span><br></pre></td></tr></table></figure></p>
<p>jQuery提供了一个名称和:parent相似的方法，但这个方法并不是选取含有子元素或文本的元素，而是获取当前元素的父元素，返回的是元素集合。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).parent().css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//选择当前元素的父元素</span></span><br><span class="line">$(<span class="string">'li'</span>).parents().css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//选择当前元素的父元素及祖先元素（追溯到html）</span></span><br><span class="line">$(<span class="string">'li'</span>).parentsUntil(<span class="string">'html'</span>).css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//选择当前元素遇到html父元素停止（会在body上加）</span></span><br></pre></td></tr></table></figure>
<h3 id="（三）可见性过滤器">（三）可见性过滤器</h3><p>可见性过滤器根据元素的可见性和不可见性来选择相应的元素。</p>
<table>
<thead>
<tr>
<th>过滤器名</th>
<th>jQuery 语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:hidden</code></td>
<td><code>$(&#39;:hidden&#39;)</code></td>
<td>选取所有不可见元素</td>
</tr>
<tr>
<td><code>:visible</code></td>
<td><code>$(&#39;:visible&#39;)</code></td>
<td>选取所有可见元素</td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong>:hidden过滤器一般是包含的内容为：CSS样式为<code>display:none</code>、input表单类型为<code>type=&quot;hidden&quot;</code>和<code>visibility:hidden</code>的元素。</p>
<h3 id="（四）子元素过滤器">（四）子元素过滤器</h3><p>子元素过滤器的过滤规则是通过父元素和子元素的关系来获取相应的元素。</p>
<table>
<thead>
<tr>
<th>过滤器名</th>
<th>jQuery语法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:first-child</code></td>
<td><code>$(&#39;li:first-child&#39;)</code></td>
<td>获取每个父元素的第一个子元素</td>
</tr>
<tr>
<td><code>:last-child</code></td>
<td><code>$(&#39;li:last-child&#39;)</code></td>
<td>获取每个父元素的最后一个子元素</td>
</tr>
<tr>
<td><code>:only-child</code></td>
<td><code>$(&#39;li:only-child&#39;)</code></td>
<td>获取有且只有一个子元素的元素</td>
</tr>
<tr>
<td><code>:nth-child(odd/even/index)</code>支持表达式，如2n等同even</td>
<td><code>$(&#39;li:nth-child(even)&#39;)</code></td>
<td>获取每个自定义子元素的元素(索引值从 1 开始计算)</td>
</tr>
</tbody>
</table>
<h3 id="（五）其他方法">（五）其他方法</h3><p>jQuery 在选择器和过滤器上，还提供了一些常用的方法，方便我们开发时灵活使用。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>jQuery 语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is(s/o/e/f)</code></td>
<td><code>$(&#39;li&#39;).is(&#39;.red&#39;)</code>返回布尔值</td>
<td>传递选择器、DOM、jquery对象或是函数来匹配元素集合，如果这些元素中至少有一个元素匹配给定的参数，返回true</td>
</tr>
<tr>
<td><code>hasClass(class)</code></td>
<td><code>$(&#39;li&#39;).eq(2).hasClass(&#39;red&#39;)</code></td>
<td>其实就是<code>is(&quot;.&quot; + class)</code>,但只能传递class</td>
</tr>
<tr>
<td><code>slice(start, end)</code></td>
<td><code>$(&#39;li&#39;).slice(0,2)</code></td>
<td>选择从start到end位置的元素，如果是负数，则从后开始</td>
</tr>
<tr>
<td><code>filter(s/o/e/f)</code></td>
<td><code>$(&#39;li&#39;).filter(&#39;.red&#39;)</code></td>
<td>筛选元素集合中匹配表达式或通过传递函数测试的那些元素集合。</td>
</tr>
<tr>
<td><code>end()</code></td>
<td><code>$(&#39;div&#39;).find(&#39;p&#39;).end()</code></td>
<td>获取当前元素的前一个状态的元素(同级或父级)</td>
</tr>
<tr>
<td><code>contents()</code></td>
<td><code>$(&#39;div&#39;).contents()</code></td>
<td>获取某元素下面所有元素节点，包括文本节点，如果是iframe，则可以查找文本内容</td>
</tr>
</tbody>
</table>
<p><strong>is:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.red'</span>).is(<span class="string">'li'</span>); <span class="comment">//选择器，检测class为是否为 red</span></span><br><span class="line">$(<span class="string">'.red'</span>).is($(<span class="string">'li'</span>)); <span class="comment">//jQuery 对象集合，同上</span></span><br><span class="line">$(<span class="string">'.red'</span>).is($(<span class="string">'li'</span>).eq(<span class="number">2</span>)); <span class="comment">//jQuery 对象单个，同上</span></span><br><span class="line">$(<span class="string">'.red'</span>).is($(<span class="string">'li'</span>).get(<span class="number">1</span>)); <span class="comment">//DOM 对象，同上</span></span><br></pre></td></tr></table></figure>
<p>还可以进行各种自定义判断：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>list <span class="tag">&lt;<span class="title">strong</span>&gt;</span>item 1<span class="tag">&lt;/<span class="title">strong</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">span</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">li</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">$(<span class="string">"ul"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $target = $(event.target);</span><br><span class="line">  <span class="keyword">if</span> ( $target.is(<span class="string">"li"</span>) ) &#123;</span><br><span class="line">    $target.css(<span class="string">"background-color"</span>, <span class="string">"red"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>当用户点击的是第一个列表项中的单词<code>&quot;list&quot;</code>或第三个列表项中的任何单词时，被点击的列表项会被设置为红色背景。<br>不过，当用户点击第一个列表项中的<code>item1</code>或第二个列表项中的任何单词时，都不会有任何变化，这是为这上面的情况中，事件的目标分别是 <code>&lt;strong&gt;</code>是 <code>&lt;span&gt;</code>。</p>
<p><strong>slice:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).slice(<span class="number">0</span>,<span class="number">2</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>); <span class="comment">//前三个变成红色</span></span><br></pre></td></tr></table></figure></p>
<p><strong>注意：</strong>这个参数有多种传法和JavaScript中的slice方法是一样的比如：slice(2)，从第三个开始到最后选定；slice(2,4)，第三和第四被选定；slice(0,-2)，从倒数第三个位置，向前选定所有；slice(2,-2)，前两个和末尾两个未选定。</p>
<p><strong>filter：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'li'</span>).filter(<span class="string">'.red'</span>).css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//选择li的class为red的元素</span></span><br><span class="line">$(<span class="string">'li'</span>).filter(<span class="string">'.red,:first,:last'</span>).css(<span class="string">'background'</span>,<span class="string">'#ccc'</span>);<span class="comment">//增加了首尾选择</span></span><br><span class="line"><span class="comment">//特殊要求函数返回</span></span><br><span class="line">$(<span class="string">'li'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $(<span class="keyword">this</span>).attr(<span class="string">'class'</span>)==<span class="string">'red'</span> &amp;&amp; $(<span class="keyword">this</span>).attr(<span class="string">'title'</span>)==<span class="string">'列表3'</span>;</span><br><span class="line">&#125;).css(<span class="string">'background'</span>, <span class="string">'#ccc'</span>);</span><br></pre></td></tr></table></figure></p>
<p>此处注意<code>$(this)</code>的使用，这把this包装成了jQuery对象，以便使用jQuery的方法。</p>
<h2 id="三-_表单选择器">三. 表单选择器</h2><h3 id="（一）常规选择器">（一）常规选择器</h3><p>其实使用上面的选择器已经能对表单元素进行选取了，先来验证一下，来看看如何利用上面的方法来进行表单元素的选择。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//val()是jQuery用来获取表单元素文本内容的一个方法</span></span><br><span class="line">$(<span class="string">'input'</span>).val(); <span class="comment">//元素名定位，默认获取第一个</span></span><br><span class="line">$(<span class="string">'input'</span>).eq(<span class="number">1</span>).val(); <span class="comment">//同上，获取第二个</span></span><br><span class="line">$(<span class="string">'input[type=password]'</span>).val();<span class="comment">//选择type为password的字段</span></span><br><span class="line">$(<span class="string">'input[name=user]'</span>).val(); <span class="comment">//选择 name 为 user 的字段</span></span><br></pre></td></tr></table></figure>
<p>很显然，上面的这个方法都能选择到想要的元素，那么对于 id 和class基本一致，也可以结合属性选择器来精确的定位，在这里我们不在重复。<br>对于表单中的其他元素名比如：textarea、select 和 button 等，原理一样，不在重复。<br>但是这样是不是太过于复杂了呢？假如我们要同时选择input、textarea、select 和 button？继续看吧。</p>
<h3 id="（二）表单选择器">（二）表单选择器</h3><p>虽然可以使用常规选择器来对表单的元素进行定位，但有时还是不能满足开发者灵活多变的需求，而且也太过于繁琐。所以，jQuery为表单提供了专用的选择器。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:input</code></td>
<td>选取所有 <code>input</code>、<code>textarea</code>、<code>select</code> 和 <code>button</code>元素</td>
</tr>
<tr>
<td><code>:text</code></td>
<td>选择所有单行文本框，即 <code>type=text</code></td>
</tr>
<tr>
<td><code>:password</code></td>
<td>选择所有密码框，即 <code>type=password</code></td>
</tr>
<tr>
<td><code>:radio</code></td>
<td>选择所有单选框，即 <code>type=radio</code></td>
</tr>
<tr>
<td><code>:checkbox</code></td>
<td>选择所有复选框，即 <code>type=checkbox</code></td>
</tr>
<tr>
<td><code>:submit</code></td>
<td>选取所有提交按钮，即 <code>type=submit</code></td>
</tr>
<tr>
<td><code>:reset</code></td>
<td>选取所有重置按钮，即 <code>type=reset</code></td>
</tr>
<tr>
<td><code>:image</code></td>
<td>选取所有图像按钮，即 <code>type=image</code></td>
</tr>
<tr>
<td><code>:button</code></td>
<td>选择所有普通按钮，即 <code>button 元素</code></td>
</tr>
<tr>
<td><code>:file</code></td>
<td>选择所有文件按钮，即 <code>type=file</code></td>
</tr>
<tr>
<td><code>:hidden</code></td>
<td>选择所有不可见字段，即 <code>type=hidden</code></td>
</tr>
</tbody>
</table>
<p><strong>注意：</strong></p>
<ol>
<li><p>由于这些选择器都是返回元素集合，如果想获取某一个指定的元素，最好结合一下属性选择器。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">':text[name=user]).size(); //获取单行文本框 name=user 的元素</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在使用这些属性时最好界定父元素，比如直接<code>$(&quot;:hidden&quot;).length</code>这样是不正确的，因为它还会选择到<code>head</code>标签内的元素，所以length属性不会为0，建议使用这样的形式：<code>$(&quot;form :hidden&quot;)</code></p>
</li>
</ol>
<h3 id="（三）表单过滤器">（三）表单过滤器</h3><p>jQuery 提供了四种表单过滤器，分别在是否可以用、是否选定来进行表单字段的筛选过滤。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:enabled</code></td>
<td>选取所有可用元素</td>
</tr>
<tr>
<td><code>:disabled</code></td>
<td>选取所有不可用元素</td>
</tr>
<tr>
<td><code>:checked</code></td>
<td>选取所有被选中的元素，单选和复选字段</td>
</tr>
<tr>
<td><code>:selected</code></td>
<td>选取所有被选中的元素，下拉列表</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>本来是单独整理了一个CSS选择器的，但是在jQuery中基本都有对应的，所以就不发了。</p>
<p>jQuery选择器，若未作特别说明，获取的都是元素集合。</p>
</blockquote>
<h2 id="一-_常规选择器">一. 常规选择器]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[jQuery入门笔记之（零）思考与基础核心]]></title>
    <link href="http://guowenfh.github.io/2015/12/27/jQuery-00-thinkingBasicCore/"/>
    <id>http://guowenfh.github.io/2015/12/27/jQuery-00-thinkingBasicCore/</id>
    <published>2015-12-27T12:50:40.000Z</published>
    <updated>2015-12-30T03:35:19.624Z</updated>
    <content type="html"><![CDATA[<h2 id="思考篇">思考篇</h2><h3 id="一-_什么是_jQuery?">一. 什么是 jQuery?</h3><blockquote>
<p>jQuery是一个JavaScript库，它通过封装原生的JavaScript函数得到一整套定义好的方<br>法。<br>它的作者是JohnResig，于2006年创建的一个开源项目，随着越来越多开发者的加入，jQuery已经集成了JavaScript、CSS、DOM和Ajax于一体的强大功能。<br>它可以用最少的代码，完成更多复杂而困难的功能，从而得到了开发者的青睐。</p>
</blockquote>
<h4 id="jQuery的版本">jQuery的版本</h4><blockquote>
<p>随着jQuery的不断进化，发展也变成了两条进化线：</p>
</blockquote>
<p>2006 年 8 月发布了 jQuery1.0，第一个稳定版本，具有对 CSS 选择符、事件处理和<br>Ajax 交互的支持。</p>
<p>2010 年 2 月发布了 jQuery1.4.2，添加了.delegate()和.undelegate()两个新方法，提升了灵活性和浏览器一致性，对事件系统进行了升级。</p>
<p>2011 年 1 月发布了 jQuery1.5，重写了 AJAX 组件，增强了扩展性和性能。</p>
<p>2013 年 5 月发布了 jQuery1.10，增加了一些功能。</p>
<p>到此，jQuery的以上版本都有非常好的浏览器兼容性，支持所有浏览器，当然包括了IE6/7/8。但是直到下面这条线的出现：</p>
<p><strong>2013 年 4 月发布了 jQuery2.0，5 月发布了 jQuery2.0.2，一个重大更新版本，不在支持 IE6/7/8，体积更小，速度更快。</strong></p>
<p>目前最新版本分别是jQuery 2.1.4 和jQuery 1.11.3 。</p>
<p>现在两条线同时发展，可供大家选择。</p>
<p><strong>根据项目要求来选择版本，下面有介绍</strong></p>
<h4 id="关于版本学习的问题：">关于版本学习的问题：</h4><p>版本的版本号升级主要有三种：</p>
<ul>
<li>第一种是大版本升级，比如1.x.x升级到2.x.x，这种升级规模是最大的，改动的地方是最多的，周期也是最长的，jQuery从1.x.x到 2.x.x用了7年。</li>
<li>第二种是小版本更新，比如1.7升级到1.8，改动适中，增加或减少了一些功能一般周期半年到一年左右。</li>
<li>第三种是微版本更新，比如1.8.1升级到1.8.2，修复一些bug或错误之类。</li>
</ul>
<p>版本的内容升级主要也有三种：</p>
<ul>
<li>第一种是核心库的升级，比如优化选择符、优化 DOM或者AJAX等；这种升级不影响开发者的使用。</li>
<li>第二种是功能性的升级，比如剔除一些过时的方法、新增或增强一些方法等等；这种升级需要了解和学习。</li>
<li>第三种就是 BUG 修复之类的升级，对开发者使用没有影响。</li>
</ul>
<p>所以综上所述：<br>有一半左右的升级都是内部优化，升级到新版本并不需要任何学习成本。就算在新的版本增加了一些功能，只需要几分钟了解一下即可使用，无需清零之前的知识，只需后续累加。<br>当然，在早期的 jQuery 版本都创建了最常用的功能，而新版本中增加的功能，也不是最常用的，无需立即学习，立马用起。</p>
<p><strong>选择一个版本开始学习吧！</strong></p>
<h3 id="二-_jQuery_的功能和优势">二. jQuery  的功能和优势</h3><p>jQuery 作为 JavaScript 封装的库，他的目的就是为了简化开发者使用 JavaScript。主要<br>功能有以下几点：</p>
<ol>
<li>像 CSS 那样访问和操作 DOM</li>
<li>修改 CSS 控制页面外观</li>
<li>简化 JavaScript 代码操作</li>
<li>事件处理更加容易</li>
<li>各种动画效果使用方便</li>
<li>让 Ajax 技术更加完美</li>
<li>基于 jQuery 大量插件</li>
<li>自行扩展功能插件</li>
</ol>
<p>jQuery 最大的优势，就是特别的方便。比如模仿 CSS 获取 DOM，比原生的 JavaScript<br>要方便太多。并且在多个 CSS 设置上的集中处理非常舒服，而最常用的 CSS 功能又封装到<br>单独的方法，感觉非常有心。<br>最重要的是 jQuery 的代码兼容性非常好，你不需要总是头疼着考虑不同浏览器的兼容问题。</p>
<blockquote>
<p>其次像《编写高质量代码–web前端开发修炼之道》作者曹刘阳在微博上说的jq的强大真的只在那个$选择器吗?太小看jq了，私以为jq真正强大和坚挺的原因有3：<br>1、工业标准，我不知道未来还有谁能像jq一样，api上犀牛书。总之是前无古人，后面恐怕也难有来者。<br>工业标准有多可怕和难以撼动，会超出你想像。看看php就知道了。<br>2、jq的api设计对于原生js的改良。<br>3、jq丰富的插件积累。</p>
</blockquote>
<p>我也疑惑过，随着现在前端框架<code>angular</code>和<code>react</code>的流行，乱花渐欲迷人。微博上神仙打架，疑惑的是我们这些前端初学者，不过我是这样认为的：<br>与其把时间花在前端框架的选择上。不如先把花在这个已经成为工业标准的库上，万物殊途同归 ，最终还是在JS做文章不是吗？</p>
<h3 id="三-_是否兼容IE低版本">三. 是否兼容IE低版本</h3><p>主要是从下面几个方面考虑：</p>
<h4 id="1-_成本控制">1. 成本控制</h4><ul>
<li>项目如果不是老站升级，也不是大门户的新闻站，成本控制和尽快<br>上线测试才是最重要的。</li>
<li>而如果新站一味要求全面兼容，会导致成本加剧（随着功能多少，<br>成本倍率增加）。</li>
<li>为了锁紧时间，就不停的加班再加班，又导致员工抵触，工作效率降低，这样成本不停的再累加。最终很多项<br>目，根本没上线就失败了。</li>
</ul>
<h4 id="2-_用户选择">2. 用户选择</h4><blockquote>
<p>高质量用户和低质量用户</p>
</blockquote>
<ul>
<li>例如一个3D游戏，和一款新闻应用：网易和腾讯在他们的新闻应用上，他们兼容了几乎所有的手<br>机平台，比如 IOS、安卓、黑莓、塞班等等，因为新闻应用的核心在新闻，而新闻的用户基<br>数巨大，需要兼顾高质量和低质量用户。而腾讯在 IOS 上的几十个应用，除了新闻、QQ、<br>浏览器，其他的基本都只有 IOS 和安卓，在塞班和黑莓及其他上就没有了。</li>
<li>所以，你的应用核心是哪方面？兼容的成本有多大？会不会导致成本控制问题？用户选<br>择尤为重要，放弃低质量用户也是一种成本控制。</li>
<li>在用户基数庞大的项目上，放弃低质量用户就有点愚笨，而你的用户基数只有 1000 人，而低质<br>量用户有 50 人，那么为了这 50 人去做兼容，那么 3 倍的成本就变得非常的昂贵。</li>
</ul>
<h4 id="3-_项目侧重点">3. 项目侧重点</h4><p>你的项目重点在哪里？是为了看新闻？是为了宣传线下产品？</p>
<p>那么你其实有必要兼容低版本浏览器。<br>首先这种类型的站不需要太好的用户体验，不需要太多的交互操作，只是看，<br>而兼容的成本比较低，并且核心在新闻或产品！</p>
<p>但如果你的项目有大量的交互、大量的操作，兼容成本较高，比如全球最大的社交网已经不兼容 IE6/7，就是这个原因。所以，项目并不是一味的全面兼容，或者全面不兼容，主要看你的项目侧重点在哪里！</p>
<h4 id="4-_用户体验">4. 用户体验</h4><blockquote>
<p>如果你的项目在兼容低版本浏览器成本巨大，比如社交网，有大量的 JS 和 AJAX 操作。<br>那么兼容 IE6/7 的成本确实很高，如果兼容，用户体验就会很差。</p>
</blockquote>
<p>兼容有两种：</p>
<ul>
<li>一种是高版本浏览器用性能好，体验好的模式；低版本的自动切换到兼容模式。</li>
<li>第二种就是，不管高版本或低版本都用统一的兼容模式。</li>
</ul>
<p>这两种成本都很高。用户体验好的模式，能增加用户粘度，增加付费潜在用户，而用户体验差的总是被用户归纳为心目中的备胎（所谓备胎就是实在没有了才去访问，如果有，很容易被抛弃）。</p>
<h4 id="5-_数据支持">5. 数据支持</h4><p>如果对某一种类型的网站项目有一定的研究，那么手头必须有支持的数据分析。<br>有数据分析可以更好的进行成本控制，更有魄力的解决高低质量用户的取舍。</p>
<h4 id="6-_教育用户">6. 教育用户</h4><p>很多项目可能是有固定客户群，或者使用该项目人员质量普遍较高。那么，面对零星一<br>点的低质量用户，我们不能再去迎合他。因为迎合他，就无法用高质量的用户体验去粘住忠实用户，又不能获取到低质量用户的芳心。<br>所以，我们应有的策略是：</p>
<ul>
<li>牢牢把握住高质量的忠诚用户，做到他们心目中的第一；</li>
<li>教育那部分低质量用户（比如企业级开发项目，可以直接做企业培训，安装高版本浏览器等等。互联网项目，就给出提示安装高版本浏览器即可）。</li>
<li>那么一部分低质量用户被拉拢过来，还有一小撮死性不改的就只有放弃。切不可捡了芝麻丢了西瓜，不要贪大求全。</li>
</ul>
<p>结论就是：结论就是必须根据实际情况，你项目的成本情况、人员情况、用户情况和项目本身类型情况而制定，没有一刀切的<br>兼容或不兼容。</p>
<h3 id="四-_下载及运行">四. 下载及运行</h3><blockquote>
<p>目前最新版本分别是jQuery 2.1.4 和jQuery 1.11.3 。下载开发版，可以顺便读一读源代码。</p>
</blockquote>
<p>下载jQuery：</p>
<ul>
<li><a href="http://code.jquery.com/" target="_blank" rel="external">官网地址</a></li>
<li><a href="http://cdn.code.baidu.com/" target="_blank" rel="external">百度静态资源共享库 CDN</a>，直接部署网上的地址</li>
<li>当然你要是看了我写的<a href="http://guowenfh.github.io/2015/12/26/SublimeText/">一个前端程序猿的Sublime Text3的自我修养</a>的话就更加简单了，直接就可以用编辑器下载</li>
</ul>
<p>参考手册：</p>
<ul>
<li>中文在线手册<a href="http://www.css88.com/jqapi-1.9/" target="_blank" rel="external">CSS88:jQuery快速API参考</a></li>
<li>官方英文文档<a href="http://api.jquery.com/" target="_blank" rel="external">jQuery API</a>，可配合浏览器翻译插件</li>
</ul>
<h4 id="第一个jQuery程序">第一个jQuery程序</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//已经引入jQ，在body内写入如下代码</span><br><span class="line"><span class="tag">&lt;<span class="title">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">"hello jQuery!"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="基础核心">基础核心</h2><h3 id="一-_代码风格">一. 代码风格</h3><p>在jQuery程序中，不管是页面元素的选择、内置的功能函数，都是美元符号“$”来起<br>始的。而这个“$”就是jQuery当中最重要且独有的对象：jQuery对象，所以我们在页面元素选择或执行功能函数的时候可以这么写：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(function () &#123;&#125;); //执行一个匿名函数</span><br><span class="line">$(‘#box’); //进行执行的ID元素选择</span><br><span class="line">$(‘#box’).css(‘color’, ‘red’); //执行功能函数</span><br></pre></td></tr></table></figure>
<p>由于$本身就是jQuery对象的缩写形式，那么也就是说上面的三段代码也可以写成如下形式：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jQuery(‘#box’).css(‘color’, ‘red’);</span><br><span class="line">//jQuery恒等于$</span><br><span class="line">// console.log(jQuery===$);//true</span><br></pre></td></tr></table></figure>
<p>且，每一次执行函数后，都会返回一个jQuery对象。如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#box'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>).css(<span class="string">'font-size'</span>, <span class="string">'50px'</span>); <span class="comment">//连缀</span></span><br></pre></td></tr></table></figure>
<h3 id="二-_加载模式">二. 加载模式</h3><blockquote>
<p>我们在之前的代码一直在使用<code>$(function () {});</code>这段代码进行首尾包裹，那么为什么必须<br>要包裹这段代码呢？</p>
</blockquote>
<ul>
<li>原因是我们jQuery库文件是在body元素之前加载的，我们必须等待所有的DOM元素加载后，延迟支持DOM操作，否则就无法获取到。使用<code>document.ready()</code>,只需要等待DOM加载完成就执行。</li>
<li>我们的原生Javascript也有一个延迟加载的方法<code>onload</code>，当网页内容全部加载完成后执行（例如图片等大文件未加载完成之前，JS功能处于假死状态）。</li>
<li>下面来看看它们<code>load</code>和<code>ready</code>区别到底在什么地方：</li>
</ul>
<table>
<thead>
<tr>
<th>区别</th>
<th><code>window.onload</code></th>
<th><code>$(document).ready()</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>执行时机</td>
<td>必须等待网页全部加载完毕（包括图片等），然后再执行包裹代码</td>
<td>只需要等待网页中的DOM结构加载完毕，就能执行包裹的代码</td>
</tr>
<tr>
<td>执行次数</td>
<td>只能执行一次，如果第二次，那么第一次的执行会被覆盖</td>
<td>可以执行多次，第N次都不会覆盖上一次</td>
</tr>
<tr>
<td>简写方案</td>
<td>无</td>
<td><code>$(function () {});</code></td>
</tr>
</tbody>
</table>
<p>慕课网的<a href="http://www.imooc.com/learn/488" target="_blank" rel="external">DOM探索之基础详解篇</a> 有对DOM Ready的一些介绍。</p>
<h3 id="三-_对象互换及处理多个库之间的冲突">三. 对象互换及处理多个库之间的冲突</h3><h4 id="1-_对象互换。">1. 对象互换。</h4><p>首先我们来看一下这段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alert($);<span class="comment">//返回jQuery对象方法内部函数</span></span><br><span class="line">alert($());<span class="comment">//[object object]，返回jQuery对象</span></span><br><span class="line">alert($(<span class="string">"#box"</span>));<span class="comment">//[object object]，返回jQuery对象</span></span><br><span class="line">alert(<span class="built_in">document</span>.getElementById(<span class="string">"box"</span>)); <span class="comment">//[object HTMLDivElement]，返回原生DOM对象</span></span><br></pre></td></tr></table></figure>
<p>如何进行转换呢？<br>jQuery 想要达到获取原生的 DOM 对象，可以这么处理：<br><code>alert($(&#39;#box&#39;).get(0)); //ID 元素的第一个原生 DOM</code></p>
<p>从上面 get(0)，这里的索引看出，jQuery 是可以进行批量处理 DOM 的，这样可以在很<br>多需要循环遍历的处理上更加得心应手。</p>
<p>当然要重新转化成jQuery对象的话，只需要使用$()包裹原生对象就可以了。</p>
<h4 id="2-_多个库之间的冲突">2. 多个库之间的冲突</h4><p>当一个项目中引入多个第三方库的时候，由于没有命名空间的约束（命名空间就好比同<br>一个目录下的文件夹一样，名字相同就会产生冲突），库与库之间发生冲突在所难免。</p>
<p> jQuery 只不过是 DOM 操作为主的库，方便我们日常 Web 开发。但有时，我们的项目有更多特殊的功能需要引入其他的库，比如用户界面 UI 方面的库，游戏引擎方面的库等等一系列。</p>
<p>所以jQuery提供了一个方法：<code>jQuery.noConflict();</code>：将$符所有权剔除。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"other_lib.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  jQuery.noConflict();</span><br><span class="line">  <span class="comment">// 现在就$所有权就不归jQuery了。</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>同时还可以使用</p>
<p><code>var $$ = jQuery;</code>：这样<code>$$</code>，就完全实现了原来$函数的功能。</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="思考篇">思考篇</h2><h3 id="一-_什么是_jQuery?">一. 什么是 jQuery?</h3><blockquote>
<p>jQuery是一个JavaScript库，它通过封装原生的JavaScript函数得到一整套定义好的方<br>法。<br]]>
    </summary>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/tags/jQuery/"/>
    
      <category term="jQuery" scheme="http://guowenfh.github.io/categories/jQuery/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[一个前端程序猿的Sublime Text3的自我修养]]></title>
    <link href="http://guowenfh.github.io/2015/12/26/SublimeText/"/>
    <id>http://guowenfh.github.io/2015/12/26/SublimeText/</id>
    <published>2015-12-26T07:26:17.000Z</published>
    <updated>2015-12-31T02:57:21.724Z</updated>
    <content type="html"><![CDATA[<p><strong>详细设置 &amp;&amp; 20+插件</strong></p>
<blockquote>
<p>本文章会在本人有插件或者设置更新时，进行不定时更新<br>2015-12-31更新：NO. 21 侧边栏同步编辑窗口底色插件。</p>
</blockquote>
<p><strong>为什么要选择Sublime Text3？</strong></p>
<ul>
<li>Sublime Text3 自动保存，打开图片</li>
<li>跨平台启动快，多行选择。</li>
<li>插件，简直选不过来。</li>
<li>代码片段</li>
<li>VIM兼容模式</li>
</ul>
<h2 id="菜单栏基础功能介绍">菜单栏基础功能介绍</h2><p><img src="/images/SublimeText/Menu_Bar.jpg" alt="菜单栏介绍"></p>
<ol>
<li><code>File</code>：文档相关，新建文件,打开文件或文件夹等。</li>
<li><code>Edit</code>：文件编辑相关，复制，剪切等（CVS大法好）。除此之外还有一些强大的功能。</li>
<li><code>Selection</code>：选择相关，帮助选择代码。</li>
<li><code>Find</code>：查找替换相关。这个和其它编辑器区别好像不大。<ul>
<li><code>Ctrl+F</code>查找、<code>Ctrl+H</code>替换等。</li>
</ul>
</li>
<li><code>View</code>：对Sublime_Text编辑器本身的一些配置。<ul>
<li><code>SideBar</code>:开启侧边栏<code>Ctrl+k,b</code></li>
<li><code>Show console</code>：打开控制台窗口，安装package control需要使用.</li>
</ul>
</li>
<li><code>Goto</code>：快捷导航：下面介绍。Goto Anything</li>
<li><code>tools</code>:工具，一些命令。<ul>
<li><code>new Snippet</code>：自定义代码片段，保存到user下</li>
</ul>
</li>
<li><code>Project</code>: 项目相关，用的少。</li>
<li><code>Preferences</code>：对于sublime_text进行一些个性化定值。</li>
<li><code>Help</code>：如同名字。注册在这里</li>
</ol>
<h3 id="快捷键">快捷键</h3><ul>
<li><code>line</code>相关：<ul>
<li><code>Ctrl+Shift+D</code>：复制当前行 </li>
<li><code>Ctrl+Shift+K</code>：删除当前行 </li>
<li><code>Ctrl+j</code> 合并一行</li>
<li><code>Ctrl+Enter</code>：在当前行下添加新行。After</li>
<li><code>Ctrl+Shift+Enter</code>：在当前行上添加新行。Before</li>
</ul>
</li>
<li><code>Comment</code>注释：<ul>
<li><code>Ctrl+/</code>：行注释。 </li>
<li><code>Ctrl+Shift+/</code>：块注释</li>
</ul>
</li>
<li><code>Ctrl+Shift+P</code>：调用命令面板，快速查找，例如：改变语法模式等。<ul>
<li>模糊匹配，可以减少对快捷键的记忆。</li>
</ul>
</li>
<li><strong><code>Shift+Alt+1，2，3，4，5</code>：开启对应数字的多栏编辑</strong></li>
</ul>
<h4 id="Ctrl+P：Goto_Anything"><code>Ctrl+P</code>：Goto Anything</h4><ul>
<li><code>Ctrl+P</code>: 查找项目中的文件：<ul>
<li>直接输入名称：在不同文件中切换，<strong>支持级联的目录模式</strong></li>
<li><code>:</code>：+ 行号：<code>Ctrl+G</code> 定位到具体的行。</li>
<li><code>@</code>：+ 符号：<code>Ctrl+R</code>定位到具体的符号，例如：JS函数名，CSS选择器名。</li>
<li><code>#</code>：+ 关键字：<code>Ctrl+;</code>匹配到具体的匹配的关键字。主要是模糊匹配。</li>
</ul>
</li>
</ul>
<h4 id="多行游标">多行游标</h4><ul>
<li><code>Ctrl+D</code>：选中当前光标所在位置的<strong>单词</strong>。连续使用时，进行多光标选择，选中下一个同名单词。</li>
<li><code>Ctrl+K</code>：配合<code>Ctrl+D</code>可以<strong>跳过</strong>下一个同名单词。</li>
<li><code>Ctrl+L</code>：选择当前光标所在位置的<strong>行</strong>。连续使用时，继续选中下一行。</li>
<li><code>Ctrl+Shift+L</code>：在多行选中后，在所有选中的行后产生游标。</li>
<li><code>Alt+F3</code>：选中文档中所有的同名单词。</li>
<li><code>Shift+鼠标右键</code>：向下拖动，产生多个光标。</li>
</ul>
<h3 id="设置">设置</h3><p>使用 Ctrl+`调出console面板输入<code>sublime.log_commands(True)</code>，可以得到当前使用的命令面板进行设置的值。方便进行快捷键的绑定。</p>
<p>下面这些都可以通过命令面板快捷查找</p>
<ul>
<li><code>Settings-User</code>：个人对于sublime_text的定制。使用JSON格式，会直接覆盖掉<code>Settings-Default</code>默认设置中的内容。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User/Preferences.sublime-settings</span></span><br><span class="line"><span class="comment">//我觉得自带字体挺好的。</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"color_scheme"</span>: <span class="string">"Packages/User/SublimeLinter/Dawn (SL).tmTheme"</span>, <span class="comment">//主题</span></span><br><span class="line">    <span class="string">"draw_minimap_border"</span>: <span class="literal">true</span>, <span class="comment">// 右侧缩略图边框</span></span><br><span class="line">    <span class="string">"font_size"</span>: <span class="number">10</span>, <span class="comment">// 字体大小</span></span><br><span class="line">    <span class="string">"highlight_line"</span>: <span class="literal">true</span>, <span class="comment">// 当前行标亮</span></span><br><span class="line">    <span class="string">"save_on_focus_lost"</span>: <span class="literal">true</span>, <span class="comment">// 当前行标亮</span></span><br><span class="line">    <span class="string">"theme"</span>: <span class="string">"Spacegray Eighties.sublime-theme"</span>, <span class="comment">//主题相关</span></span><br><span class="line">    <span class="string">"word_separators"</span>: <span class="string">"./\\()\"':,.;&lt;&gt;~!@#$%^&amp;*|+=[]&#123;&#125;`~?"</span>, <span class="comment">// 双击选中中划线</span></span><br><span class="line">    <span class="string">"word_wrap"</span>: <span class="literal">true</span>, <span class="comment">//自动换行</span></span><br><span class="line">    <span class="string">"trim_trailing_white_space_on_save"</span>: <span class="literal">true</span>, <span class="comment">//自动移除行尾多余空格</span></span><br><span class="line">    <span class="string">"ensure_newline_at_eof_on_save"</span>: <span class="literal">true</span>, <span class="comment">//文件末尾自动保留一个空行</span></span><br><span class="line">    <span class="string">"disable_tab_abbreviations"</span>: <span class="literal">true</span>, <span class="comment">//禁用 Emmet 的 tab 键功能（请使用 ctrl+e）</span></span><br><span class="line">    <span class="string">"translate_tabs_to_spaces"</span>: <span class="literal">true</span>, <span class="comment">//把代码 tab 对齐转换为空格对齐</span></span><br><span class="line">    <span class="string">"tab_size"</span>: <span class="number">4</span>, <span class="comment">//空格数</span></span><br><span class="line">    <span class="string">"fade_fold_buttons"</span>: <span class="literal">false</span>, <span class="comment">//显示代码块的倒三角</span></span><br><span class="line">    <span class="string">"bold_folder_labels"</span>: <span class="literal">true</span>, <span class="comment">//侧边栏文件夹加粗</span></span><br><span class="line">    <span class="string">"auto_find_in_selection"</span>: <span class="literal">true</span> <span class="comment">//开启选中范围内搜索</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>key - Bindings-User</code>：个人对于快捷键的设置。同样会覆盖默认的设置。例如：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动改变缩进格式</span></span><br><span class="line">    &#123; <span class="string">"keys"</span>: [<span class="string">"shift+tab"</span>], <span class="string">"command"</span>: <span class="string">"reindent"</span>,<span class="string">"args"</span>:&#123;<span class="string">"single_line"</span>:<span class="literal">false</span>&#125; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="实现保存自动刷新">实现保存自动刷新</h3><p><code>tools</code>:工具下的<code>Build System</code>选择新建一个选项后，进行如下设置（注意后缀），保存到user目录下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这样设置。。地址是你的浏览器位置</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"cmd"</span> :[<span class="string">"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe"</span>,<span class="string">"$file"</span>],</span><br><span class="line">  <span class="string">"selector"</span>:[<span class="string">"text.html"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>而且选择第一个<code>auto</code>，     修改内容后按<code>Ctrl+B</code>，可以看到自动打开了chrome并且是修改后的内容。</p>
<h2 id="插件的安装与使用">插件的安装与使用</h2><h3 id="安装package_control。">安装<code>package control</code>。</h3><p>这里我使用的是sublime_text3， 2的话上官网查询代码。<br>首先打开package control的<a href="https://packagecontrol.io/installation" target="_blank" rel="external">官方网站</a>。<br>复制下面这一段代码:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os,hashlib; h = <span class="string">'2915d1851351e5ee549c20394736b442'</span> + <span class="string">'8bc59f460fa1548d1514676163dafc88'</span>; pf = <span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); <span class="keyword">by</span> = urllib.request.urlopen( <span class="string">'http://packagecontrol.io/'</span> + pf.<span class="built_in">replace</span>(<span class="string">' '</span>, <span class="string">'%20'</span>)).<span class="built_in">read</span>(); dh = hashlib.sha256(<span class="keyword">by</span>).hexdigest(); print(<span class="string">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> <span class="built_in">open</span>(os.path.join( ipp, pf), <span class="string">'wb'</span> ).<span class="built_in">write</span>(<span class="keyword">by</span>)</span><br></pre></td></tr></table></figure>
<p>在上面说的<code>View</code>–&gt;<code>Show console</code>打开控制台窗口，粘贴上面的代码，回车，然后就是等待安装了，需要一定的时间。安装完成后重启</p>
<p>使用<code>Ctrl+Shift+P</code>,打开控制面板，输入PC，效果如下，说明安装成功了。</p>
<p><img src="/images/SublimeText/package_control.jpg" alt="package control"></p>
<h3 id="安装主题">安装主题</h3><ul>
<li>按照上面的步骤，打开图片中的安装插件就行了，其实默认配色真的挺好看的</li>
<li>推荐在安装前，先去<a href="https://packagecontrol.io" target="_blank" rel="external">官方网站查看样式</a>。的样式，以及设置方法,说明文档。一般安装成功后，会自动弹出。</li>
<li>以<code>Theme - Spacegray</code>为例：</li>
</ul>
<p><img src="/images/SublimeText/Theme_Spacegray.jpg" alt="Theme - Spacegray"><br>先使用<code>Ctrl+Shift+P</code> 输入PCI，回车选择 <code>Install Package</code> 。需要等待一会加载时间，输入<code>Theme-Spacegray</code>。其实不输入完也会模糊匹配出来的。</p>
<ul>
<li>回车等待安装就好，成功后会弹出一个使用设置的页面，把其中的如下代码拷贝到<code>Settings-User</code>，保存，你会发现，默认的主题已经变成了刚刚我们查看过的主题了。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"color_scheme"</span>: <span class="string">"Packages/Theme - Spacegray/base16-eighties.dark.tmTheme"</span>,  </span><br><span class="line"><span class="string">"theme"</span>: <span class="string">"Spacegray Eighties.sublime-theme"</span></span><br></pre></td></tr></table></figure>
<p>当然，你也可以通过菜单栏，进行主题的选择。会有相同的效果。它会自动在<code>Settings-User</code>进行设置。</p>
<h2 id="个人常用插件及使用方法：">个人常用插件及使用方法：</h2><h3 id="NO-1_AdvancedNewFile：快速新建文件。">NO.1 <code>AdvancedNewFile</code>：快速新建文件。</h3><ul>
<li>假设有文件夹<code>file</code>。我们正在输入代码，又想在新的子目录下新建html文件的话用传统方式得很多步，新建目录，新建文件，保存等等等。</li>
<li>但是有了该插件之后，事情就变得简单了许多，只需要按下<code>Ctrl+Shift+N</code>，输入文件夹以及文件名，你就会看到如下效果:（回车，你会发现已经子目录下的文件已经新建完成了！）</li>
</ul>
<p><img src="/images/SublimeText/AdvancedNewFile.jpg" alt="AdvancedNewFile"></p>
<h3 id="NO-2_Nettuts+_Fetch：管理类库。">NO.2 <code>Nettuts+ Fetch</code>：管理类库。</h3><p>安装成功后输入<code>Ctrl+Shift+P</code>打开命令面板，输入<code>Fetch</code>，可以看到以下：</p>
<p><img src="/images/SublimeText/Nettuts_Fetch.jpg" alt="Nettuts+ Fetch"><br>选择<code>file</code>可以看到设置的文件。选择下载<br>配合刚刚上面的插件使用，简直完美..</p>
<h3 id="NO-3_Sidebar_Enhancements：增强侧边栏。">NO.3 <code>Sidebar Enhancements</code>：增强侧边栏。</h3><p>必装插件，无比强大，就不过多介绍了。可以在浏览器中打开，还可以配置不同文件的打开方式。<br>单单下面这一个功能就必须安装了！快捷在不同浏览器打开：参考：<a href="http://www.w3cfuns.com/blog-5431998-5401485.html" target="_blank" rel="external">SideBarEnhancements快捷键设置</a></p>
<ul>
<li>可选<code>SyncedSideBar</code>：每次打开文件，侧边栏都会同步显示该文件所在目录树中的位置</li>
</ul>
<h3 id="NO-4_Doc​Blockr：代码块注释。">NO.4 <code>Doc​Blockr</code>：代码块注释。</h3><p>可以快速的对函数进行注释。保存代码规范<br>支持多种语言。（个人觉得brackets的这个插件比Sublime Text做得好多了。）<br><code>/*</code>:回车创建一个代码块注释<br><code>/**</code>:回车在自动查找函数中的形参等等。<br>它会生成 JSDoc 格式的注释。如果你从没有使用过类似的工具，DocBlockr 会让你觉得以前没有它是如何写代码的。帮助你创造你的代码注释，通过解析功能，参数，变量，并且自动添加基本项目。</p>
<h3 id="NO-5_SublimeLinter-jshint:语法校验">NO.5 <code>SublimeLinter-jshint</code>:语法校验</h3><ul>
<li>需先安装<code>SublimeLinter</code>。</li>
<li>需先安装<code>Node.JS</code>及<code>npm</code>。</li>
<li>在cmd输入 <code>npm install -g jshint</code>，等待安装成功就好了。</li>
</ul>
<p>安装成功后，重启就可以测试代码的风格了。<br>当然还可以自定义校验规则，在该目录下使用<code>Ctrl+Shift+N</code>创建文件<code>.jshintrc</code>，在其中使用JSON格式配置校验风格。<br>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建议使用===，不使用时会有提示。</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"eqeqeq"</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>并且在左下角会有错误提示。需要注意的是内容有更改时，才会立即生效。<br>详细自定义规则：<a href="http://jshint.com/docs/options/" target="_blank" rel="external">自定义Hint校验</a></p>
<h3 id="NO-6_Git_:版本控制">NO.6 <code>Git</code> :版本控制</h3><p>可视化的操作：帮助你与你的Git repo协议进行交互。它支持很多命令像init, push, pull, branch, stash,等等。了解更多关于你在Sublime Text里面究竟能使用哪些Git功能，以提高您的工作流程。<br><a href="https://scotch.io/tutorials/using-git-inside-of-sublime-text-to-improve-workflow" target="_blank" rel="external">使用参考</a></p>
<ul>
<li><code>GitGutter</code>:<br>Sublime Text 有了 Git 插件之后，GitGutter 更好的帮助开发者查看文件之前的改动和差异，提升开发效率。</li>
</ul>
<h3 id="NO-7_Emmet：不解释。">NO.7 <code>Emmet</code>：不解释。</h3><p>中文文档：<a href="http://yanxyz.github.io/emmet-docs/css-abbreviations/vendor-prefixes/" target="_blank" rel="external">地址</a><br><a href="http://www.w3cplus.com/tools/emmet-cheat-sheet.html" target="_blank" rel="external">前端开发必备！Emmet使用手册</a></p>
<h3 id="NO-8_JsFormat：代码格式化">NO.8 <code>JsFormat</code>：代码格式化</h3><ul>
<li>JsFormat 基于 JS Beautifier，可以帮助你自动格式化 JavaScript 和 JSON。这对于阅读代码是非常有用的。</li>
<li>快捷键：<code>Ctrl + Alt + f</code> 或者，你也可以使用菜单栏。</li>
<li>可定制喜欢的格式：在 SublimeText 3 中 Preferences -&gt; Package Settings -&gt; JsFormat -&gt; Settings - Default 可以调整这些配置。</li>
</ul>
<h3 id="NO-10_jQuery：JQuery的API代码片段">NO.10 <code>jQuery</code>：JQuery的API代码片段</h3><p>我知道目前在很多地方 jQuery 看似已经落伍了，但是如果你不是建立一个交互性很强的网站或者你只是想在已有应用上添加功能，它仍然是非常有用的。</p>
<p>比如，输入<code>$.a</code>就可以让我选择<code>$.ajax()</code>，然后自动扩展成以下代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  url: <span class="string">'/path/to/file'</span>,</span><br><span class="line">  type: <span class="string">'default GET (Other values: POST)'</span>,</span><br><span class="line">  dataType: <span class="string">'default: Intelligent Guess (Other values: xml, json, script, or html)'</span>,</span><br><span class="line">  data: &#123;param1: <span class="string">'value1'</span>&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">.done(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"success"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.fail(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"error"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.always(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"complete"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="NO-11_BracketHighlighter:符号高亮">NO.11 <code>BracketHighlighter</code>:符号高亮</h3><p>该插件提供行数列高亮的各种配对的语法符号，显示在行号上。效果如下：</p>
<p><img src="/images/SublimeText/BracketHighlighter.jpg" alt="BracketHighlighter"></p>
<p>配置方法参考<a href="http://www.cnblogs.com/liu-l/p/3866458.html" target="_blank" rel="external">sublime text3下BracketHighlighter的配置方法</a></p>
<h3 id="NO-12_JavaScript_Next：完美支持ECMAScript_6">NO.12 <code>JavaScript Next</code>：完美支持ECMAScript 6</h3><ul>
<li>JavaScript Next 提供了比默认JavaScript Package更好的语法高亮，而且他完美支持ECMAScript 6。</li>
<li>建议完全使用 JavaScript Next代替JavaScript Package。</li>
</ul>
<h3 id="NO-13_CSS3:CSS3语法高亮">NO.13 <code>CSS3</code>:CSS3语法高亮</h3><ul>
<li>默认安装的Sublime Text对CSS3的支持让人抓狂，帧动画？别开玩笑了你只会看到一片白色的纯文本一样的代码。</li>
<li>事实上不光CSS3，我建议用CSS3 Package完全替代原来的CSS Package来完成语法高亮。把原来的禁用了吧</li>
</ul>
<h3 id="NO-14_Color_Highlighter_：CSS颜色高亮">NO.14 <code>Color Highlighter</code> ：CSS颜色高亮</h3><ul>
<li>这个插件我等了很久了（在使用breakets的时候发现 的，好用到爆），我最早用Sublime Text写CSS时候就在想“这堆颜色码谁知道是什么颜色”。。</li>
<li>还是brackets的牛逼</li>
<li>Color Highlighter这个插件会检测CSS文件中的颜色码，不论是Hex码或者RGB码都能很好的显示。</li>
<li>Color Highlighter能够设置成用背景色或者边框提示颜色，我一般在Settings里做这样的设置：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"ha_style"</span>: <span class="string">"filled"</span>,</span><br><span class="line">  <span class="string">"icons"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/images/SublimeText/Color_Highlighter.jpg" alt="Color Highlighter"></p>
<h3 id="NO-15Colorpicker：使用一个取色器改变颜色">NO.15<code>Colorpicker</code>：使用一个取色器改变颜色</h3><p>使用方法: <code>ctrl + shift + c</code>，快捷键有冲突，需修改。可以通过<code>ctrl+shift+p</code>：来搜索调用</p>
<p><img src="/images/SublimeText/Colorpicker.jpg" alt="Colorpicker"></p>
<h3 id="NO-16_Markdown_Editing_和_Markdown_Preview，实现预览MD">NO.16 <code>Markdown Editing</code> 和 <code>Markdown Preview</code>，实现预览MD</h3><ul>
<li>当在 Sublime Text 中编写 markdown 文件时，在浏览器中打开全是乱码，因为还没有将 markdown 文件解析成相应的 HTML. </li>
<li>这两个插件的功能就是可以用浏览器浏览 Sublime Text 中编写的 markdown文件。</li>
<li>配置：</li>
</ul>
<p>打开 Preferences-&gt;Package Settings-&gt;Markdown Preview-&gt;Setting User 将下面这句话粘贴进去。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// "浏览markdown的浏览器的路径"</span></span><br><span class="line">    <span class="string">"browser"</span> : <span class="string">"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打开Preferences-&gt;Key Binding User，添加下面一句话。</span></span><br><span class="line">&#123; <span class="string">"keys"</span>: [<span class="string">"f6"</span>], <span class="string">"command"</span>: <span class="string">"markdown_preview"</span>, <span class="string">"args"</span>: &#123;<span class="string">"target"</span>: <span class="string">"browser"</span>, <span class="string">"parser"</span>:<span class="string">"markdown"</span>&#125; &#125;,</span><br><span class="line"><span class="comment">//keys的值是以上面浏览器预览markdown文件。</span></span><br></pre></td></tr></table></figure>
<p>直接按F6就可以打开了</p>
<p>不进行这些配置的话，因为我们在前面<strong>实现保存自动刷新</strong>使用了一些操作，按<code>ctrl+b</code>,就会在该目录下，创建一个同名的html文件。<br>选中该htnl文件，再次按<code>ctrl+b</code>可以达到同样的预览效果，不过还是F6简单不是吗？</p>
<h3 id="NO-17AutoFileName：文件路径自动提示">NO.17<code>AutoFileName</code>：文件路径自动提示</h3><p>这个直接安装就可以用了，挺方便的。</p>
<h3 id="NO-18_Terminal：在Sublime_Text直接打开命令行">NO.18 <code>Terminal</code>：在Sublime Text直接打开命令行</h3><h3 id="NO-19_CSScomb_:_CSS属性排序">NO.19 <code>CSScomb</code> : CSS属性排序</h3><ul>
<li>使用参考:<a href="http://yunkus.com/article/ziyuan/331.html" target="_blank" rel="external">点击查看</a></li>
<li><a href="http://yunkus.com/article/ziyuan/333.html" target="_blank" rel="external">CSS属性排序 CSScomb 插件配置参数大全</a></li>
</ul>
<h3 id="NO-20_JavaScript_Completions和Java​Script_&amp;_Node​JS_Snippets。输入提示，代码补全">NO.20 <code>JavaScript Completions</code>和<code>Java​Script &amp; Node​JS Snippets</code>。输入提示，代码补全</h3><h3 id="NO-21_SyncedSidebarBg:自动同步侧边栏底色为编辑窗口底色。">NO.21 <code>SyncedSidebarBg</code>:自动同步侧边栏底色为编辑窗口底色。</h3><p>有人反映说安装主题后侧边栏颜色不更改，其实有两个方法，一个在<code>\Data\Packages\主题</code>修改主题配置。<br>比较麻烦，就不说了，直接安装这个插件就好了，记得重启刷新。</p>
<h3 id="其他：">其他：</h3><ul>
<li><code>LiveStyle</code>: 实时刷新双向修改<br>win下没有配置成功</li>
<li><code>IMESupport</code> ，输入法不跟随时安装</li>
<li><code>FileHeader</code> ，自动更新保存时间，文件模板</li>
<li><code>Quote​HTML</code> ，把HTML拼接成js插入字符串</li>
<li><code>CSS Format</code> ，CSS格式化</li>
<li><code>AutoPrefixer</code> ，浏览器私有属性前缀补全 (Node.js依赖)</li>
<li><code>ConvertToUTF8</code>，GBK编码兼容</li>
</ul>
<blockquote>
<p>参考如下：</p>
<ul>
<li>慕课网视频：<a href="http://www.imooc.com/learn/40" target="_blank" rel="external">前端开发工具技巧介绍—Sublime篇</a></li>
<li>慕课网视频：<a href="http://www.imooc.com/learn/333" target="_blank" rel="external">快乐的sublime编辑器</a></li>
<li>Sublime Text手冊：<a href="http://docs.sublimetext.tw/" target="_blank" rel="external">点击查看</a></li>
<li>Github资源合集<a href="https://github.com/jikeytang/sublime-text" target="_blank" rel="external">jikeytang/sublime-text</a></li>
<li>知乎Sublime Text专题<a href="https://www.zhihu.com/topic/19668076" target="_blank" rel="external">点击查看</a></li>
</ul>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p><strong>详细设置 &amp;&amp; 20+插件</strong></p>
<blockquote>
<p>本文章会在本人有插件或者设置更新时，进行不定时更新<br>2015-12-31更新：NO. 21 侧边栏同步编辑窗口底色插件。</p>
</blockquo]]>
    </summary>
    
      <category term="Sublime Text" scheme="http://guowenfh.github.io/tags/Sublime-Text/"/>
    
      <category term="开发工具" scheme="http://guowenfh.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[task0002（四）- 练习：数据处理、轮播及交互]]></title>
    <link href="http://guowenfh.github.io/2015/12/24/task0002-Exercises/"/>
    <id>http://guowenfh.github.io/2015/12/24/task0002-Exercises/</id>
    <published>2015-12-24T05:46:57.000Z</published>
    <updated>2015-12-26T12:57:02.577Z</updated>
    <content type="html"><![CDATA[<p>包括5部分：</p>
<ul>
<li>小练习1-处理用户输入</li>
<li>小练习2-日期对象的使用</li>
<li>小练习3：轮播图</li>
<li>小练习4：输入提示框</li>
<li>小练习5：界面拖拽交互</li>
</ul>
<p><a href="https://github.com/guowenfh/IFE/tree/master/task0002" target="_blank" rel="external">源码地址</a><br><a href="http://guowenfh.github.io/IFE/task0002/index.html">task0002 在线Demo</a></p>
<h2 id="小练习1：处理用户输入">小练习1：处理用户输入</h2><blockquote>
<p>这里直接可以利用原来写过的<code>util.js</code>。所以应该不是特别难。主要考察对字符串的操作，以及正则表达式的使用</p>
</blockquote>
<h3 id="任务描述">任务描述</h3><p>在<code>task0002</code>目录下创建一个<code>task0002_1.html</code>文件，以及一个<code>js</code>目录和<code>css</code>目录，在<code>js</code>目录中创建<code>task0002_1.js</code>，并将之前写的<code>util.js</code>也拷贝到<code>js</code>目录下。然后完成以下需求。</p>
<h4 id="第一阶段">第一阶段</h4><p>在页面中，有一个单行输入框，一个按钮，输入框中用来输入用户的兴趣爱好，允许用户用半角逗号来作为不同爱好的分隔。</p>
<p>当点击按钮时，把用户输入的兴趣爱好，按照上面所说的分隔符分开后保存到一个数组，过滤掉空的、重复的爱好，在按钮下方创建一个段落显示处理后的爱好。</p>
<p><strong>实现</strong></p>
<p>根据题目要求，这个地方比较简单，可以直接利用前面写过的一些函数，分成四步，进行。</p>
<ol>
<li>使用正则表达式来对字符串进行分割操作。</li>
<li><code>uniqArray</code>函数进行去重操作。</li>
<li>for循环，<code>trim</code>函数对数组项进行去除首尾空格，用来处理，该项为空的情况。</li>
<li>innerHTML进行输出。</li>
</ol>
<p>html：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">id</span>=<span class="value">"user_input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"btn"</span>&gt;</span>提交<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"user_output"</span>&gt;</span><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>task0002_1.js</code>中的js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自执行的匿名函数</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">handle_1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//其实这里没必要使用id因为数据那么少$函数直接获取标签就行</span></span><br><span class="line">    <span class="keyword">var</span> inp = $(<span class="string">"#user_input"</span>);</span><br><span class="line">    <span class="keyword">var</span> out = $(<span class="string">"#user_output"</span>);</span><br><span class="line">    $.click(<span class="string">"#btn"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = inp.value.split(<span class="regexp">/\,|\，/</span>); <span class="comment">//1.根据半角逗号分割成数组。</span></span><br><span class="line">        <span class="keyword">var</span> unValue = uniqArray(value); <span class="comment">//2.数组去重</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = unValue.length; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> trimValue = trim(unValue[i]); <span class="comment">//3.对每一项进行去除首尾空格操作</span></span><br><span class="line">            <span class="built_in">console</span>.log(trimValue);</span><br><span class="line">            <span class="keyword">if</span> (trimValue !== <span class="string">""</span>) &#123; <span class="comment">//4.只有在去除首尾空格后不为空的数组才输出。</span></span><br><span class="line">                out.innerHTML += <span class="string">"&lt;li&gt;"</span> + trimValue + <span class="string">"&lt;/li&gt;"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h4 id="第二阶段">第二阶段</h4><p>单行变成多行输入框，一个按钮，输入框中用来输入用户的兴趣爱好，允许用户用换行、空格（全角/半角）、逗号（全角/半角）、顿号、分号来作为不同爱好的分隔。</p>
<p>当点击按钮时的行为同上</p>
<p><strong>实现</strong></p>
<p>看题目描述，主要是对于第一步进行修改，第一阶段只要求对半角逗号进行处理，但是在第二阶段中，需要对<strong>“换行、空格（全角/半角）、逗号（全角/半角）、顿号、分号”</strong>进行处理。<br>主要是考察对于正则表达式的应用。</p>
<p>只需要对<code>var value = inp.value.split(/\,|\，/);</code>进行更改如下：</p>
<p><code>var value = inp.value.split(/\n|\s+|\,|\，|\、|\;|\；/);</code><br>需要注意的是：在正则表达式进行匹配这些符号时最好是前面加上转义字符。</p>
<h4 id="第三阶段">第三阶段</h4><p>用户输入的爱好数量不能超过10个，也不能什么都不输入。当发生异常时，在按钮上方显示一段红色的错误提示文字，并且不继续执行后面的行为；当输入正确时，提示文字消失。</p>
<p>同时，当点击按钮时，不再是输出到一个段落，而是每一个爱好输出成为一个checkbox，爱好内容作为checkbox的label。</p>
<p><strong>实现</strong></p>
<ul>
<li>嗯，其实这里按照题目要求应该要实时监听输入值变化，但是那样太麻烦了，，所以就直接在点击按钮的时候判断了。</li>
<li>直接判断数组长度就行了。。输入为空时，判断字符串=“”。</li>
<li>输出<code>checkbox</code>这里不过多的设置了，只是演示。</li>
</ul>
<h3 id="最终完成">最终完成</h3><p>html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">textarea</span> <span class="attribute">name</span>=<span class="value">"user_input"</span> <span class="attribute">id</span>=<span class="value">"user_input"</span> <span class="attribute">cols</span>=<span class="value">"45"</span> <span class="attribute">rows</span>=<span class="value">"10"</span>&gt;</span><span class="tag">&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"btn"</span>&gt;</span>处理并输出<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>输入的爱好数量不能超过10个，或什么都不输入<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"user_output"</span>&gt;</span><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">handle_1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> inp = $(<span class="string">"#user_input"</span>);</span><br><span class="line">    <span class="keyword">var</span> out = $(<span class="string">"#user_output"</span>);</span><br><span class="line">    $.click(<span class="string">"#btn"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = inp.value.split(<span class="regexp">/\n|\s+|\,|\，|\、|\;|\；/</span>); <span class="comment">//分割成数组。</span></span><br><span class="line">        <span class="keyword">var</span> unValue = uniqArray(value); <span class="comment">//数组去重</span></span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> len = unValue.length;</span><br><span class="line">        <span class="keyword">if</span> (len &gt; <span class="number">10</span> || unValue == <span class="string">""</span>) &#123;</span><br><span class="line">            $(<span class="string">"p"</span>).style.disautoPlay = <span class="string">"block"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">"p"</span>).style.disautoPlay = <span class="string">"none"</span>;</span><br><span class="line">            <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">var</span> trimValue = trim(unValue[i]); <span class="comment">//对每一项进行去除首尾空格操作</span></span><br><span class="line">                <span class="built_in">console</span>.log(trimValue);</span><br><span class="line">                <span class="keyword">if</span> (trimValue !== <span class="string">""</span>) &#123; <span class="comment">//只有在去除首尾空格后不为空的数组才输出。</span></span><br><span class="line">                    out.innerHTML += <span class="string">"&lt;label&gt;"</span> + <span class="string">"&lt;input type='checkbox'&gt;"</span> + trimValue + <span class="string">"&lt;/label&gt;"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>在线演示：<strong><a href="http://guowenfh.github.io/IFE/task0002/task0002_1.html">小练习1：处理兴趣列表</a></strong></p>
<h2 id="小练习2：日期对象的使用">小练习2：日期对象的使用</h2><h3 id="任务描述-1">任务描述</h3><p>在和上一任务同一目录下面创建一个<code>task0002_2.html</code>文件，在<code>js</code>目录中创建<code>task0002_2.js</code>，并在其中编码，实现一个倒计时功能。</p>
<ul>
<li>界面首先有一个文本输入框，允许按照特定的格式<code>YYYY-MM-DD</code>输入年月日；</li>
<li>输入框旁有一个按钮，点击按钮后，计算当前距离输入的日期的00:00:00有多少时间差</li>
<li>在页面中显示，距离YYYY年MM月DD日还有XX天XX小时XX分XX秒</li>
<li>每一秒钟更新倒计时上显示的数</li>
<li>如果时差为0，则倒计时停止</li>
</ul>
<h3 id="实现思路">实现思路</h3><h4 id="了解日期对象">了解日期对象</h4><p>这里主要是考察的对于日期对象的使用。</p>
<p><code>new Date()</code>。如果没有输入任何参数，则Date的构造器会依据系统设置的当前时间来创建一个Date对象。表示当前系统时间。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//时间对象创建的几种方式。</span></span><br><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> birthday = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"December 17, 1995 03:24:00"</span>);</span><br><span class="line"><span class="keyword">var</span> birthday = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"1995-12-17T03:24:00"</span>);</span><br><span class="line"><span class="keyword">var</span> birthday = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1995</span>,<span class="number">11</span>,<span class="number">17</span>);</span><br><span class="line"><span class="keyword">var</span> birthday = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1995</span>,<span class="number">11</span>,<span class="number">17</span>,<span class="number">3</span>,<span class="number">24</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>Date对象中处理时间和日期的常用方法：详细内容在<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="external">MDN</a>上</li>
</ul>
<p><img src="/images/ife/DateObject.jpg" alt="日期对象常用方法"></p>
<h4 id="正式开始：">正式开始：</h4><ol>
<li>创建时间处理函数，使用正则表达式，处理输入的值，<code>value.match(/(^\d{4})-(\d{2})-(\d{2}$)/);</code>用到了match方法和正则的分组，在我写的正则博客里应该有过详细介绍了。这里也不过的说明了。</li>
<li>使用目标时间的<code>getTime()</code>毫秒数减去得到当前的毫秒数，得到相差的毫秒数。处理它：<strong>（注意毫秒的问题）</strong><ul>
<li><code>(60 * 60 * 24)</code> ：剩余的天数。</li>
<li><code>(60 * 60) % 24)</code> :剩余的小时数。依次类推。</li>
</ul>
</li>
<li><code>innerHTML输出</code>，并且判断相差时间，改变输出的值。</li>
<li>定时器的使用。(我这里使用的<code>setTimeout()</code>，使用递归调用实现自执行)<ul>
<li>计时器<code>setTimeout(函数,延迟时间);</code>，在载入后延迟指定时间后,去执行一次表达式,仅执行一次。</li>
<li>取消计时器:<code>clearTimeout()</code>停止计时器。</li>
</ul>
</li>
<li>给按钮添加点击事件，在点击时，调用刚刚编写的的时间处理函数。</li>
</ol>
<p>在线演示：<strong><a href="http://guowenfh.github.io/IFE/task0002/task0002_2.html">小练习2：倒计时</a></strong></p>
<h2 id="小练习3：轮播图组件">小练习3：轮播图组件</h2><h3 id="任务描述-2">任务描述</h3><p>在和上一任务同一目录下面创建一个<code>task0002_3.html</code>文件，在<code>js</code>目录中创建<code>task0002_3.js</code>，并在其中编码，实现一个轮播图的功能。</p>
<ul>
<li>图片数量及URL均在HTML中写好</li>
<li>可以配置轮播的顺序（正序、逆序）、是否循环、间隔时长</li>
<li>图片切换的动画要流畅</li>
<li>在轮播图下方自动生成对应图片的小点，点击小点，轮播图自动动画切换到对应的图片</li>
</ul>
<p>效果示例：<a href="http://echarts.baidu.com/" target="_blank" rel="external">http://echarts.baidu.com/</a> 上面的轮播图（不需要做左右两个箭头）</p>
<h3 id="实现思路:">实现思路:</h3><blockquote>
<p>主要是对于考察对于定时器，以及事件绑定的处理，以及动画效果，为此我专门写了一篇博客《<a href="http://guowenfh.github.io/2015/12/21/JS-Animated-Frames/">JS完美运动框架的封装过程</a>》。 这里就直接使用里面封装好的函数了。</p>
<p>本来都要放弃组件的编写了，只想按照常规方法来写个轮播图就好，但是在先把小练习4完成的情况下，就发现了一种新方法，可以帮助我完成这个任务（强烈建议先看小练习四！）使用<code>nextElementNode</code>,图片向左切换。（不涉及任何css，我假设css都会了，也没有用到特别难css属性）</p>
</blockquote>
<p><strong>该轮播图有依赖函数。主要使用到以下函数：</strong></p>
<ul>
<li>选择器函数<code>$(class)</code>;</li>
<li>运动框架<code>startMove</code>。<ul>
<li>同时在该函数引入时，还依赖于获取实际样式函数<code>getStyle</code>。 </li>
</ul>
</li>
<li>获取当前元素在同级元素的索引<code>getIndex</code>;</li>
<li>事件代理函数：<code>delegateEvent</code>。</li>
<li>添加class与删除class元素<code>addClass、romoveClass</code>。</li>
</ul>
<h4 id="第一步：实现点击切换">第一步：实现点击切换</h4><p>编写幻灯片函数：<code>Slideshow(element)</code>。</p>
<ol>
<li>根据图片的数量创建与图片数量相同的导航小点：<code>ul&gt;li*length</code> 。设置其<code>li</code>样式，并且默认把第一个<code>li</code>设置为活动状态<code>className</code>为<code>active</code>。</li>
<li>编写点击函数<code>clickLi</code>：<ol>
<li>给<code>li</code>添加事件代理函数。</li>
<li>据点击的li的索引值算出来动画的目标值，<code>-iCurrent * getIndex(this);</code></li>
<li>移除所有<code>li</code>上的选中状态<code>active</code>：编写函数<code>removeLiClass()</code>，在后面我们还要用到它。</li>
<li>设置当前点击的<code>li</code>为选中：状态<code>active</code></li>
<li>调用运动框架实现动画效果。</li>
</ol>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Slideshow</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建li</span></span><br><span class="line">    <span class="keyword">var</span> imgArr = element.getElementsByTagName(<span class="string">"img"</span>); <span class="comment">//获取图片数量</span></span><br><span class="line">    <span class="keyword">var</span> imgArrLen = imgArr.length; <span class="comment">//缓存图片数量</span></span><br><span class="line">    <span class="keyword">var</span> createUl = <span class="built_in">document</span>.createElement(<span class="string">"ul"</span>); <span class="comment">//创建小点的ul</span></span><br><span class="line">    <span class="keyword">var</span> iCurrent = <span class="built_in">parseInt</span>(getStyle(imgArr[<span class="number">0</span>], <span class="string">"width"</span>)); <span class="comment">//获取一张图片的宽度</span></span><br><span class="line">    element.style.width = iCurrent * imgArrLen + <span class="string">"px"</span>; <span class="comment">//设置图片容器的宽度。</span></span><br><span class="line">    <span class="comment">//创建li</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = imgArrLen; i &lt; len; i++) &#123;</span><br><span class="line">        createUl.innerHTML += <span class="string">"&lt;li&gt;&lt;/li&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    element.parentNode.appendChild(createUl); <span class="comment">//插入导航</span></span><br><span class="line">    addClass(createUl, <span class="string">"Slideshow-nav"</span>); <span class="comment">//添加导航样式</span></span><br><span class="line">    addClass(createUl.getElementsByTagName(<span class="string">"li"</span>)[<span class="number">0</span>], <span class="string">"active"</span>); <span class="comment">//默认设置第一个为第当前活动的li</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//编写点击函数clickLi： </span></span><br><span class="line">    clickLi();</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 点击导航</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">clickLi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        delegateEvent(createUl, <span class="string">"li"</span>, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> iTaget = -iCurrent * getIndex(<span class="keyword">this</span>);</span><br><span class="line">            removeLiClass();</span><br><span class="line">            addClass(<span class="keyword">this</span>, <span class="string">"active"</span>); <span class="comment">//移出</span></span><br><span class="line">            startMove(element, &#123;</span><br><span class="line">                <span class="string">"left"</span>: iTaget</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">    * 用于移除所有的Li的选中状态：active</span><br><span class="line">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeLiClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> oLi = createUl.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = oLi.length; i &lt; len; i++) &#123;</span><br><span class="line">            removeClass(oLi[i], <span class="string">"active"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第二步：实现自动播放">第二步：实现自动播放</h4><blockquote>
<p>为了方便后续的封装，暂时只考虑：<strong>正序</strong>，<strong>不循环</strong>的情况！</p>
</blockquote>
<ol>
<li>创建自动播放函数<code>paly（）</code>,获取当前为选中状态<code>active</code>的li.</li>
<li>设置目标值，根据选中状态的索引+1 *width来设置。（注意是负值，同时考虑索引值+1为<code>length</code>的情况。）</li>
<li>因为不循环，需要在设置<code>(getIndex(heightLi)+1)===imgArrLen-1</code>清除定时器。(其实就是轮播到最后的时候，至于为什么是这样，可以自己研究一下，更改一下值。)</li>
<li>获取下一个元素节点，存在的话，取消现有选中状态，设置下一个元素节点为选择中，调用运动框架！实现动画，</li>
<li>添加定时器<code>setInterval()</code>，调用该函数，实现自动播放。<ul>
<li>测试几次，你会发现：点击<code>li</code>和自动播放之间存在<strong>冲突</strong>，动画效果都没做完就播放下一张了，<strong>如何解决呢？</strong></li>
</ul>
</li>
<li>给图片容器添加一个鼠标移入和移除事件（<code>mouseover、mouseover</code>）也就是<code>hover</code>上去的效果<ul>
<li>移入时，清除定时器，暂停播放。</li>
<li>移出时，开启定时器，继续轮播。</li>
<li>然后你会发现问题成功的解决了！（而且我观察了大部分的轮播，都是这个效果，移入暂停，移出继续)</li>
</ul>
</li>
</ol>
<p>这里我们的最基本的功能都实现了，代码如下：(放在<code>Slideshow()</code>函数内部)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iSpeed = <span class="number">4000</span>;<span class="comment">//定时器间隔。</span></span><br><span class="line"></span><br><span class="line">hoverElement(); </span><br><span class="line"><span class="comment">/*</span><br><span class="line">* 移入图片容器暂停，移除继续播放。</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hoverElement</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    addEvent(element.parentNode, <span class="string">"mouseover"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(timer);</span><br><span class="line">    &#125;);</span><br><span class="line">    addEvent(element.parentNode, <span class="string">"mouseout"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        timer = setInterval(autoPlay, iSpeed);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">timer = setInterval(autoPlay, iSpeed);</span><br><span class="line"><span class="comment">/*</span><br><span class="line">* 自动播放函数。</span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">autoPlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> heightLi = $(<span class="string">".Slideshow-nav .active"</span>); <span class="comment">//高亮的li</span></span><br><span class="line">    <span class="keyword">var</span> iTaget;</span><br><span class="line">    iTaget = (getIndex(heightLi) + <span class="number">1</span>) === imgArrLen ? <span class="number">0</span> : (-iCurrent * (getIndex(heightLi) + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (getIndex(heightLi) + <span class="number">1</span> === imgArrLen - <span class="number">1</span>) &#123;</span><br><span class="line">        clearInterval(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> nextLi = heightLi.nextElementSibling;</span><br><span class="line">    <span class="keyword">if</span> (nextLi) &#123;</span><br><span class="line">        removeLiClass();</span><br><span class="line">        addClass(nextLi, <span class="string">"active"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    startMove(element, &#123;</span><br><span class="line">        <span class="string">"left"</span>: iTaget</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第三步：添加配置项（题目要求完成）">第三步：添加配置项（题目要求完成）</h4><ol>
<li>获取题目要求：主要是以下三点。<ol>
<li>是否循环，默认为循环。</li>
<li>是否反向，默认不反向。只有循环时，才可反向。</li>
<li>轮播间隔时间，默认4000。</li>
</ol>
</li>
<li>如何实现？（使用JSON如下：）</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line"> * @param &#123;JSON&#125;         option       配置项</span><br><span class="line"> *   @config   &#123;String&#125;  noLoop       不循环？，默认为循环，只要存在则不循环，任意值</span><br><span class="line"> *   @config   &#123;String&#125;  reverse      是否反向，任意值。只有“noLoop”不存在时，也就是只有循环时，才执行。</span><br><span class="line"> *   @config   &#123;Number&#125;  intervalTime 轮播间隔时间（单位为毫秒），默认为4000，</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure>
<ol>
<li>在<code>Slideshow()</code>内部，以下部分进行修改或添加。<ol>
<li>先从简单的开始吧！判断<code>option.intervalTime</code>是否存在并且更改<code>iSpeed</code>的值（这样，轮播间隔时间配置就成功了），默认为4000毫秒。</li>
</ol>
</li>
<li>改变自动播放（一）：<code>autoPlay</code>函数。这里是整个改造中最复杂的部分！分几步进行。<ol>
<li>把刚刚写的<code>autoPlay</code>函数内的内容，除去<code>var heightLi = $(&quot;.Slideshow-nav .active&quot;);</code>、<code>var iTaget;</code>这两个内容，其他的都使用<code>if(option.noLoop){}</code>包裹起来。<br>这样就又完成了一个内容，当配置为不循环时的情况，就写好了。</li>
<li>既然有<code>if</code><strong>不循环</strong>的情况,那么就肯定有<code>else</code>对应<strong>循环</strong>时的情况对吧?（笑）那么在里面应该怎么做呢？</li>
<li>第一次练习时，可以不添加函数，直接使用<code>if else</code>,对应正向与反向的情况！但是，在这里为了后面的进化，且不过多的阐述，就直接使用使用函数了，就叫他<code>play(reverse)</code>吧。<br>在这里当然传入的参数是<code>option.reverse</code>，</li>
</ol>
</li>
<li><p>改变自动播放（二）：编写<code>play(reverse)</code>。</p>
<ol>
<li>第一要务就是加入<code>if eles</code>啦，用来区分，true时为反向，false为正向（默认）。</li>
<li>先来说正向的情况！其实特别简单，有两步：</li>
</ol>
<ul>
<li>第一步：删除<code>(getIndex(heightLi)+1)===imgArrLen-1</code>清除定时器的部分，只有这样才能实现循环，</li>
<li>第二步：在上面被提取到不循环的内容中(也就是第一版的<code>autoPlay()</code>)的<code>if (nextLi)</code>部分加上<code>else</code>的情况就行了！<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在下一个元素节点不存在的情况下（也就是到了最后了），设置第一个节点为活动状态，就这样正向的循环就成功了！</span></span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">    removeLiClass();</span><br><span class="line">    addClass($(<span class="string">".Slideshow-nav li"</span>), <span class="string">"active"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>反向的情况(只需要对正向循环进行修改)：</li>
</ol>
<ul>
<li>改变目标值<code>iTaget</code>。<code>getIndex(heightLi) === 0 ? -iCurrent * (imgArrLen - 1) : -iCurrent * (getIndex(heightLi) - 1);</code></li>
<li>改变下一个元素节点，为前一个元素节点<code>previousElementSibling</code>。</li>
<li>改变上面<code>else</code>的情况，为设置最后一个节点为活动状态。代码就不贴了，有兴趣的看源码吧!</li>
</ul>
</li>
<li><p>到现在函数就修改完成了。只需要在循环的情况下，调用该函数，并且传入<code>option.reverse</code>。</p>
</li>
</ol>
<p>其实到这里我们题目要求就完成了！</p>
<p>但是！不挑战一下怎么能行？</p>
<p>为什么不把左右点击切换一起实现了呢？</p>
<p>既然这样，我们就继续吧！</p>
<h4 id="第四步：扩展！左右箭头实现！">第四步：扩展！左右箭头实现！</h4><ol>
<li><p>创建并设置箭头样式(配合css使用)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建左右导航</span></span><br><span class="line"><span class="keyword">var</span> createSpan = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">addClass(createSpan, <span class="string">"left-right"</span>)</span><br><span class="line">createSpan.innerHTML = <span class="string">"&lt;span class='nav-left'&gt;&amp;lt;&lt;/span&gt;&lt;span class='nav-right'&gt;&amp;gt;&lt;/span&gt;"</span></span><br><span class="line">element.parentNode.appendChild(createSpan);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建点击事件，事件代理。</p>
</li>
<li>炸裂的函数调用。<ul>
<li>还记得我们刚刚的<code>play(reverse)</code>函数吗？刚刚的功能完全不用封装函数，那为什么要做呢？就是这里啦！</li>
<li>想想刚刚的函数实现了什么功能呢？是不是正向循环，和反向循环？，自动播放是因为在外层有定时器的缘故。</li>
<li>所以只需要调用传参就行了！</li>
</ul>
</li>
<li>传什么参数？<ul>
<li>想想左右箭头的索引，是不是0和1。这样就懂了吧！</li>
<li>对索引进行取反。传参！代码如下：</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delegateEvent(createSpan, <span class="string">"span"</span>, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> heightLi = $(<span class="string">".Slideshow-nav .active"</span>); <span class="comment">//高亮的待选li</span></span><br><span class="line">    <span class="keyword">var</span> leftIndex = !getIndex(<span class="keyword">this</span>); <span class="comment">//点击左时为true，点击又为false</span></span><br><span class="line">    <span class="comment">//移动的目标值，默认正向</span></span><br><span class="line">    play(leftIndex);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>至此，我们的轮播图组件就完成了！ 需要配合CSS使用。 通过这次封装，收益良多，感兴趣的话可以看看<a href="https://github.com/guowenfh/IFE/tree/master/task0002" target="_blank" rel="external">源码</a></p>
<p>在线演示：<strong><a href="http://guowenfh.github.io/IFE/task0002/task0002_3.html">小练习3：图片轮播组件</a></strong></p>
<h2 id="小练习4：输入提示框">小练习4：输入提示框</h2><h3 id="任务描述-3">任务描述</h3><p>在和上一任务同一目录下面创建一个<code>task0002_4.html</code>文件，在<code>js</code>目录中创建<code>task0002_4.js</code>，并在其中编码，实现一个类似百度搜索框的输入提示的功能。</p>
<p>要求如下：</p>
<ul>
<li>允许使用鼠标点击选中提示栏中的某个选项</li>
<li>允许使用键盘上下键来选中提示栏中的某个选项，回车确认选中</li>
<li>选中后，提示内容变更到输入框中</li>
</ul>
<p><strong>初级班：</strong></p>
<ul>
<li>不要求和后端交互，可以自己伪造一份提示数据例如：</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> suggestData = [<span class="string">'Simon'</span>, <span class="string">'Erik'</span>, <span class="string">'Kener'</span>];</span><br></pre></td></tr></table></figure>
<p><strong>中级班：</strong></p>
<ul>
<li>自己搭建一个后端Server，使用Ajax来获取提示数据</li>
</ul>
<p>示例：</p>
<p><img src="https://github.com/baidu-ife/ife/raw/master/2015_spring/task/task0002/img/task0002_sug.png" alt="示例"></p>
<h3 id="实现思路-1">实现思路</h3><p>这里我并没有一开始就直接进行数据获取的部分，而是进行了任务分解，如下：</p>
<h4 id="第一阶段-1">第一阶段</h4><ol>
<li>先在使用写好的<code>ul&gt;li</code>标签下，。添加3个事件<code>mouseover</code>、<code>mouseout</code>、<code>click</code>。实现点击li使其值变成输入框内的值。（直接使用事件代理）</li>
<li>对输入框添加键盘事件（对，你没看错，只有在聚焦在输入框时才触发）<ul>
<li>获取当前高亮的li。没有则设第一个为高亮<code>active</code>。</li>
<li>判断<code>keyCode</code>使用键盘下键,使用<code>nextElementSibling</code>方法获取下一个节点（向上同理）,取消当前的<code>active</code>，设置下一个为<code>active</code>。（使用键盘上下选中的效果,处理完成）</li>
<li>判断<code>keyCode</code>，获取当前状态为<code>active</code>的值，实现回车时，把其设为<code>input</code>的值。</li>
</ul>
</li>
</ol>
<ol>
<li>需要注意的地方：<ul>
<li>在移除高亮状态时，最好是遍历一遍。因为键盘与鼠标划过有可能同时触发，导致有多个高亮。 </li>
<li>错误处理</li>
</ul>
</li>
</ol>
<h4 id="第二阶段-1">第二阶段</h4><ol>
<li>删除原来的<code>ul&gt;li</code>html部分的<code>li</code>。添加对于输入框进行实时监听（这部分不在这里展开讲，如何实现大家去google吧，因为一展开就太多要说的了）。</li>
</ol>
<ul>
<li>给个参考：<a href="http://www.cnblogs.com/lhb25/archive/2012/11/30/oninput-and-onpropertychange-event-for-input.html" target="_blank" rel="external">实时监听输入框值变化</a></li>
</ul>
<ol>
<li>使用AJAX获取服务器上的数据，解析，遍历，并进行数据匹配。</li>
<li>匹配成功显示<code>ul</code>，否则设为<code>none</code>。</li>
<li>使用正则表达式的<code>match</code>方法，来获取匹配成功的把部分，使用<code>span</code>进行高亮显示。并且插入<code>ul</code></li>
<li>改造第一阶段的函数：</li>
</ol>
<ul>
<li>因为是使用的事件代理，直接对<code>ul</code>添加事件，所以需要修改的部分不是很多。</li>
<li><code>click</code>和<code>enter</code>部分获取的值，因为<code>span</code>标签的存在，需要使用正则进行处理，输出删除<code>span</code>后的值。</li>
</ul>
<p>在线演示：<strong><a href="http://guowenfh.github.io/IFE/task0002/task0002_4.html">小练习4：输入框即时提示</a></strong></p>
<h2 id="小练习5：界面拖拽交互">小练习5：界面拖拽交互</h2><ul>
<li>实现一个可拖拽交互的界面</li>
<li>如示例图，左右两侧各有一个容器，里面的选项可以通过拖拽来左右移动</li>
<li>被选择拖拽的容器在拖拽过程后，在原容器中消失，跟随鼠标移动</li>
<li>注意拖拽释放后，要添加到准确的位置</li>
<li>拖拽到什么位置认为是可以添加到新容器的规则自己定</li>
<li>注意交互中良好的用户体验和使用引导</li>
</ul>
<p><img src="https://github.com/baidu-ife/ife/raw/master/2015_spring/task/task0002/img/task0002_drag.png" alt="示例"></p>
<h3 id="实现思路：">实现思路：</h3><h4 id="第一步：封装拖拽函数">第一步：封装拖拽函数</h4><blockquote>
<p>开一个DEMO页面，实践如下：</p>
</blockquote>
<ol>
<li>了解应该用到的事件，<code>onmousedown</code>、<code>onmousemove</code>、<code>onmouseup</code>。</li>
<li>思考<strong>对谁添加事件?</strong><ol>
<li>在鼠标点击<code>div</code>时，对<code>div</code>添加<code>onmousedown</code>,表示鼠标按下。</li>
<li>在事件内给<code>document</code>添加<code>onmousemove</code>。（为啥给<code>document</code>加呢？因为给<code>div</code>加在移动过快时会跳出去）表示鼠标移动。</li>
<li>并且添加<code>document</code>添加<code>onmouseup</code>，表示鼠标已经抬起，清除移动事件，以及本身。</li>
</ol>
</li>
<li>思考<strong>如何设置对象的位置？</strong><ol>
<li>直接获取鼠标的位置并设置给<code>div</code>行不行呢？试试吧！显然，会出现问题，点击鼠标就到<code>div</code>左上角去了。</li>
<li>那么怎么改变呢？获取鼠标在<code>div</code>中的位置？对。就这样，在鼠标按下时记录鼠标在<code>div</code>中的位置.</li>
<li>在鼠标移动时，用当前的位置，减去刚刚的位置，这就是应该的值！</li>
</ol>
</li>
<li>别忘了鼠标抬起时，需要清除事件，不然鼠标就粘住了。 <blockquote>
<p>这里用到了event,事件对象的相关概念，推荐观看慕课网的视频。<a href="http://www.imooc.com/learn/138" target="_blank" rel="external">DOM事件探秘</a></p>
</blockquote>
</li>
<li>善用this。<br><strong>扩展</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 鼠标拖拽函数。</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 需要拖拽的对象</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDrag</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    addEvent(element, <span class="string">"mousedown"</span>, onmousedown);</span><br><span class="line">    <span class="comment">//鼠标按下</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onmousedown</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> oEvent = ev || event;</span><br><span class="line">        <span class="keyword">var</span> disX = oEvent.clientX - <span class="keyword">this</span>.offsetLeft;</span><br><span class="line">        <span class="keyword">var</span> disY = oEvent.clientY - <span class="keyword">this</span>.offsetTop;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">        addEvent(<span class="built_in">document</span>, <span class="string">"mousemove"</span>, onmousemove);</span><br><span class="line">        addEvent(<span class="built_in">document</span>, <span class="string">"mouseup"</span>, onmouseup);</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 鼠标移动</span><br><span class="line">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onmousemove</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> oEvent = ev || event;</span><br><span class="line">            that.style.left = oEvent.clientX - disX + <span class="string">"px"</span>;</span><br><span class="line">            that.style.top = oEvent.clientY - disY + <span class="string">"px"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 鼠标抬起删除事件</span><br><span class="line">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onmouseup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            removeEvent(<span class="built_in">document</span>, <span class="string">"mousemove"</span>, onmousemove);</span><br><span class="line">            removeEvent(<span class="built_in">document</span>, <span class="string">"mouseup"</span>, onmouseup);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第二步：布局转换函数">第二步：布局转换函数</h4><ol>
<li>两个参数，第一个参数，传入父级对象。第二个参数传入标签名，</li>
<li>循环，使用数组，对象，获取标签当前元素的位置<code>left</code>，<code>top</code>。（<code>offsetLeft</code>）。这里不能使用获取实际样式函数，因为本身就需要获取其相对父元素的位置。</li>
<li>第二个循环<ul>
<li>设置<code>left</code>，<code>top</code>值。</li>
<li>设置绝对定位。</li>
<li>取消原有的<code>margin</code>值。</li>
</ul>
</li>
<li>调用函数，把对象从文档流布局，变成绝对定位布局。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 布局转换函数</span><br><span class="line"> * @param &#123;HTMLElment&#125; element  HTML对象</span><br><span class="line"> * @param &#123;string&#125;     childEle 其内需要转换的标签名</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toPosition</span>(<span class="params">element, childEle</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> eleArr = element.getElementsByTagName(childEle);</span><br><span class="line">    <span class="keyword">var</span> aPos = [];</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = eleArr.length; i &lt; len; i++) &#123;</span><br><span class="line">        aPos[i] = &#123;</span><br><span class="line">            left: eleArr[i].offsetLeft,</span><br><span class="line">            top: eleArr[i].offsetTop</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = eleArr.length; i &lt; len; i++) &#123;</span><br><span class="line">        eleArr[i].style.left = aPos[i].left + <span class="string">"px"</span>;</span><br><span class="line">        eleArr[i].style.top = aPos[i].top + <span class="string">"px"</span>;</span><br><span class="line">        eleArr[i].style.position = <span class="string">"absolute"</span>;</span><br><span class="line">        eleArr[i].style.margin = <span class="string">"0"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在线演示：<strong><a href="http://guowenfh.github.io/IFE/task0002/task0002_5.html">小练习5：拖拽交互</a></strong></p>
<h4 id="第三步：实现拖拽">第三步：实现拖拽</h4><blockquote>
<p>前面我们已经实现了<code>setDrag(element)</code>函数，常规方法就是直使用循环，然后传入<code>element</code>。</p>
</blockquote>
<p>但是，为什么不用事件代理呢？</p>
<p>特别简单，只需要对上面写的函数进行一些简单的改装。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delegateEvent(parentElement, <span class="string">"li"</span>, <span class="string">"mousedown"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line"><span class="comment">//此处是原函数中的内容。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>现在知道为什么上面的函数会用到this了吧？</strong></p>
<h4 id="第四步：碰撞检测函数">第四步：碰撞检测函数</h4><p>先来看张图：<br><img src="/images/ife/hitDetection.jpg" alt="碰撞检测示意图"></p>
<p>是不是有瞬间豁然开朗的感觉呢？</p>
<p>获取相关值，只需要考虑不碰不上的情况就行了！。如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 碰撞检测函数</span><br><span class="line"> * @param   &#123;object&#125;  obj1 对象1</span><br><span class="line"> * @param   &#123;object&#125;  obj2 对象2</span><br><span class="line"> * @returns &#123;boolean&#125; 碰撞时返回true，否则反正false</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hitDetection</span>(<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//对象1的相关值</span></span><br><span class="line">    <span class="keyword">var</span> l1 = obj1.offsetLeft;</span><br><span class="line">    <span class="keyword">var</span> r1 = obj1.offsetLeft + obj1.offsetWidth;</span><br><span class="line">    <span class="keyword">var</span> t1 = obj1.offsetTop;</span><br><span class="line">    <span class="keyword">var</span> b1 = obj1.offsetTop + obj1.offsetHeight;</span><br><span class="line">    <span class="comment">//对象2的相关值</span></span><br><span class="line">    <span class="keyword">var</span> l2 = obj2.offsetLeft;</span><br><span class="line">    <span class="keyword">var</span> r2 = obj2.offsetLeft + obj2.offsetWidth;</span><br><span class="line">    <span class="keyword">var</span> t2 = obj2.offsetTop;</span><br><span class="line">    <span class="keyword">var</span> b2 = obj2.offsetTop + obj2.offsetHeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (r1 &lt; l1 || l1 &gt; r2 || b1 &lt; t2 || t1 &gt; b2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//没碰上</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第五步：处理各种碰撞情况">第五步：处理各种碰撞情况</h4><blockquote>
<p>这里讲起来就太复杂了。源代码中注释还是比较详细的，有兴趣可以看下</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>包括5部分：</p>
<ul>
<li>小练习1-处理用户输入</li>
<li>小练习2-日期对象的使用</li>
<li>小练习3：轮播图</li>
<li>小练习4：输入提示框</li>
<li>小练习5：界面拖拽交互</li>
</ul>
<p><a href="h]]>
    </summary>
    
      <category term="JS" scheme="http://guowenfh.github.io/tags/JS/"/>
    
      <category term="task0002" scheme="http://guowenfh.github.io/tags/task0002/"/>
    
      <category term="百度前端技术学院" scheme="http://guowenfh.github.io/tags/%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[JavaScript完美运动框架的进阶之旅]]></title>
    <link href="http://guowenfh.github.io/2015/12/21/JS-Animated-Frames/"/>
    <id>http://guowenfh.github.io/2015/12/21/JS-Animated-Frames/</id>
    <published>2015-12-21T09:17:29.000Z</published>
    <updated>2015-12-27T04:38:31.191Z</updated>
    <content type="html"><![CDATA[<h2 id="运动框架的实现思路">运动框架的实现思路</h2><blockquote>
<p>运动，其实就是在一段时间内改变<code>left</code>、<code>right</code>、<code>width</code>、<code>height</code>、<code>opactiy</code>的值，到达目的地之后停止。</p>
</blockquote>
<p>现在按照以下步骤来进行我们的运动框架的封装:</p>
<ol>
<li>匀速运动。</li>
<li>缓冲运动。</li>
<li>多物体运动。</li>
<li>任意值变化。</li>
<li>链式运动。</li>
<li>同时运动。</li>
</ol>
<h2 id="（一）匀速运动">（一）匀速运动</h2><h3 id="速度动画">速度动画</h3><h4 id="运动基础">运动基础</h4><p>思考：<strong>如何让<code>div</code>动起来?</strong><br>如下：</p>
<ol>
<li>设置元素为绝对定位，只有绝对定位后，<code>left</code>,<code>top</code>等值才生效。</li>
<li>定时器的使用（动态改变值），这里使用<code>setInterval()</code>每隔指定的时间执行代码。<ul>
<li>计时器<code>setInterval(函数,交互时间(毫秒))</code>：在执行时,从载入页面后每隔指定的时间执行代码。</li>
<li>取消计时器<code>clearInterval(函数)</code> 方法可取消由 <code>setInterval()</code> 设置的交互时间。</li>
</ul>
</li>
<li>获取当前的位置，大小等等。<code>offsetLeft</code>（当前元素相对父元素位置）。</li>
<li>速度–物体运动的快慢<ul>
<li>定时器间隔时间</li>
<li>改变值的大小</li>
</ul>
</li>
</ol>
<p>根据上面的信息我们就可以开始封装运动框架创建一个变化的<code>div</code>了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-1-动起来</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 进行运动的节点</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//定时器</span></span><br><span class="line">        element.style.left = element.offsetLeft + <span class="number">5</span> + <span class="string">"px"</span>;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你没看错，就是那么简单。但是等等， what？ 怎么不会停？WTF？</p>
<p>那是因为我们没有运动终止条件。好再还是比较简单。直接在定时器内部，判断到达目标值，清除定时器就行拉！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-2-运动终止</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 进行运动的节点</span><br><span class="line"> * @param &#123;number&#125;      iTarget 运动终止条件。</span><br><span class="line"> */</span></span><br><span class="line"> <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, iTarget</span>) </span>&#123;</span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        element.style.left = element.offsetLeft + <span class="number">5</span> + <span class="string">"px"</span>;</span><br><span class="line">        <span class="keyword">if</span> (element.offsetLeft === iTarget) &#123;<span class="comment">//停止条件</span></span><br><span class="line">            clearInterval(timer);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就这样是不是就完成了呢？已经ok了呢？<br>no。还有一些Bug需要处理。</p>
<h4 id="运动中的Bug">运动中的Bug</h4><ol>
<li>速度取到某些值会无法停止</li>
<li>到达位置后再点击还会运动</li>
<li>重复点击速度加快</li>
<li>速度无法更改</li>
</ol>
<h4 id="解决BUG">解决BUG</h4><ol>
<li>速度取到某些值会无法停止（这个Bug稍后解决，在进化过程中自然解决）</li>
<li>把运动和停止隔开(if/else)</li>
<li>在开始运动时,关闭已有定时器</li>
<li>把速度用变量保存</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-3-解决Bug</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, iTarget</span>) </span>&#123;</span><br><span class="line">    clearInterval(timer);<span class="comment">//在开始运动时,关闭已有定时器</span></span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> iSpeed = <span class="number">5</span>;<span class="comment">//把速度用变量保存</span></span><br><span class="line">        <span class="comment">//把运动和停止隔开(if/else)</span></span><br><span class="line">        <span class="keyword">if</span> (element.offsetLeft === iTarget) &#123;<span class="comment">//结束运动</span></span><br><span class="line">            clearInterval(timer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            element.style.left = element.offsetLeft + iSpeed + <span class="string">"px"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样一个简单的运动框架就完成了。但是，再等等。只能向右走？别急，我们不是定义了把速度变成为了变量吗？只需要对它进行一些处理就行啦！<br><code>var iSpeed = 5;</code><strong>–&gt;</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断距离目标位置，达到自动变化速度正负</span></span><br><span class="line"><span class="keyword">var</span> iSpeed = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (element.offsetLeft &lt; iTarget) &#123;</span><br><span class="line">    iSpeed = <span class="number">5</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    iSpeed = -<span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="透明度动画">透明度动画</h3><ol>
<li>用变量<code>alpha</code>储存当前透明度。</li>
<li>把上面的<code>element.offsetLeft</code>改成变量<code>alpha</code>。</li>
<li>运动和停止条件部分进行更改。如下：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//透明度浏览器兼容实现</span></span><br><span class="line"><span class="keyword">if</span> (alpha === iTarget) &#123;</span><br><span class="line">    clearInterval(time);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alpha += speed;</span><br><span class="line">    element.style.filter = <span class="string">'alpha(opacity:'</span> + alpha + <span class="string">')'</span>; <span class="comment">//兼容IE</span></span><br><span class="line">    element.style.opacity = alpha / <span class="number">100</span>;<span class="comment">//标准</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="（二）缓冲动画">（二）缓冲动画</h2><p>思考：<strong>怎么样才是缓冲动画？</strong></p>
<p>应该有以下几点：</p>
<ul>
<li>逐渐变慢,最后停止</li>
<li>距离越远速度越大<ul>
<li>速度由距离决定</li>
<li>速度=(目标值-当前值)/缩放系数</li>
</ul>
</li>
<li>Bug :速度取整(使用Math方法)，不然会闪<ul>
<li>向上取整。<code>Math.ceil(iSpeed)</code></li>
<li>向下取整。<code>Math.floor(iSpeed)</code></li>
</ul>
</li>
</ul>
<p>还是对速度作文章：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-4-缓冲动画</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, iTarget</span>) </span>&#123;</span><br><span class="line">    clearInterval(timer);</span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//因为速度要动态改变，所以必须放在定时器中</span></span><br><span class="line">        <span class="keyword">var</span> iSpeed = (iTarget - element.offsetLeft) / <span class="number">10</span>; <span class="comment">//(目标值-当前值)/缩放系数=速度</span></span><br><span class="line">        iSpeed = iSpeed &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(iSpeed) : <span class="built_in">Math</span>.floor(iSpeed); <span class="comment">//速度取整</span></span><br><span class="line">        <span class="keyword">if</span> (element.offsetLeft === iTarget) &#123;<span class="comment">//结束运动</span></span><br><span class="line">            clearInterval(timer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            element.style.left = element.offsetLeft + iSpeed + <span class="string">"px"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>做到这里，（速度取到某些值会无法停止)这个Bug就自动解决啦！</li>
<li>例子:缓冲菜单<ul>
<li>跟随页面滚动的缓冲侧边栏<br>在线演示：<a href="http://codepen.io/guowen921/pen/rxLOMd" target="_blank" rel="external">codepen</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>潜在问题目标值不是整数时</p>
</blockquote>
<h2 id="（三）多物体运动">（三）多物体运动</h2><p>思考：<strong>如何实现多物体运动？</strong></p>
<ul>
<li>单定时器，存在问题。每个div一个定时器</li>
<li>定时器作为对象的属性<ul>
<li>直接使用<code>element.timer</code>把定时器变成对象上的一个属性。</li>
</ul>
</li>
<li>参数的传递:物体/目标值<br>比较简单把上面框架的进行如下更改：<code>timer</code><strong>–&gt;</strong><code>element.timer</code></li>
</ul>
<p>就这样就行啦！</p>
<h2 id="（四）任意值变化">（四）任意值变化</h2><p>咳咳。我们来给div加个1px的边框。<code>boder :1px solid #000</code></p>
<p>然后来试试下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    oDiv.style.width = oDiv.offsetWidth - <span class="number">1</span> + <span class="string">"px"</span>;</span><br><span class="line">&#125;, <span class="number">30</span>)</span><br></pre></td></tr></table></figure>
<p>嗯，神奇的事情发生了！what？我设置的不是宽度在减吗？怎么尼玛增加了！ 不对啊，大兄弟。</p>
<p>究竟哪里出了问题呢？</p>
<p>一起找找资料，看看文档，原来<code>offset</code>这一系列的属性都会存在，被其他属性干扰的问题。</p>
<p>好吧，既然不能用，那么我们就顺便把任意值变化给做了吧。</p>
<h3 id="第一步：获取实际样式">第一步：获取实际样式</h3><blockquote>
<p>使用offsetLeft..等获取样式时, 若设置了边框, padding, 等可以改变元素宽度高度的属性时会出现BUG..</p>
</blockquote>
<ul>
<li>通过查找发现<code>element.currentStyle(attr)</code>可以获取计算过之后的属性。</li>
<li>但是因为兼容性的问题，需封装getStyle函数。（万恶的IE）</li>
<li>当然配合CSS的<code>box-sizing</code>属性设为<code>border-box</code>可以达到一样的效果 ? (自认为，未验证)。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 获取实际样式函数</span><br><span class="line"> * @param   &#123;HTMLElement&#125;   element  需要寻找的样式的html节点</span><br><span class="line"> * @param   &#123;String]&#125; attr 在对象中寻找的样式属性</span><br><span class="line"> * @returns &#123;String&#125; 获取到的属性</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">element, attr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//IE写法</span></span><br><span class="line">    <span class="keyword">if</span> (element.currentStyle) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.currentStyle[attr];</span><br><span class="line">    <span class="comment">//标准</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getComputedStyle(element, <span class="literal">false</span>)[attr];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="第二步：改造原函数">第二步：改造原函数</h3><ol>
<li>添加参数，<code>attr</code>表示需要改变的属性值。</li>
<li>更改<code>element.offsetLeft</code>为<code>getStyle(element, attr)</code>。<ul>
<li>需要注意的是：<code>getStyle(element, attr)</code>不能直接使用，因为它获取到的字符串,例：<code>10px</code>。</li>
<li>变量<code>iCurrent</code>使用<code>parseInt()</code>,将样式转成数字。</li>
</ul>
</li>
<li><code>element.style.left</code>为<code>element.style[attr]</code>。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-4-任意值变化</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 运动对象</span><br><span class="line"> * @param &#123;string&#125;      attr    需要改变的属性。</span><br><span class="line"> * @param &#123;number&#125;      iTarget 目标值</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, attr, iTarget</span>) </span>&#123;</span><br><span class="line">    clearInterval(element.timer);</span><br><span class="line">    element.timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//因为速度要动态改变，所以必须放在定时器中</span></span><br><span class="line">    <span class="keyword">var</span> iCurrent=<span class="number">0</span>;</span><br><span class="line">    iCurrent = <span class="built_in">parseInt</span>(getStyle(element, attr));<span class="comment">//实际样式大小</span></span><br><span class="line">        <span class="keyword">var</span> iSpeed = (iTarget - iCurrent) / <span class="number">10</span>; <span class="comment">//(目标值-当前值)/缩放系数=速度</span></span><br><span class="line">        iSpeed = iSpeed &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(iSpeed) : <span class="built_in">Math</span>.floor(iSpeed); <span class="comment">//速度取整</span></span><br><span class="line">        <span class="keyword">if</span> (iCurrent === iTarget) &#123;<span class="comment">//结束运动</span></span><br><span class="line">            clearInterval(element.timer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            element.style[attr] = iCurrent + iSpeed + <span class="string">"px"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>试一试，这样是不是就可以了呢？</p>
<blockquote>
<p>还记得上面我们写的透明度变化吗?  再试试</p>
</blockquote>
<p>果然还是不行， （废话，你见过透明度有”px”单位的么? - -<code>白眼</code> ）</p>
<h3 id="第三步：透明度兼容处理">第三步：透明度兼容处理</h3><p>思考：<strong>需要对那些属性进行修改？</strong></p>
<ol>
<li>判断<code>attr</code>是不是透明度属性<code>opacity</code> 。</li>
<li>对于速度进行处理。<ul>
<li>为透明度时，由于获取到的透明度会是小数，所以需要 * 100</li>
<li>并且由于计算机储存浮点数的问题，还需要将小数，进行四舍五入为整数。使用： <code>Math.round(parseFloat(getStyle(element, attr)) * 100)</code>。</li>
<li>否则，继续使用默认的速度。</li>
</ul>
</li>
<li>对结果输出部分进行更改。<ul>
<li>判断是透明度属性，使用透明度方法</li>
<li>否则，使用使用默认的输出格式。</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 运动框架-5-兼容透明度</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 运动对象</span><br><span class="line"> * @param &#123;string&#125;      attr    需要改变的属性。</span><br><span class="line"> * @param &#123;number&#125;      iTarget 目标值</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, attr, iTarget</span>) </span>&#123;</span><br><span class="line">    clearInterval(element.timer);</span><br><span class="line">    element.timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//因为速度要动态改变，所以必须放在定时器中</span></span><br><span class="line">        <span class="keyword">var</span> iCurrent = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (attr === <span class="string">"opacity"</span>) &#123; <span class="comment">//为透明度时执行。</span></span><br><span class="line">            iCurrent = <span class="built_in">Math</span>.round(<span class="built_in">parseFloat</span>(getStyle(element, attr)) * <span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//默认情况</span></span><br><span class="line">            iCurrent = <span class="built_in">parseInt</span>(getStyle(element, attr)); <span class="comment">//实际样式大小</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> iSpeed = (iTarget - iCurrent) / <span class="number">10</span>; <span class="comment">//(目标值-当前值)/缩放系数=速度</span></span><br><span class="line">        iSpeed = iSpeed &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(iSpeed) : <span class="built_in">Math</span>.floor(iSpeed); <span class="comment">//速度取整</span></span><br><span class="line">        <span class="keyword">if</span> (iCurrent === iTarget) &#123;<span class="comment">//结束运动</span></span><br><span class="line">            clearInterval(element.timer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (attr === <span class="string">"opacity"</span>) &#123; <span class="comment">//为透明度时，执行</span></span><br><span class="line">                element.style.filter = <span class="string">"alpha(opacity:"</span> + (iCurrent + iSpeed) + <span class="string">")"</span>; <span class="comment">//IE</span></span><br><span class="line">                element.style.opacity = (iCurrent + iSpeed) / <span class="number">100</span>; <span class="comment">//标准</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//默认</span></span><br><span class="line">                element.style[attr] = iCurrent + iSpeed + <span class="string">"px"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这里，这个运动框架就基本上完成了。但是，我们是追求完美的不是吗？</p>
<p>继续进化！</p>
<h2 id="（五）链式动画">（五）链式动画</h2><blockquote>
<p>链式动画：顾名思义，就是在该次运动停止时，开始下一次运动。</p>
</blockquote>
<p>如何实现呢？</p>
<ul>
<li>使用回调函数：运动停止时,执行函数</li>
<li>添加<code>func</code>形参（回调函数）。</li>
<li>在当前属性到达目的地时<code>iCurrent === iTarget</code>，判断是否有回调函数存在，有则执行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (iCurrent === iTarget) &#123;<span class="comment">//结束运动</span></span><br><span class="line">    clearInterval(element.timer);</span><br><span class="line">    <span class="keyword">if</span> (func) &#123;</span><br><span class="line">        func();<span class="comment">//回调函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>good，链式动画完成！距离完美还差一步！</p>
<h2 id="（六）同时运动">（六）同时运动</h2><p>思考：<strong>如何实现同时运动？</strong></p>
<ol>
<li>使用JSON传递多个值</li>
<li>使用<code>for in</code>循环，遍历属性，与值。</li>
<li>定时器问题!(运动提前停止)<ul>
<li>在循环外设置变量,假设所有的值都到达了目的值为true</li>
<li>在循环中检测是否到达目标值,若没有值未到则为false</li>
<li>在循环结束后,检测是否全部达到目标值.是则清除定时器</li>
</ul>
</li>
</ol>
<p>实现：</p>
<ol>
<li>删除<code>attr</code>与<code>iTarget</code>两个形参，改为<code>json</code></li>
<li>在函数开始时，设置一个标记<code>var flag = true; //假设所有运动到达终点.</code></li>
<li>在定时器内使用<code>for in</code>，遍历属性与目标，改写原来的<code>attr</code>与<code>iTarget</code>，为json的属性与值</li>
<li>修改运动终止条件，只有每一项的实际属性值<code>iCurrent</code>，等于目标值<code>json[attr]</code>时，<code>flag</code>才为<code>true</code>。清除定时器，判断是否回调。</li>
<li>否则，继续执行代码，直到所有属性值等于目标值。</li>
</ol>
<h2 id="完美运动框架">完美运动框架</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 获取实际样式函数</span><br><span class="line"> * @param   &#123;HTMLElement&#125;   element  需要寻找的样式的html节点</span><br><span class="line"> * @param   &#123;String]&#125; attr 在对象中寻找的样式属性</span><br><span class="line"> * @returns &#123;String&#125; 获取到的属性</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">element, attr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//IE写法</span></span><br><span class="line">    <span class="keyword">if</span> (element.currentStyle) &#123;</span><br><span class="line">        <span class="keyword">return</span> element.currentStyle[attr];</span><br><span class="line">        <span class="comment">//标准</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getComputedStyle(element, <span class="literal">false</span>)[attr];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 完美运动框架</span><br><span class="line"> * @param &#123;HTMLElement&#125; element 运动对象</span><br><span class="line"> * @param &#123;JSON&#125;        json    属性：目标值      </span><br><span class="line"> *   @property &#123;String&#125; attr    属性值</span><br><span class="line"> *   @config   &#123;Number&#125; target  目标值</span><br><span class="line"> * @param &#123;function&#125;    func    可选，回调函数，链式动画。</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startMove</span>(<span class="params">element, json, func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>; <span class="comment">//假设所有运动到达终点.</span></span><br><span class="line">    clearInterval(element.timer);</span><br><span class="line">    element.timer = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> json) &#123;</span><br><span class="line">            <span class="comment">//1.取当前的属性值。</span></span><br><span class="line">            <span class="keyword">var</span> iCurrent = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (attr === <span class="string">"opacity"</span>) &#123; <span class="comment">//为透明度时执行。</span></span><br><span class="line">                iCurrent = <span class="built_in">Math</span>.round(<span class="built_in">parseFloat</span>(getStyle(element, attr)) * <span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//默认情况</span></span><br><span class="line">                iCurrent = <span class="built_in">parseInt</span>(getStyle(element, attr)); <span class="comment">//实际样式大小</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//2.算运动速度,动画缓冲效果</span></span><br><span class="line">            <span class="keyword">var</span> iSpeed = (json[attr] - iCurrent) / <span class="number">10</span>; <span class="comment">//(目标值-当前值)/缩放系数=速度</span></span><br><span class="line">            iSpeed = iSpeed &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(iSpeed) : <span class="built_in">Math</span>.floor(iSpeed); <span class="comment">//速度取整</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//3.未到达目标值时，执行代码 </span></span><br><span class="line">            <span class="keyword">if</span> (iCurrent != json[attr]) &#123;</span><br><span class="line">                flag = <span class="literal">false</span>; <span class="comment">//终止条件</span></span><br><span class="line">                <span class="keyword">if</span> (attr === <span class="string">"opacity"</span>) &#123; <span class="comment">//为透明度时，执行</span></span><br><span class="line">                    element.style.filter = <span class="string">"alpha(opacity:"</span> + (iCurrent + iSpeed) + <span class="string">")"</span>; <span class="comment">//IE</span></span><br><span class="line">                    element.style.opacity = (iCurrent + iSpeed) / <span class="number">100</span>; <span class="comment">//标准</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123; <span class="comment">//默认</span></span><br><span class="line">                    element.style[attr] = iCurrent + iSpeed + <span class="string">"px"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4. 运动终止，是否回调</span></span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                clearInterval(element.timer);</span><br><span class="line">                <span class="keyword">if</span> (func) &#123;</span><br><span class="line">                    func();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运动框架总结">运动框架总结</h2><ul>
<li>运动框架演变过程</li>
</ul>
<table>
<thead>
<tr>
<th>框架</th>
<th>变化</th>
</tr>
</thead>
<tbody>
<tr>
<td>startMove(element)</td>
<td>运动</td>
</tr>
<tr>
<td>startMove(element,iTarget)</td>
<td>匀速–&gt;缓冲–&gt;多物体</td>
</tr>
<tr>
<td>startMove(element,attr,iTargrt)</td>
<td>任意值</td>
</tr>
<tr>
<td>startMove(element,attr,iTargrt,func)</td>
<td>链式运动</td>
</tr>
<tr>
<td>startMove(element,json,func)</td>
<td>多值(同时)–&gt;完美运动框架</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="运动框架的实现思路">运动框架的实现思路</h2><blockquote>
<p>运动，其实就是在一段时间内改变<code>left</code>、<code>right</code>、<code>width</code>、<code>height</code>、]]>
    </summary>
    
      <category term="JS" scheme="http://guowenfh.github.io/tags/JS/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[task0002（三）- BOM + AJAX]]></title>
    <link href="http://guowenfh.github.io/2015/12/19/task0002-BOM&&AJAX/"/>
    <id>http://guowenfh.github.io/2015/12/19/task0002-BOM&&AJAX/</id>
    <published>2015-12-18T16:08:41.000Z</published>
    <updated>2015-12-18T16:26:38.745Z</updated>
    <content type="html"><![CDATA[<h2 id="BOM">BOM</h2><p>实现以下函数</p>
<h3 id="判断是否为IE浏览器">判断是否为IE浏览器</h3><ul>
<li>这里应该说一下，在从网上了解到的资料来看，在对于某个功能事件的时候不要去做浏览器检测，而应该做特性检测。这样更符合要求，且浏览器的<code>UserAgent</code>可人为修改</li>
<li>需要实现的话，ie11的版本号中并没有<code>msie:</code>。只能通过<code>rv:</code>获得。所以需进行一些处理。但是该属性同样可以返回火狐浏览器的版本号<code>- -。</code>所以还需要多加一层判断。查找是否存在<code>Trident\/7.0;</code></li>
<li>使用正则表达式的<code>match</code>方法,详细见我写的正则表达式的博客。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断是否为IE浏览器，返回-1或者版本号</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isIE</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> uUserAgent = navigator.userAgent; <span class="comment">//保存浏览器的userAgent</span></span><br><span class="line">    <span class="keyword">var</span> ieAgent = uUserAgent.match(<span class="regexp">/msie (\d+.\d+)/i</span>);</span><br><span class="line">    <span class="keyword">if</span> (ieAgent) &#123;</span><br><span class="line">        <span class="keyword">return</span> ieAgent[<span class="number">1</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (uUserAgent.match(<span class="regexp">/Trident\/7.0;/i</span>)) &#123; <span class="comment">//处理到ie11.</span></span><br><span class="line">            ieAgent = uUserAgent.match(<span class="regexp">/rv:(\d+.\d+)/i</span>);</span><br><span class="line">            <span class="keyword">return</span> ieAgent[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">//不是ie浏览器。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Cookie相关">Cookie相关</h3><p>秒味js的免费课程，把cookie讲的很好。</p>
<h4 id="什么是cokie">什么是cokie</h4><ul>
<li><p>页面用来保存信息</p>
<ul>
<li>比如:自动登入/保存用户名</li>
</ul>
</li>
<li><p>cookie的特性</p>
<ul>
<li>同一个网站中所有页面共享一套cookie</li>
<li>数量/大小有限</li>
<li>过期时间</li>
</ul>
</li>
<li><p>JS中使用cookie</p>
<ul>
<li><code>document.cookie</code></li>
</ul>
</li>
</ul>
<h4 id="设置cookie">设置cookie</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 设置cookie</span><br><span class="line"> * @param &#123;String&#125; cookieName  设置cookie名</span><br><span class="line"> * @param &#123;String&#125; cookieValue 对对应的cookie名</span><br><span class="line"> * @param &#123;Number&#125; expiredays  过期的时间(多少天后)</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">cookieName, cookieValue, expiredays</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    oDate.setDate(oDate.getDate() + expiredays);</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookieName + <span class="string">"="</span> + cookieValue + <span class="string">";expires="</span> + oDate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取cookie值">获取cookie值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span><br><span class="line"> * 获取cookie</span><br><span class="line"> * @param   &#123;String&#125; cookieName 待寻找的cookie名</span><br><span class="line"> * @returns &#123;String&#125; 返回寻找到的cookie值,无时为空</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">cookieName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.split(<span class="string">"; "</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> arr2 = arr[i].split(<span class="string">"="</span>);</span><br><span class="line">        <span class="keyword">if</span> (arr2[<span class="number">0</span>] == cookieName) &#123;</span><br><span class="line">            <span class="keyword">return</span> arr2[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除cookies">删除cookies</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 删除cookie</span><br><span class="line"> * @param &#123;String&#125; cookieName 待删除的cookie名</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeCookie</span>(<span class="params">cookieName</span>) </span>&#123;</span><br><span class="line">    setCookie(cookieName, <span class="string">"1"</span>, -<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="扩展阅读：">扩展阅读：</h3><h4 id="sessionStorage、localStorage_和_cookie_之间的区别">sessionStorage、localStorage 和 cookie 之间的区别</h4><ul>
<li><strong>共同点</strong><br>  都是保存在浏览器端，且同源的。都是键值对存储。</li>
<li><strong>区别</strong></li>
</ul>
<table>
<thead>
<tr>
<th>特性</th>
<th>Cookie</th>
<th>localStorage</th>
<th>sessionStorage</th>
</tr>
</thead>
<tbody>
<tr>
<td>数据的声明周期</td>
<td>一般由服务器生成，可设置失效时间。如果在浏览器端生成Cookie，默认是关闭浏览器后失效</td>
<td>除非被清除，否则永久保存</td>
<td>仅在当前会话下有效，关闭页面或关闭浏览器后被清除</td>
</tr>
<tr>
<td>存放数据大小</td>
<td>4K左右</td>
<td>一般为5MB</td>
<td>同左（话说markdown不支持跨列表格，只能用html写，懒得麻烦了-_-）</td>
</tr>
<tr>
<td>与服务器端通信</td>
<td>每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题</td>
<td>仅在客户端（即浏览器）中保存，不参与和服务器的通信</td>
<td>同左</td>
</tr>
<tr>
<td>易用性</td>
<td>需要程序员自己封装，原生的Cookie接口不友好</td>
<td>原生接口可以接受，亦可再次封装来对Object和Array有更好的支持</td>
<td>同左</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>安全性</strong><br>  cookie 中最好不要放置任何明文的东西。而且特别需要注意敏感数据的存放。不是什么数据都适合放在 Cookie、localStorage 和 sessionStorage中的。使用它们的时候，需要时刻注意是否有代码存在 XSS 注入的风险。</li>
<li>参考：<a href="http://jerryzou.com/posts/cookie-and-web-storage/" target="_blank" rel="external">详说 Cookie, LocalStorage 与 SessionStorage</a></li>
</ul>
<h2 id="Ajax">Ajax</h2><h3 id="任务描述">任务描述</h3><p>学习Ajax，并尝试自己封装一个Ajax方法。实现如下方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// your implement</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用示例：</span></span><br><span class="line">ajax(</span><br><span class="line">    <span class="string">'http://localhost:8080/server/ajaxtest'</span>, </span><br><span class="line">    &#123;</span><br><span class="line">        data: &#123;</span><br><span class="line">            name: <span class="string">'simon'</span>,</span><br><span class="line">            password: <span class="string">'123456'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        onsuccess: <span class="function"><span class="keyword">function</span> (<span class="params">responseText, xhr</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(responseText);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>options是一个对象，里面可以包括的参数为：</p>
<ul>
<li>type: <code>post</code>或者<code>get</code>，可以有一个默认值</li>
<li>data: 发送的数据，为一个键值对象或者为一个用&amp;连接的赋值字符串</li>
<li>onsuccess: 成功时的调用函数</li>
<li>onfail: 失败时的调用函数</li>
</ul>
<h3 id="实现如下：">实现如下：</h3><blockquote>
<p>专门用两篇博客来记录了一下AJAX的学习过程，以及该函数的完成过程<br><a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/">Ajax入门（一）从0开始到一次成功的GET请求</a><br><a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/">Ajax入门（二）Ajax函数封装</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * AJAX函数封装</span><br><span class="line"> * @param &#123;string&#125; url     请求地址（必须）</span><br><span class="line"> * @param &#123;object&#125; options 发送请求的选项参数</span><br><span class="line"> *   @config &#123;string&#125; [options.type] 请求发送的类型。默认为GET。</span><br><span class="line"> *   @config &#123;Object&#125; [options.data] 需要发送的数据。</span><br><span class="line"> *   @config &#123;Function&#125; [options.onsuccess] 请求成功时触发，function(oAjax.responseText, oAjax)。（必须）</span><br><span class="line"> *   @config &#123;Function&#125; [options.onfail] 请求失败时触发，function(oAjax)。(oAJax为XMLHttpRequest对象)</span><br><span class="line"> *</span><br><span class="line"> *@returns &#123;XMLHttpRequest&#125; 发送请求的XMLHttpRequest对象</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建ajax对象</span></span><br><span class="line">    <span class="keyword">var</span> oAjax = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 此处必须需要使用window.的方式,表示为window对象的一个属性.不存在时值为undefined,进入else</span><br><span class="line">         * 若直接使用XMLHttpRequest,在不支持的情况下会报错</span><br><span class="line">         **/</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="comment">//IE6以上</span></span><br><span class="line">        oAjax = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oAjax = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.连接服务器</span></span><br><span class="line">    <span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line">    <span class="keyword">var</span> param = <span class="string">""</span>; <span class="comment">//请求参数。</span></span><br><span class="line">    <span class="comment">//只有data存在，且为对象使才执行</span></span><br><span class="line">    <span class="keyword">var</span> data = options.data ? options.data : -<span class="number">1</span>; <span class="comment">//缓存data</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> (data) === <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> data) &#123; <span class="comment">//请求参数拼接</span></span><br><span class="line">            <span class="keyword">if</span> (data.hasOwnProperty(key)) &#123;</span><br><span class="line">                param += key + <span class="string">"="</span> + data[key] + <span class="string">"&amp;"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        param.replace(<span class="regexp">/&amp;$/</span>, <span class="string">""</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        param = <span class="string">"timestamp="</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.发送请求</span></span><br><span class="line">    <span class="keyword">var</span> type = options.type ? options.type.toUpperCase() : <span class="string">"GET"</span>;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">"GET"</span>) &#123;</span><br><span class="line">        oAjax.open(<span class="string">"GET"</span>, url + <span class="string">"?"</span> + param, <span class="literal">true</span>);</span><br><span class="line">        oAjax.send();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oAjax.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">        oAjax.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">        oAjax.send(param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.接收返回</span></span><br><span class="line">    <span class="comment">//OnRedayStateChange事件</span></span><br><span class="line">    oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (oAjax.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oAjax.status === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="comment">//请求成功。形参为获取到的字符串形式的响应数据</span></span><br><span class="line">                options.onsuccess(oAjax.responseText, oAjax);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//先判断是否存在请求失败函数</span></span><br><span class="line">                <span class="comment">//存在时，形参为XMLHttpRequest对象，便于进行错误进行处理</span></span><br><span class="line">                <span class="keyword">if</span> (options.onfail) &#123;</span><br><span class="line">                    options.onfail(oAjax);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> oAjax;<span class="comment">//发送请求的XMLHttpRequest对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="BOM">BOM</h2><p>实现以下函数</p>
<h3 id="判断是否为IE浏览器">判断是否为IE浏览器</h3><ul>
<li>这里应该说一下，在从网上了解到的资料来看，在对于某个功能事件的时候不要去做浏览器检测，而应该做特性检测。这样更符合要求，且]]>
    </summary>
    
      <category term="JS" scheme="http://guowenfh.github.io/tags/JS/"/>
    
      <category term="task0002" scheme="http://guowenfh.github.io/tags/task0002/"/>
    
      <category term="百度前端技术学院" scheme="http://guowenfh.github.io/tags/%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[《老子是癞蛤蟆》]]></title>
    <link href="http://guowenfh.github.io/2015/12/18/LaoZiShiLaiHaMa/"/>
    <id>http://guowenfh.github.io/2015/12/18/LaoZiShiLaiHaMa/</id>
    <published>2015-12-18T14:19:28.000Z</published>
    <updated>2015-12-26T11:35:35.805Z</updated>
    <content type="html"><![CDATA[<h2 id="为什么我会喜欢《老子是癞蛤蟆》这本书？">为什么我会喜欢《老子是癞蛤蟆》这本书？</h2><blockquote>
<p>说实话这本书有很多三观不正的地方，比如男主的后宫群，里面描述的各种关系等等。。。毕竟一本YY小说嘛，但是作为一个有思想的人，读书不都是应该取其精华的吗？</p>
<p>我想说的是：<strong>敢于吃天鹅肉的才是好癞蛤蟆</strong></p>
</blockquote>
<ul>
<li>一个隐富二代的奋斗史。（比你有钱的人，比你还努力，你在干嘛？）</li>
<li>一个男人的成长史。（人嘛，从来都不是一开始就天下无敌的。随着各种各样的经历，看的书越来越多，才能慢慢成熟）</li>
<li>对于感情的极致描写。（宠溺孙子到了极点的奶奶，胡璃之死，张乌梅的日记）很多事，可能家里确实做的不对，但是相信家人总是想着为你好，试着多一点理解。</li>
<li>对于努力的极致描写。（袁树，沈大元帅，项如意）请多努力一点，吃苦一点，总会有苦尽甘来的一天。</li>
<li>运动（早晚各10圈，一个好的身体才能支持你想要完成的事情。）</li>
<li>偏执（假如说别人对于赵甲第的期望值是100分的话，那么他这个偏执狂就自己在往120分上努力。疯魔状态）</li>
<li>忠诚（韩道德：“韩道德，你就算一条狗，人若以国士待我，我必以国士报之”）</li>
<li>读书（笔记达百万字？四年512本书？国考废纸卖141块？）</li>
<li>专注（工行模型，闭关）</li>
<li>浪子回头。（不跳的马小跳）</li>
<li>做人。</li>
<li>…… 太多太多，每一次看，都能从里面学到自己应该要去改变的地方。</li>
</ul>
<blockquote>
<p>下面摘抄自《老子是癞蛤蟆》的段落（侵删）</p>
</blockquote>
<h2 id="开学典礼">开学典礼</h2><p>结果看到一个像门卫的老头踏着一双布鞋自顾自拿了一个话筒，就走到演讲台，没有发言稿，没有主持人预报，咳嗽了两声，不温不火道：“各位同仁，各位同学，我今天不想代表谁发言，只是以一个已经在本校扎根足足50年、并即将离开这所学校的老人这么个身份，跟2000多名新生说几句话。”</p>
<p>　　老人嗓音并不大，但清晰传到体育馆内每一个人耳朵里去。</p>
<p>　　台下一下子议论纷纷，都在窃窃私语。</p>
<p>　　老人一只手拿话筒，另一只手依然背负身后，厚重的老学究眼镜，踩着一双廉价橡胶底布鞋，一身土老帽的装扮，不理睬台下的喧闹，继续道：“我们身处的学区有个不太准确的叫法，杨浦大学城，这块土地上有复旦，有同济，有二军大，还有财大，还有呢？我不太记得住了，相信你们也一定不太清楚，这就是说，如果有人问起我们这所学校，他好不容易听清楚你的解释后，会恍然大悟，哦，就是在同济和二军大边上那所大学啊。或者等有一天你去上海市区逛街，等不到公交车，坐出租车来杨浦大学城，司机一定也一样不知道这么个地儿，所以你还得说，师傅，你干脆先把我送到同济大学吧。”</p>
<p>　　全场哄然大笑。</p>
<p>　　老校长也笑了，只是原先谈笑风生的主席台却鸦雀无声，一个个噤若寒蝉。</p>
<p>  老人轻轻摘下眼镜，用衬衫擦了擦，戴上后继续说道：“所以坦白说，这不是一所能让你说出去就可以赢得喝彩和羡慕的大学，我不知道2000多名学子中有多少是得意洋洋而来，觉得已经九九八十一难过后，可以逍遥快活了，也不知道又有多少是垂头丧气而来，只是混个文凭，然后就走上社会，给复旦学子北大清华学子们打杂做下手，跑跑腿端茶送水之类的。</p>
<p>  对此，我这个20岁那年就进入本校，然后就没有再离开的老头子还是想说点心里话，人的一生只有一个终点，却有很多个起点，从娘胎出生起是第一个大起点，这个谁都无法更改，接下来小学升初中，初中升高中，又是两个新起点，然后很多孩子就把高中升大学提前看作人生的终点了，这都是一种不负责任，18岁以后，你可以不必对你父母负责，但起码你得学会开始对自己负责。</p>
<p>  我记得有这么一句话，是你们某位学长一次醉酒后跟我说的：<strong>就是被人踩得像一滩烂泥，也要捏出狗尾巴花来。</strong></p>
<p>  如果我没有记错，他来自一个贫困县，每年学费都是欠着，然后都是靠他在学校拿奖学金和两个假期各做四份杂工和家教一块钱一块钱攒出来的，到毕业那天他跟我说这句话，那顿酒还是我付的钱。现在，这个大学四年期间从图书馆破本校纪录借了512本书的家伙，可能再过十来年等他走出国家发改委，再来上海，就是我的领导了。”</p>
<p>　　这一次笑声已经稀疏很多。</p>
<p>　　老校长笑了笑，环视台下2000多张稚嫩面孔，道：“我不要求你们跟那位学长一样每年借一百多本书，我觉得一年大概30多本就差不多了，当然必须是教材之外的书籍，说实话，<strong>大学拼命要你们读的书，反而是不太有用的东西，你们自己愿意去阅读去咀嚼去反思的作品，才是影响你们一生的精神财富。</strong></p>
<p>  <strong>我一个普普通通的农民子弟，20岁艰辛考上大学，26岁开始做老师，教书育人到今日，就只证明了一件事情，哪怕是一只癞蛤蟆，能够几十年如一日地充实自己，迟早都有跳出池塘吃上天鹅肉的一天。</strong><br>  <strong>这个天鹅肉可以是桃李满天下，可以是抱得美人归，也可以是功成名就光耀门楣，还可以是做一名伟大的金融家，我问心无愧了，没有遗憾了，也一直在等你们自认没有对自己愧疚的那一天。</strong></p>
<p>  也许听到这里，很多同学会问，凭什么你这么所不起眼的学校就要求我们奋发图强，是啊，这所学校既没有中国大学泛滥成灾的大楼，也没有几位中国学府集体漠视很多年的大师，凭什么？”</p>
<p>　　老校长停顿了一下，指了指自己，又指了指台下全场，“<strong>凭自己。</strong>”</p>
<p>　　全场沉默。</p>
<p>　　老人恢复轻松笑脸道：“好了，耽误大家那么多听歌看报纸的时间，很抱歉。散会。”</p>
<h2 id="毕业典礼。">毕业典礼。</h2><p>　　老校长没有做隆重的毕业致辞，仅是做了个简短并且破格的发言，几乎可以算作一场个人表彰。</p>
<p>　　“我们学校还是那个不怎么出名的学校，师资一般，就业率一般，藏书量一般，什么都很平常，还是比不上临近那些个财大气粗的复旦啊同济啊之类的名牌学。</p>
<p>  所以我如果要说让你们这帮在这里呆了四年可能只有失望的孩子认可‘我以学校为荣，学校以你为荣’，没几个人当回事，所以我在这里，不奢望什么，只希望以后听到有人骂这所学校的时候，出来说一句我们学校是不咋样但你们外人一边凉快去。</p>
<p>  可能有些学生已经知道，你们当中有人在去年国考拿下了170分，别说你们不信，我都不信，我还专门打电话去上海教委那边确认，说没错，是170分。那边一个我的学生都好几年没跟我拜年了，正月里特意跑来跟我道贺，说自己母校很不错，听到这话，我是高兴又不高兴。其中滋味，就不细说了。</p>
<p>  我要说的是这个考了170分的学生，名字不去提，其实教学楼那边很多老师都认识，尤其是跟我办公室一层那些个官帽没我大肚子倒是有我两个大的领导们，肯定记得，因为去年8月9月的时候，这个学生就窝在同一层的小房间，做一个连经济学者都觉得太复杂看不懂的模型，一做就是两个月，后来，我们这些闲着没事的校领导，当然也包括我，就得出一个挺有意思的结论：<strong>那穿着很熏人衣服一脸胡茬的年轻孩子如果是空手冲向洗手间，那肯定是上小号，如果说带上了纸笔，不用猜，是上大号了。</strong></p>
<p>  你们谁有兴趣，可以把工行10年的社会责任模型翻出来研究一下，就是这个学生做的。但哪怕是这样，我还是不信他能考出170，我要去考，这个分数，除以2，还差不多嘛，所以我很纳闷，凭什么你一个二本大学生考得出来？</p>
<p>  我就把他喊到办公室，问他怎么考出来的，这小子估摸着是在我办公室蹭吃蹭喝习惯了，随便说了一句看书做题来应付我，我当然不满意，说你小子不说出个子丑寅卯，毕业生扣下。</p>
<p>  结果他想了想，很认真对我说开始<strong>冲刺国考的7个月</strong>，考完以后把真题集、做过的行测试卷、申论材料这些乱七八糟全当废纸卖了，讨价还价以后<strong>一斤卖7毛钱，他卖了140块9毛钱</strong>，收废纸的给了他141块整，我问他这些钱能不能请我吃顿饭？</p>
<p>  这小子笑着说说报名费花去96块，还剩下47块。后来我和他找了个附近的大排挡，这段饭，是我这十几年来吃得最舒坦的一顿饭，因为我之前总觉得做了三十来年的狗屁校长，还不如最早的二十多年普通教师来得有用，吃完饭的时候，我对这个学生说。</p>
<p> <strong>“你不用以学校为荣，但学校以你为荣。”</strong></p>
<p>　　全场寂静。</p>
<p>  老校长顿了一下，依然是不急不缓的特色语调：“记得四年前开学典礼上跟耽误你们看报纸听歌的时候，有说到<strong>凭什么要你们奋发图强，答案是凭你们自己</strong>。</p>
<p>  <strong>今天，我再唠叨一句，希望哪一天你们参加这所学校几几年校庆的时候，可以对新校长理直气壮说一句‘学校要以我为荣’。</strong></p>
<p>  好了，毕业！”</p>
<h2 id="赵甲第回校演讲">赵甲第回校演讲</h2><p>  当一身休闲装的他站在讲台上，看着大教室黑压压一片的脑袋脸孔，有点骑虎难下，尤其是还有老校长亲自坐镇，大半校领导都坐在最后一排，这待遇，罕见。赵甲第深呼吸了几下，挤出一个笑脸，开门见山自嘲道：</p>
<p>  “这次老校长突然跟我说要开个讲座，一开始打死不答应，可架不住老校长威胁，只能硬着头皮来，到学校门口的时候都没想好该讲什么，光顾着紧张了。老校长说让我随便说，我就真的随便说了。”</p>
<p>　　响起一些笑声。</p>
<p>　　“不管你们信不信，我也仇富，也当过愤青。当然更打过架，不过胜多输少，高中挨过不少的警告处分，写过情书，但不怎么能收到情书，因为高中打篮球总是被盖帽给白马王子们找信心，踢足球总是跑最多触球最少的那个家伙，也会嫉妒那些长得比我帅的，羡慕口才比我好的，崇拜那些敢在教室跟女朋友亲嘴的。</p>
<p>  说这些，就是想说我的高中跟你们的没两样。考进这所学校，说实话没什么感觉，唯一记忆深刻的两件事，一件就是悲愤我们学校漂亮学姐太少。”</p>
<p>　　台下笑声明显多了点。</p>
<p>　　赵甲第笑了笑，一口洁白的牙齿，是很阳光向上，“第二件事，就是老校长在开学典礼上的那些话，但那会儿只是觉得这学校破破烂烂，跟复旦同济一比就跟丫鬟见着小姐一样，寒碜。但好歹有个不太一样的校长，总算没太大失望，大学四年，那么多日子总得过不是？<br>　　<br>　　除了中途休学一年，三年里跟在座的学弟学妹一样为了生存去学校食堂，价格死贵，东西死难吃，吃来吃去吃了一肚子的腹诽，不知道现在食堂伙食咋样了。”</p>
<p>　　台下开始互动：“一个德性！”<br>　　赵甲第望向后排玩笑道：“老校长，给改善改善？”<br>　　老校长呵呵笑道：“我亲手抓一抓好了，总不能让你白来。”</p>
<p>　　一阵雀跃欢呼。</p>
<p>　　赵甲第继续：“因为要打着听讲座的旗号去各个学校踩点，我买了两辆坐骑，第一辆自行车挂了两把锁都给偷了，真佩服那哥们的本事。三年下来把杨浦校区碾压了无数圈，觉得有些个复旦妹子确实挺耐看，我们学校，呃，只能说还好还好。”<br>　　一个被室友拉着来听讲座的漂亮mm举手道：“抗议。”<br>　　赵甲第笑道：“我应该晚生两年。”<br>　　哄堂大笑。</p>
<p>　　赵甲第犹豫了一下，笑容灿烂道：“现在想起来，真的挺怀念大学，跟室友一起翘课睡觉，一起去网吧通宵游戏，不过如果有美女上课，我总是不太舍得逃课。跟班上牲口些好不容易蜗牛速度下载来的爱情动作片，还会故意把音箱开到最大，对，就是29栋，被很多女生向校方举报的那个地方。”</p>
<p>　　一哥们嚷道：“学长，我就是29栋的！”<br>　　赵甲第打趣道：“那这个优良传统就靠你们发扬光大了。”<br>　　女生们会心一笑，没有丝毫反感。<br>　　这个学长，真是不太一样啊。</p>
<p>　　赵甲第似乎渐入佳境，不再有任何拘谨，轻松道：“刚才到门口看到这么多人，尤其是连走廊都有，我这手都在抖，现在好点了。<br>  说了这么多随便的，那就稍微说点不那么随便的。都是自己的心得，可能片面，你们拣爱听的就行。</p>
<p>  一个曾经让我当作超越目标的男人说过，他之所以成功，是因为他不读书，那些本来可以成功的人，都被钉死在书本上了。</p>
<p>  一开始我觉得这话说得偏激而霸气，很带劲，然后我就琢磨，我自己是属于读书还是不读书的？答案挺二百五的，还算是认真读书的老实孩子，小学天天被数学老师打板子，跟我唠叨越是好料越不能长歪，打着打着，就养成了越级做题的习惯，<strong>而这位老师教我最重要的东西，不是拿满分如何重要，而是如何去拿满分</strong>，读武侠小说的同学都知道‘天下武功唯快不破’‘万佛朝宗’这些调调，其实放在读书上，也是可以套用的。</p>
<p>  兜了一圈，读书到底有没有用？这个命题太大，我还没盖棺的资本，不敢瞎扯，但就我个人而言，<strong>读书有用没用，得看我们是读死书，还是读书读出世事洞明和人情练达</strong>，读死书，大概就是那个所谓的钉死在书本上了，读活了，哪怕成绩一般，我想到了社会，未必会比那些个高考状元差。</p>
<p>  读书无用论不可取，但存在即合理，当年暴发户嘲笑书生无用，其实有一半是对的，因为他们是社会这个大染缸里的高材生，错的一半不需要我多说，现在的社会趋势已经说明一切，要不中南海会有清华帮聚会？会有工科当政的说法？<strong>以后如果工科不再当政，那也肯定是风水轮流到了文科，怎么都轮不到天天上网玩游戏的，是吧？</strong></p>
<p>  越是成熟的社会，就越讲究积淀，放在各个行业也是如此，草莽龙蛇的年代一过，注定越来越靠扎实底蕴。</p>
<p>  <strong>读书好坏不在成绩，但话说回来，你连那些套教科书都玩不过，反而被玩死，就眼巴巴等着踏入社会大杀四方？</strong>不读书，或者说拼都不肯拼不敢拼一下，都成骄傲的资本了？天天嚷着富二代可恨该杀没用，人家照样吃香喝辣，还不如多想想富二代这么惬意，富一代是如何挣扎上位的？有人就说了官二代官三代太子党们又怎么讲，呵，问这个问题的，肯定是历史没学好，一部《解放战争》足以说明一切。”</p>
<p>　　“扯远了，难怪我作文一直没能拿过高分，议论文还好，散文完全是形散神更散。我想证明读书有用，现在没资格，希望以后有机会能证明，输了，正好当反面典型。接下来是不是该问答环节了？刚才在报刊亭那边买报纸，看到满摊子都是我的照片，你们多半是被这些骗进来的，我尽量做到有问必答。”</p>
<p>　　场面立即火爆起来。</p>
<p>　　问题一个个抛出来，不少都极为尖锐，赵甲第还真做到了知无不言言无不尽。</p>
<p>　　“学长，听说你精通围棋，那篇《他是谁》提到你在弈城有注册，我是业余里的业余，但在弈城也泡了好几年，就想问你是不是那个强九段‘国士无双’。”<br>　　“是。”<br>　　那位兄弟立马崇拜得五体投地，恨不得当场拜师学艺了。<br>　　“你已经进入发改委了，还会继承家族企业吗？”<br>　　“不出意外，会。”<br>　　满堂震惊。</p>
<p>　　“学长，我矮穷龊，一见到美女就脸红，能不能传授点经验？”</p>
<p>　　<strong>“舍得一身剁能把皇帝拉下马这是最逆天的屁民，这个我们不敢想，但舍得一身剐能把女神扛上床，这才是最凶残的癞蛤蟆。我一直坚信这点，脸皮厚点肯定没错，但前提是能保证自己给她幸福。”</strong></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="为什么我会喜欢《老子是癞蛤蟆》这本书？">为什么我会喜欢《老子是癞蛤蟆》这本书？</h2><blockquote>
<p>说实话这本书有很多三观不正的地方，比如男主的后宫群，里面描述的各种关系等等。。。毕竟一本YY小说嘛，但是作为一个有思想的人，读书不都是应该取其]]>
    </summary>
    
      <category term="摘录" scheme="http://guowenfh.github.io/tags/%E6%91%98%E5%BD%95/"/>
    
      <category term="生活" scheme="http://guowenfh.github.io/categories/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Ajax入门（二）Ajax函数封装]]></title>
    <link href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/"/>
    <id>http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/</id>
    <published>2015-12-18T11:49:35.000Z</published>
    <updated>2015-12-27T04:38:34.698Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>如果看了的我上一篇博客《<a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/">Ajax入门（一）从0开始到一次成功的GET请求</a>》的话，肯定知道我们已经完成了一个简单的get请求函数了。如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 一个简单的get请求</span><br><span class="line"> * @param &#123;String&#125;   url     请求地址,文件名</span><br><span class="line"> * @param &#123;Function&#125; fnSucc  请求成功时执行的函数</span><br><span class="line"> * @param &#123;Function&#125; fnFaild 请求失败执行的函数</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AJAX</span>(<span class="params">url, fnSucc, fnFaild</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建ajax对象</span></span><br><span class="line">    <span class="keyword">var</span> oAjax = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 此处必须需要使用window.的方式,表示为window对象的一个属性.不存在时值为undefined.</span><br><span class="line">         * 进入else若直接使用XMLHttpRequest在不支持的情况下会报错</span><br><span class="line">         **/</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="comment">//IE6以上</span></span><br><span class="line">        oAjax = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oAjax = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.连接服务器</span></span><br><span class="line">    <span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line">    oAjax.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.发送请求</span></span><br><span class="line">    oAjax.send();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.接收返回</span></span><br><span class="line">    <span class="comment">//OnRedayStateChange事件</span></span><br><span class="line">    oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (oAjax.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oAjax.status === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="comment">//                alert("成功" + oAjax.responseText);</span></span><br><span class="line">                fnSucc(oAjax.responseText);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//                alert("服务器响应失败!");</span></span><br><span class="line">                <span class="keyword">if</span> (fnFaild) &#123;</span><br><span class="line">                    fnFaild();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>为什么要继续进行Ajax函数封装？</strong><br>原因如下：</p>
<ol>
<li>目前方法只能使用get请求，而不能使用post请求，而在用户注册时必须使用POST，因为POST，现在不够完整。</li>
<li>目前请求参数只能直接写在url里，不利于动态获取数据，应该使用参数解析的方式，便于使用。</li>
<li>get请求方式请求缓存问题。</li>
<li>学习封装方法，</li>
</ol>
<h2 id="改造目标">改造目标</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// your implement</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>options是一个对象，里面可以包括的参数为：</p>
<ul>
<li>type: post或者get，可以有一个默认值</li>
<li>data: 发送的数据，为一个键值对象或者为一个用&amp;连接的赋值字符串</li>
<li>onsuccess: 成功时的调用函数</li>
<li>onfail: 失败时的调用函数</li>
</ul>
<h2 id="改造开始（三步）">改造开始（三步）</h2><h3 id="（一）原函数的改造">（一）原函数的改造</h3><p>形参中，删除<code>fnSucc</code>、<code>fnFaild</code> 添加<code>options</code>。使成功与失败执行的函数变成options对象的 <code>onsuccess</code>、<code>onfail</code>两个方法对应的值。<br>主要是在<strong>4、接收返回</strong>部分进行更改，如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.接收返回</span></span><br><span class="line">oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (oAjax.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (oAjax.status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">//请求成功。形参为获取到的字符串形式的响应数据</span></span><br><span class="line">            options.onsuccess(oAjax.responseText);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//先判断是否存在请求失败函数</span></span><br><span class="line">            <span class="comment">//存在时，形参为XMLHttpRequest对象，便于进行错误进行处理</span></span><br><span class="line">            <span class="keyword">if</span> (options.onfail) &#123;</span><br><span class="line">                options.onfail(oAjax);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="（二）请求参数的处理">（二）请求参数的处理</h3><blockquote>
<p>首先我们要知道的是在使用请求参数存在时，GET方式的请求参数特别简单。直接在url后面添加?参数名=参数值&amp;参数名二=参数值二</p>
</blockquote>
<h4 id="实现思路：">实现思路：</h4><ol>
<li>首先判断options.data是否存在，不存在时使用<code>&quot;?timestamp= + new Date().getTime();</code>链接在url后，以清除缓存。<ul>
<li>这里只是我使用的方法，这里的timestamp可以随意更改</li>
<li><code>new Date().getTime();</code>也可以用<code>Math.random();</code>主要是保持每次请求的url都不一样。</li>
<li>还有许多别的方法参考<a href="http://any9.com/1731.html" target="_blank" rel="external">Ajax缓存问题怎么解决？</a>。有兴趣的自己再多google一下吧。</li>
</ul>
</li>
<li>存在options.data时，应该限制请求data格式便于处理，设定为JSON（当然没必要像JSON那么严格，但是应该保持键值对的格式）。</li>
<li>使用for in 遍历data，使用<code>=</code>来连接键与值，使用<code>&amp;</code>来连接多个请求参数</li>
<li>只需要对原函数中的<strong>2.连接服务器</strong>进行更改</li>
</ol>
<h4 id="实现如下：">实现如下：</h4><p>原：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.连接服务器</span></span><br><span class="line"><span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line">oAjax.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p><strong>现：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line"><span class="keyword">var</span> param = <span class="string">""</span>;<span class="comment">//请求参数。</span></span><br><span class="line"><span class="comment">//判断data存在时缓存它，不存在时，设为0</span></span><br><span class="line"><span class="keyword">var</span> data = options.data ? options.data : <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span>(data)===<span class="string">"object"</span>)&#123;<span class="comment">//只有data为对象使才执行</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> data)&#123;<span class="comment">//请求参数拼接</span></span><br><span class="line">		<span class="keyword">if</span> (data.hasOwnProperty(key)) &#123;</span><br><span class="line">			param += key+<span class="string">"="</span>+data[key]+<span class="string">"&amp;"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	param.replace(<span class="regexp">/&amp;$/</span>,<span class="string">""</span>);<span class="comment">//去除结尾的&amp;。</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	param= <span class="string">"timestamp="</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.连接服务器</span></span><br><span class="line">oAjax.open(<span class="string">"GET"</span>, url+<span class="string">"?"</span>+param, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<h3 id="（三）请求类型选择">（三）请求类型选择</h3><blockquote>
<p>使用post发送数据，模拟form提交。在url看不到请求参数，更加安全。</p>
</blockquote>
<h4 id="实现思路：-1">实现思路：</h4><ol>
<li>判断是否type是否存在，存在时转为大写，默认为GET请求。</li>
<li>判断请求的类型，GET 或  POST 。</li>
<li>在使用post请求提交数据时，请求参数不跟在url后面。</li>
<li><p>使用post请求数据必须添加在<code>open()</code>与<code>send()</code>直接添加头信息。</p>
<ul>
<li><code>xmlHttp.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);</code></li>
</ul>
</li>
<li><p>使用post请求数据，对<strong>2.连接服务器、3.发送请求</strong>部分进行处理</p>
</li>
</ol>
<h4 id="实现如下：-1">实现如下：</h4><p>原：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.连接服务器</span></span><br><span class="line">oAjax.open(<span class="string">"GET"</span>, url+<span class="string">"?"</span>+param, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p><strong>现</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.发送请求</span></span><br><span class="line"><span class="keyword">var</span> type = options.type ? options.type.toUpperCase() : <span class="string">"GET"</span> ;</span><br><span class="line"><span class="keyword">if</span>(type ===<span class="string">"GET"</span>)&#123;</span><br><span class="line">	oAjax.open(<span class="string">"GET"</span>, url+<span class="string">"?"</span>+param, <span class="literal">true</span>);</span><br><span class="line">	oAjax.send();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	oAjax.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">	oAjax.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">	oAjax.send(param);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="最终完成">最终完成</h2><blockquote>
<p>结合之前写的，集合起来。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * AJAX函数封装</span><br><span class="line"> * @param &#123;string&#125; url     请求地址（必须）</span><br><span class="line"> * @param &#123;object&#125; options 发送请求的选项参数</span><br><span class="line"> *   @config &#123;string&#125; [options.type] 请求发送的类型。默认为GET。</span><br><span class="line"> *   @config &#123;Object&#125; [options.data] 需要发送的数据。</span><br><span class="line"> *   @config &#123;Function&#125; [options.onsuccess] 请求成功时触发，function(oAjax.responseText, oAjax)。（必须）</span><br><span class="line"> *   @config &#123;Function&#125; [options.onfail] 请求失败时触发，function(oAjax)。(oAJax为XMLHttpRequest对象)</span><br><span class="line"> *</span><br><span class="line"> *@returns &#123;XMLHttpRequest&#125; 发送请求的XMLHttpRequest对象</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AJAX</span>(<span class="params">url, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建ajax对象</span></span><br><span class="line">    <span class="keyword">var</span> oAjax = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">         * 此处必须需要使用window.的方式,表示为window对象的一个属性.不存在时值为undefined,进入else</span><br><span class="line">         * 若直接使用XMLHttpRequest,在不支持的情况下会报错</span><br><span class="line">         **/</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="comment">//IE6以上</span></span><br><span class="line">        oAjax = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oAjax = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.连接服务器</span></span><br><span class="line">    <span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line">    <span class="keyword">var</span> param = <span class="string">""</span>; <span class="comment">//请求参数。</span></span><br><span class="line">    <span class="comment">//只有data存在，且为对象使才执行</span></span><br><span class="line">    <span class="keyword">var</span> data = options.data ? options.data : -<span class="number">1</span>; <span class="comment">//缓存data</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> (data) === <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> data) &#123; <span class="comment">//请求参数拼接</span></span><br><span class="line">            <span class="keyword">if</span> (data.hasOwnProperty(key)) &#123;</span><br><span class="line">                param += key + <span class="string">"="</span> + data[key] + <span class="string">"&amp;"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        param.replace(<span class="regexp">/&amp;$/</span>, <span class="string">""</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        param = <span class="string">"timestamp="</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.发送请求</span></span><br><span class="line">    <span class="keyword">var</span> type = options.type ? options.type.toUpperCase() : <span class="string">"GET"</span>;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">"GET"</span>) &#123;</span><br><span class="line">        oAjax.open(<span class="string">"GET"</span>, url + <span class="string">"?"</span> + param, <span class="literal">true</span>);</span><br><span class="line">        oAjax.send();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oAjax.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">        oAjax.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">        oAjax.send(param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.接收返回</span></span><br><span class="line">    <span class="comment">//OnRedayStateChange事件</span></span><br><span class="line">    oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (oAjax.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oAjax.status === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="comment">//请求成功。形参为获取到的字符串形式的响应数据</span></span><br><span class="line">                options.onsuccess(oAjax.responseText, oAjax);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//先判断是否存在请求失败函数</span></span><br><span class="line">                <span class="comment">//存在时，形参为XMLHttpRequest对象，便于进行错误进行处理</span></span><br><span class="line">                <span class="keyword">if</span> (options.onfail) &#123;</span><br><span class="line">                    options.onfail(oAjax);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> oAjax;<span class="comment">//发送请求的XMLHttpRequest对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>最终完成就是这样了。当然还远远算不上完美，比如<code>try catch</code>的使用 ，但是通过这样的封装，还是学到很多知识。</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>如果看了的我上一篇博客《<a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/">Ajax入门（一）从0开始到一次成功的GET请求</a>》的话，肯定知道我们已]]>
    </summary>
    
      <category term="Ajax" scheme="http://guowenfh.github.io/tags/Ajax/"/>
    
      <category term="JS" scheme="http://guowenfh.github.io/tags/JS/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Ajax入门（一）从0开始到一次成功的GET请求]]></title>
    <link href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/"/>
    <id>http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-1/</id>
    <published>2015-12-18T06:38:40.000Z</published>
    <updated>2015-12-27T04:38:35.963Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>续作<a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/">Ajax入门（二）Ajax函数封装</a><br>传统表单在提交后整个页面都刷新</p>
</blockquote>
<h2 id="什么是服务器">什么是服务器</h2><h3 id="网页浏览过程分析">网页浏览过程分析</h3><p>一个完整的<strong>HTTP请求</strong>过程,通常有下面7个步骤</p>
<ol>
<li>建立TCP连接</li>
<li>Web浏览器向Web服务器发送请求命令</li>
<li>Web浏览器发送请求头信息</li>
<li>Web服务器- 应答</li>
<li>Web服务器- 发送应答头信息</li>
<li>Web服务器- 向浏览器发送数据</li>
<li><p>Web服务器- 关闭TCP连接</p>
<p><strong>如何配置自己的服务器程序(AMP)</strong></p>
<blockquote>
<p>Ajax必须在服务器环境下才能正常使用</p>
</blockquote>
</li>
</ol>
<ul>
<li>我使用的WampServer程序.(支持中文)<a href="http://www.wampserver.com/en/" target="_blank" rel="external">官网连接</a>.可能速度不行,不过科学上网,大家应该都会.</li>
<li>网上的使用教程:<a href="http://www.phpthinking.com/archives/379" target="_blank" rel="external">如何安装使用</a></li>
<li>XAMPP–我试了一下,还是wamp简单,大家有兴趣就自己去测试了</li>
<li>推荐使用firefox浏览器进行AJAX的调试。</li>
</ul>
<h2 id="Ajax原理">Ajax原理</h2><blockquote>
<p>什么是Ajax?</p>
</blockquote>
<ul>
<li>无刷新数据读取<ul>
<li>用户注册/在线聊天室</li>
<li>理解同步和异步(基本都用异步请求).<blockquote>
<p>同步: 客户端发起请求–等待–&gt;服务器端处理—等待–&gt;响应–&gt;页面载入 (请求错误时全部重新载入).<br>异步: 客户端发起请求—&gt;服务器端处理—&gt;响应—&gt;页面载入(填写时,即时更新,部分返回).</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="HTTP请求">HTTP请求</h3><ul>
<li>一个HTTP请求一般由四部分组成<ol>
<li>HTTP请求的方法或动作如是<code>GET</code>还是<code>POST</code>请求</li>
<li>正在请求的URL,总得知道请求的地址是什么吧?</li>
<li>请求头,包含一些客户端环境信息,身份验证信息等</li>
<li>请求体,也就是请求正文,请求正文中可以包含客户端提交的查询字符串信息,表单信息等等.</li>
</ol>
</li>
</ul>
<p><img src="/images/ajax/http.png" alt="HTTP请求"></p>
<h3 id="HTTP响应">HTTP响应</h3><ul>
<li>一个<strong>HTTP响应</strong>一般由三部分组成:<ol>
<li>一个<strong>数字</strong>和<strong>文字</strong>组成的状态码,用来显示请求是成功还是失败</li>
<li><strong>响应头</strong>,响应头和请求头一样包含许多有用的信息,例如服务器类型,日期时间,内容类型和长度等.</li>
<li><strong>响应体</strong>,也就是响应正文.</li>
</ol>
</li>
</ul>
<p><img src="/images/ajax/http2.png" alt="HTTP响应"></p>
<h3 id="HTTP请求方式">HTTP请求方式</h3><table>
<thead>
<tr>
<th>GET</th>
<th>POST</th>
</tr>
</thead>
<tbody>
<tr>
<td>用于信息获取/查询(如:浏览帖子)</td>
<td>用于修改服务器上的资源(如:用户注册)</td>
</tr>
<tr>
<td>安全性低(使用<code>url</code>传递参数所有人可见)</td>
<td>安全性一般(至少不可见)</td>
</tr>
<tr>
<td>容量低(2000个字符)</td>
<td>容量几乎无限</td>
</tr>
</tbody>
</table>
<h3 id="常见的HTTP状态码">常见的HTTP状态码</h3><table>
<thead>
<tr>
<th>状态码</th>
<th>描述</th>
<th>原因短语</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>请求成功.一般用于GET和POST方法</td>
<td>OK</td>
</tr>
<tr>
<td>301</td>
<td>资源移动.所请求资源移动到新的URL,浏览器自动跳转到新的URL</td>
<td>Moved Permanently</td>
</tr>
<tr>
<td>304</td>
<td>未修改.所请求资源未修改读取缓存数据</td>
<td>Not Modified</td>
</tr>
<tr>
<td>400</td>
<td>请求语法错误,服务器无法理解</td>
<td>Bad Request</td>
</tr>
<tr>
<td>404</td>
<td>未找到资源,可以设置个性”404页面”</td>
<td>Not Found</td>
</tr>
<tr>
<td>500</td>
<td>服务器内部错误</td>
<td>internal Server Error</td>
</tr>
</tbody>
</table>
<h2 id="编写Ajax">编写Ajax</h2><p><strong>类比打电话理解Ajax编写步骤</strong> </p>
<table>
<thead>
<tr>
<th>打电话</th>
<th>ajax请求</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.打电话</td>
<td>1.创建Ajax对象</td>
</tr>
<tr>
<td>2.拨号</td>
<td>2.连接服务器</td>
</tr>
<tr>
<td>3.建立连接</td>
<td>3.发送请求</td>
</tr>
<tr>
<td>4.听</td>
<td>4.接受返回</td>
</tr>
</tbody>
</table>
<h3 id="1-创建Ajax对象">1.创建Ajax对象</h3><ul>
<li>IE6:<code>ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)</code>;//IE6已死,可以不考虑了</li>
<li><code>XMLHttpRequest()</code>; </li>
</ul>
<p>例:<code>var request = new XMLHttpRequest();</code></p>
<h3 id="2-连接服务器">2.连接服务器</h3><ul>
<li><code>open(method,url,async);</code></li>
<li>open(发送请求方法”GET/POST” ,(请求地址”文件名”) ,是否异步传输)</li>
</ul>
<p>例: <code>request.open(&quot;GET&quot;,&quot;get.json&quot;,true);</code></p>
<h3 id="3-发送请求">3.发送请求</h3><ul>
<li><code>send(string)</code><ul>
<li>在使用<code>GET</code>方式请求时无需填写参数</li>
<li>在使用<code>POST</code>方式时参数代表着向服务器发送的数据</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//完整的GET请求</span></span><br><span class="line"><span class="keyword">var</span> oAjax = <span class="keyword">new</span> XMLHttpRequest();<span class="comment">//创建Ajax对象</span></span><br><span class="line">oAjax.open(<span class="string">"GET"</span>,<span class="string">"create.php"</span>,<span class="literal">true</span>);<span class="comment">//连接服务器</span></span><br><span class="line">oAjax.send();<span class="comment">//发送请求</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//完整的POST发送请求</span></span><br><span class="line"><span class="keyword">var</span> oAjax = <span class="keyword">new</span> XMLHttpRequest();<span class="comment">//创建</span></span><br><span class="line">oAjax.open(<span class="string">"POST"</span>,<span class="string">"create.php"</span>,<span class="literal">true</span>);<span class="comment">//"POST"</span></span><br><span class="line">oAjax.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);<span class="comment">//设置HTTP头信息.必须在open与send之间,否则出现异常.</span></span><br><span class="line">oAjax.send(<span class="string">"name=陈二狗&amp;sex=男"</span>);<span class="comment">//发送给服务器的内容</span></span><br></pre></td></tr></table></figure>
<h3 id="4-接收返回-请求状态监控">4.接收返回-请求状态监控</h3><ul>
<li>XMLHttpRequset取得响应</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>responseText</code></td>
<td>获得字符串形式的响应数据</td>
</tr>
<tr>
<td><code>responseXML</code></td>
<td>获得XML形式的响应数据</td>
</tr>
<tr>
<td><code>status</code>和<code>statusText</code></td>
<td>以数字和文本方式返回HTTP状态码</td>
</tr>
<tr>
<td><code>getAllResponseHeader()</code></td>
<td>获取所有的响应报头</td>
</tr>
<tr>
<td><code>getResponseheader()</code></td>
<td>查询响应中的某个字段的值</td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong><code>onreadystatechange</code>事件</strong></p>
<blockquote>
<p>通过监听<code>onreadystatechange</code>事件,来判断请求的状态.</p>
</blockquote>
</li>
<li><p><code>readyState</code>属性:响应返回所处状态</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>状态码</th>
<th>状态</th>
<th>所处位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>(未初始化)</td>
<td>还没有调用<code>open()</code>方法</td>
</tr>
<tr>
<td>1</td>
<td>(载入)</td>
<td>已调用<code>send()</code>方法,正在发送请求</td>
</tr>
<tr>
<td>2</td>
<td>(载入完成)</td>
<td><code>send()</code>方法完成,已经收到全部响应 内容</td>
</tr>
<tr>
<td>3</td>
<td>(解析)</td>
<td>正在解析响应内容</td>
</tr>
<tr>
<td>4</td>
<td>(完成)</td>
<td>响应内容解析完成,<em>可以在客户端调用了</em></td>
</tr>
</tbody>
</table>
<p>例:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本完整的一个Ajax请求</span></span><br><span class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">request.open(<span class="string">"GET"</span>,<span class="string">"get.json"</span>,<span class="literal">true</span>);</span><br><span class="line">request.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">//响应成功,做一些事情</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">//响应失败,做一些事情</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="使用函数简单的封装一个get请求">使用函数简单的封装一个get请求</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 一个简单的异步get请求</span><br><span class="line"> * <span class="doctag">@param</span> &#123;String&#125;   url     请求地址,文件名</span><br><span class="line"> * <span class="doctag">@param</span> &#123;Function&#125; fnSucc  请求成功时执行的函数,形参为为获取的字符串值.</span><br><span class="line"> * <span class="doctag">@param</span> &#123;Function&#125; fnFaild 请求失败执行的函数,可选参数</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">(url, fnSucc, fnFaild)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1.创建ajax对象</span></span><br><span class="line">    <span class="keyword">var</span> oAjax = <span class="keyword">null</span></span><br><span class="line">        <span class="comment">//此处必须需要使用window.的方式,表示为window对象的一个属性.不存在是值为undefined,进入else/若直接使用XMLHttpRequest在不支持的情况下会报错</span></span><br><span class="line">    <span class="keyword">if</span> (window.XMLHttpRequest) &#123;</span><br><span class="line">        oAjax = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//IE6以上,现在应该不需要考虑IE6了</span></span><br><span class="line">        oAjax = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.连接服务器</span></span><br><span class="line">    <span class="comment">//open(方法,url,是否异步)</span></span><br><span class="line">    oAjax.open(<span class="string">"GET"</span>, url, <span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">//3.发送请求</span></span><br><span class="line">    oAjax.send();</span><br><span class="line">    <span class="comment">//4.接收返回</span></span><br><span class="line">    <span class="comment">//OnRedayStateChange事件</span></span><br><span class="line">    oAjax.onreadystatechange = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (oAjax.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oAjax.status === <span class="number">200</span>) &#123;</span><br><span class="line">                fnSucc(oAjax.responseText);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fnFaild) &#123;</span><br><span class="line">                    fnFaild();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Ajax">使用Ajax</h2><h3 id="基础:请求并显示静态TXT文件">基础:请求并显示静态TXT文件</h3><ul>
<li>字符集编码:不一致时会出现乱码</li>
<li>缓存,阻止缓存,(使用时间对象添加)</li>
</ul>
<h3 id="动态数据:请求JS(或JSON)文件">动态数据:请求JS(或JSON)文件</h3><blockquote>
<p>注：<strong>并不推荐使用<code>eval</code>，并不推荐使用<code>eval</code>，并不推荐使用<code>eval</code></strong>。因为eval解析数据时会有一系列问题出现。这里是因为只是学习就随意点了。<br>在需要解析请求数据时，推荐使用JSON的方法<code>JSON.parse()</code>可以将一个 JSON 字符串解析成为一个 JavaScript 值。参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="external">MDN-JSON</a></p>
</blockquote>
<ul>
<li><code>eval</code>的使用<br>例: </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"54-8*6+4"</span>;</span><br><span class="line">alert(<span class="built_in">eval</span>(str)); <span class="comment">//10;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">"[1,2,3]"</span>;   </span><br><span class="line"><span class="keyword">var</span> arr = <span class="built_in">eval</span>(str1);</span><br><span class="line">alert(arr[<span class="number">1</span>]);<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str3 = <span class="string">"function show()&#123;alert('abc');&#125;"</span>;</span><br><span class="line"><span class="built_in">eval</span>(str3);</span><br><span class="line">show() <span class="comment">//abc</span></span><br></pre></td></tr></table></figure>
<p><strong>一次成功的get请求</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//已经引入get函数</span></span><br><span class="line"><span class="comment">//数据文件放在同级目录下就行了。</span></span><br><span class="line">get(<span class="string">"json.js"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="built_in">eval</span>(str);</span><br><span class="line">    alert(arr[<span class="number">0</span>].a);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"服务器请求失败!"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//json.js存放的文件如下</span></span><br><span class="line"><span class="comment">/*</span><br><span class="line">    [&#123;</span><br><span class="line">        a: 12,</span><br><span class="line">        b: 5</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        a: 2,</span><br><span class="line">        b: 56</span><br><span class="line">    &#125;]</span><br><span class="line">*/</span></span><br><span class="line"><span class="comment">//服务器响应成功时,将返回12.</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>DOM</code>创建元素<ul>
<li>局部刷新:请求并显示部分网页文件,使用<code>for</code>循环.</li>
<li>这里是属于DOM操作的范围，在这里就不过多讲述了。</li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>续作<a href="http://guowenfh.github.io/2015/12/18/Ajax-elementary-course-2-fn/">Ajax入门（二）Ajax函数封装</a><br>传统表单在提交后整个页面都刷新</p>
<]]>
    </summary>
    
      <category term="Ajax" scheme="http://guowenfh.github.io/tags/Ajax/"/>
    
      <category term="JS" scheme="http://guowenfh.github.io/tags/JS/"/>
    
      <category term="前端技术" scheme="http://guowenfh.github.io/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
</feed>
